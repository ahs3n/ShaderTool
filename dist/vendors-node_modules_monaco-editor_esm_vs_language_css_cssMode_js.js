"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk"] = self["webpackChunk"] || []).push([["vendors-node_modules_monaco-editor_esm_vs_language_css_cssMode_js"],{

/***/ "./node_modules/monaco-editor/esm/vs/language/css/cssMode.js":
/*!*******************************************************************!*\
  !*** ./node_modules/monaco-editor/esm/vs/language/css/cssMode.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CompletionAdapter: () => (/* binding */ CompletionAdapter),\n/* harmony export */   DefinitionAdapter: () => (/* binding */ DefinitionAdapter),\n/* harmony export */   DiagnosticsAdapter: () => (/* binding */ DiagnosticsAdapter),\n/* harmony export */   DocumentColorAdapter: () => (/* binding */ DocumentColorAdapter),\n/* harmony export */   DocumentFormattingEditProvider: () => (/* binding */ DocumentFormattingEditProvider),\n/* harmony export */   DocumentHighlightAdapter: () => (/* binding */ DocumentHighlightAdapter),\n/* harmony export */   DocumentLinkAdapter: () => (/* binding */ DocumentLinkAdapter),\n/* harmony export */   DocumentRangeFormattingEditProvider: () => (/* binding */ DocumentRangeFormattingEditProvider),\n/* harmony export */   DocumentSymbolAdapter: () => (/* binding */ DocumentSymbolAdapter),\n/* harmony export */   FoldingRangeAdapter: () => (/* binding */ FoldingRangeAdapter),\n/* harmony export */   HoverAdapter: () => (/* binding */ HoverAdapter),\n/* harmony export */   ReferenceAdapter: () => (/* binding */ ReferenceAdapter),\n/* harmony export */   RenameAdapter: () => (/* binding */ RenameAdapter),\n/* harmony export */   SelectionRangeAdapter: () => (/* binding */ SelectionRangeAdapter),\n/* harmony export */   WorkerManager: () => (/* binding */ WorkerManager),\n/* harmony export */   fromPosition: () => (/* binding */ fromPosition),\n/* harmony export */   fromRange: () => (/* binding */ fromRange),\n/* harmony export */   setupMode: () => (/* binding */ setupMode),\n/* harmony export */   toRange: () => (/* binding */ toRange),\n/* harmony export */   toTextEdit: () => (/* binding */ toTextEdit)\n/* harmony export */ });\n/* harmony import */ var _editor_editor_api_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../editor/editor.api.js */ \"./node_modules/monaco-editor/esm/vs/editor/editor.api.js\");\n/*!-----------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Version: 0.50.0(c321d0fbecb50ab8a5365fa1965476b0ae63fc87)\r\n * Released under the MIT license\r\n * https://github.com/microsoft/monaco-editor/blob/main/LICENSE.txt\r\n *-----------------------------------------------------------------------------*/\r\n\r\nvar __defProp = Object.defineProperty;\r\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\r\nvar __getOwnPropNames = Object.getOwnPropertyNames;\r\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\r\nvar __copyProps = (to, from, except, desc) => {\r\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\r\n    for (let key of __getOwnPropNames(from))\r\n      if (!__hasOwnProp.call(to, key) && key !== except)\r\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\r\n  }\r\n  return to;\r\n};\r\nvar __reExport = (target, mod, secondTarget) => (__copyProps(target, mod, \"default\"), secondTarget && __copyProps(secondTarget, mod, \"default\"));\r\n\r\n// src/fillers/monaco-editor-core.ts\r\nvar monaco_editor_core_exports = {};\r\n__reExport(monaco_editor_core_exports, _editor_editor_api_js__WEBPACK_IMPORTED_MODULE_0__);\r\n\r\n\r\n// src/language/css/workerManager.ts\r\nvar STOP_WHEN_IDLE_FOR = 2 * 60 * 1e3;\r\nvar WorkerManager = class {\r\n  constructor(defaults) {\r\n    this._defaults = defaults;\r\n    this._worker = null;\r\n    this._client = null;\r\n    this._idleCheckInterval = window.setInterval(() => this._checkIfIdle(), 30 * 1e3);\r\n    this._lastUsedTime = 0;\r\n    this._configChangeListener = this._defaults.onDidChange(() => this._stopWorker());\r\n  }\r\n  _stopWorker() {\r\n    if (this._worker) {\r\n      this._worker.dispose();\r\n      this._worker = null;\r\n    }\r\n    this._client = null;\r\n  }\r\n  dispose() {\r\n    clearInterval(this._idleCheckInterval);\r\n    this._configChangeListener.dispose();\r\n    this._stopWorker();\r\n  }\r\n  _checkIfIdle() {\r\n    if (!this._worker) {\r\n      return;\r\n    }\r\n    let timePassedSinceLastUsed = Date.now() - this._lastUsedTime;\r\n    if (timePassedSinceLastUsed > STOP_WHEN_IDLE_FOR) {\r\n      this._stopWorker();\r\n    }\r\n  }\r\n  _getClient() {\r\n    this._lastUsedTime = Date.now();\r\n    if (!this._client) {\r\n      this._worker = monaco_editor_core_exports.editor.createWebWorker({\r\n        // module that exports the create() method and returns a `CSSWorker` instance\r\n        moduleId: \"vs/language/css/cssWorker\",\r\n        label: this._defaults.languageId,\r\n        // passed in to the create() method\r\n        createData: {\r\n          options: this._defaults.options,\r\n          languageId: this._defaults.languageId\r\n        }\r\n      });\r\n      this._client = this._worker.getProxy();\r\n    }\r\n    return this._client;\r\n  }\r\n  getLanguageServiceWorker(...resources) {\r\n    let _client;\r\n    return this._getClient().then((client) => {\r\n      _client = client;\r\n    }).then((_) => {\r\n      if (this._worker) {\r\n        return this._worker.withSyncedResources(resources);\r\n      }\r\n    }).then((_) => _client);\r\n  }\r\n};\r\n\r\n// node_modules/vscode-languageserver-types/lib/esm/main.js\r\nvar DocumentUri;\r\n(function(DocumentUri2) {\r\n  function is(value) {\r\n    return typeof value === \"string\";\r\n  }\r\n  DocumentUri2.is = is;\r\n})(DocumentUri || (DocumentUri = {}));\r\nvar URI;\r\n(function(URI2) {\r\n  function is(value) {\r\n    return typeof value === \"string\";\r\n  }\r\n  URI2.is = is;\r\n})(URI || (URI = {}));\r\nvar integer;\r\n(function(integer2) {\r\n  integer2.MIN_VALUE = -2147483648;\r\n  integer2.MAX_VALUE = 2147483647;\r\n  function is(value) {\r\n    return typeof value === \"number\" && integer2.MIN_VALUE <= value && value <= integer2.MAX_VALUE;\r\n  }\r\n  integer2.is = is;\r\n})(integer || (integer = {}));\r\nvar uinteger;\r\n(function(uinteger2) {\r\n  uinteger2.MIN_VALUE = 0;\r\n  uinteger2.MAX_VALUE = 2147483647;\r\n  function is(value) {\r\n    return typeof value === \"number\" && uinteger2.MIN_VALUE <= value && value <= uinteger2.MAX_VALUE;\r\n  }\r\n  uinteger2.is = is;\r\n})(uinteger || (uinteger = {}));\r\nvar Position;\r\n(function(Position3) {\r\n  function create(line, character) {\r\n    if (line === Number.MAX_VALUE) {\r\n      line = uinteger.MAX_VALUE;\r\n    }\r\n    if (character === Number.MAX_VALUE) {\r\n      character = uinteger.MAX_VALUE;\r\n    }\r\n    return { line, character };\r\n  }\r\n  Position3.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return Is.objectLiteral(candidate) && Is.uinteger(candidate.line) && Is.uinteger(candidate.character);\r\n  }\r\n  Position3.is = is;\r\n})(Position || (Position = {}));\r\nvar Range;\r\n(function(Range3) {\r\n  function create(one, two, three, four) {\r\n    if (Is.uinteger(one) && Is.uinteger(two) && Is.uinteger(three) && Is.uinteger(four)) {\r\n      return { start: Position.create(one, two), end: Position.create(three, four) };\r\n    } else if (Position.is(one) && Position.is(two)) {\r\n      return { start: one, end: two };\r\n    } else {\r\n      throw new Error(`Range#create called with invalid arguments[${one}, ${two}, ${three}, ${four}]`);\r\n    }\r\n  }\r\n  Range3.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n  }\r\n  Range3.is = is;\r\n})(Range || (Range = {}));\r\nvar Location;\r\n(function(Location2) {\r\n  function create(uri, range) {\r\n    return { uri, range };\r\n  }\r\n  Location2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return Is.objectLiteral(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n  }\r\n  Location2.is = is;\r\n})(Location || (Location = {}));\r\nvar LocationLink;\r\n(function(LocationLink2) {\r\n  function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n    return { targetUri, targetRange, targetSelectionRange, originSelectionRange };\r\n  }\r\n  LocationLink2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return Is.objectLiteral(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri) && Range.is(candidate.targetSelectionRange) && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n  }\r\n  LocationLink2.is = is;\r\n})(LocationLink || (LocationLink = {}));\r\nvar Color;\r\n(function(Color2) {\r\n  function create(red, green, blue, alpha) {\r\n    return {\r\n      red,\r\n      green,\r\n      blue,\r\n      alpha\r\n    };\r\n  }\r\n  Color2.create = create;\r\n  function is(value) {\r\n    const candidate = value;\r\n    return Is.objectLiteral(candidate) && Is.numberRange(candidate.red, 0, 1) && Is.numberRange(candidate.green, 0, 1) && Is.numberRange(candidate.blue, 0, 1) && Is.numberRange(candidate.alpha, 0, 1);\r\n  }\r\n  Color2.is = is;\r\n})(Color || (Color = {}));\r\nvar ColorInformation;\r\n(function(ColorInformation2) {\r\n  function create(range, color) {\r\n    return {\r\n      range,\r\n      color\r\n    };\r\n  }\r\n  ColorInformation2.create = create;\r\n  function is(value) {\r\n    const candidate = value;\r\n    return Is.objectLiteral(candidate) && Range.is(candidate.range) && Color.is(candidate.color);\r\n  }\r\n  ColorInformation2.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\nvar ColorPresentation;\r\n(function(ColorPresentation2) {\r\n  function create(label, textEdit, additionalTextEdits) {\r\n    return {\r\n      label,\r\n      textEdit,\r\n      additionalTextEdits\r\n    };\r\n  }\r\n  ColorPresentation2.create = create;\r\n  function is(value) {\r\n    const candidate = value;\r\n    return Is.objectLiteral(candidate) && Is.string(candidate.label) && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate)) && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n  }\r\n  ColorPresentation2.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\nvar FoldingRangeKind;\r\n(function(FoldingRangeKind2) {\r\n  FoldingRangeKind2.Comment = \"comment\";\r\n  FoldingRangeKind2.Imports = \"imports\";\r\n  FoldingRangeKind2.Region = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\nvar FoldingRange;\r\n(function(FoldingRange2) {\r\n  function create(startLine, endLine, startCharacter, endCharacter, kind, collapsedText) {\r\n    const result = {\r\n      startLine,\r\n      endLine\r\n    };\r\n    if (Is.defined(startCharacter)) {\r\n      result.startCharacter = startCharacter;\r\n    }\r\n    if (Is.defined(endCharacter)) {\r\n      result.endCharacter = endCharacter;\r\n    }\r\n    if (Is.defined(kind)) {\r\n      result.kind = kind;\r\n    }\r\n    if (Is.defined(collapsedText)) {\r\n      result.collapsedText = collapsedText;\r\n    }\r\n    return result;\r\n  }\r\n  FoldingRange2.create = create;\r\n  function is(value) {\r\n    const candidate = value;\r\n    return Is.objectLiteral(candidate) && Is.uinteger(candidate.startLine) && Is.uinteger(candidate.startLine) && (Is.undefined(candidate.startCharacter) || Is.uinteger(candidate.startCharacter)) && (Is.undefined(candidate.endCharacter) || Is.uinteger(candidate.endCharacter)) && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n  }\r\n  FoldingRange2.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\nvar DiagnosticRelatedInformation;\r\n(function(DiagnosticRelatedInformation2) {\r\n  function create(location, message) {\r\n    return {\r\n      location,\r\n      message\r\n    };\r\n  }\r\n  DiagnosticRelatedInformation2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n  }\r\n  DiagnosticRelatedInformation2.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\nvar DiagnosticSeverity;\r\n(function(DiagnosticSeverity2) {\r\n  DiagnosticSeverity2.Error = 1;\r\n  DiagnosticSeverity2.Warning = 2;\r\n  DiagnosticSeverity2.Information = 3;\r\n  DiagnosticSeverity2.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\nvar DiagnosticTag;\r\n(function(DiagnosticTag2) {\r\n  DiagnosticTag2.Unnecessary = 1;\r\n  DiagnosticTag2.Deprecated = 2;\r\n})(DiagnosticTag || (DiagnosticTag = {}));\r\nvar CodeDescription;\r\n(function(CodeDescription2) {\r\n  function is(value) {\r\n    const candidate = value;\r\n    return Is.objectLiteral(candidate) && Is.string(candidate.href);\r\n  }\r\n  CodeDescription2.is = is;\r\n})(CodeDescription || (CodeDescription = {}));\r\nvar Diagnostic;\r\n(function(Diagnostic2) {\r\n  function create(range, message, severity, code, source, relatedInformation) {\r\n    let result = { range, message };\r\n    if (Is.defined(severity)) {\r\n      result.severity = severity;\r\n    }\r\n    if (Is.defined(code)) {\r\n      result.code = code;\r\n    }\r\n    if (Is.defined(source)) {\r\n      result.source = source;\r\n    }\r\n    if (Is.defined(relatedInformation)) {\r\n      result.relatedInformation = relatedInformation;\r\n    }\r\n    return result;\r\n  }\r\n  Diagnostic2.create = create;\r\n  function is(value) {\r\n    var _a;\r\n    let candidate = value;\r\n    return Is.defined(candidate) && Range.is(candidate.range) && Is.string(candidate.message) && (Is.number(candidate.severity) || Is.undefined(candidate.severity)) && (Is.integer(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code)) && (Is.undefined(candidate.codeDescription) || Is.string((_a = candidate.codeDescription) === null || _a === void 0 ? void 0 : _a.href)) && (Is.string(candidate.source) || Is.undefined(candidate.source)) && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n  }\r\n  Diagnostic2.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\nvar Command;\r\n(function(Command2) {\r\n  function create(title, command, ...args) {\r\n    let result = { title, command };\r\n    if (Is.defined(args) && args.length > 0) {\r\n      result.arguments = args;\r\n    }\r\n    return result;\r\n  }\r\n  Command2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n  }\r\n  Command2.is = is;\r\n})(Command || (Command = {}));\r\nvar TextEdit;\r\n(function(TextEdit2) {\r\n  function replace(range, newText) {\r\n    return { range, newText };\r\n  }\r\n  TextEdit2.replace = replace;\r\n  function insert(position, newText) {\r\n    return { range: { start: position, end: position }, newText };\r\n  }\r\n  TextEdit2.insert = insert;\r\n  function del(range) {\r\n    return { range, newText: \"\" };\r\n  }\r\n  TextEdit2.del = del;\r\n  function is(value) {\r\n    const candidate = value;\r\n    return Is.objectLiteral(candidate) && Is.string(candidate.newText) && Range.is(candidate.range);\r\n  }\r\n  TextEdit2.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\nvar ChangeAnnotation;\r\n(function(ChangeAnnotation2) {\r\n  function create(label, needsConfirmation, description) {\r\n    const result = { label };\r\n    if (needsConfirmation !== void 0) {\r\n      result.needsConfirmation = needsConfirmation;\r\n    }\r\n    if (description !== void 0) {\r\n      result.description = description;\r\n    }\r\n    return result;\r\n  }\r\n  ChangeAnnotation2.create = create;\r\n  function is(value) {\r\n    const candidate = value;\r\n    return Is.objectLiteral(candidate) && Is.string(candidate.label) && (Is.boolean(candidate.needsConfirmation) || candidate.needsConfirmation === void 0) && (Is.string(candidate.description) || candidate.description === void 0);\r\n  }\r\n  ChangeAnnotation2.is = is;\r\n})(ChangeAnnotation || (ChangeAnnotation = {}));\r\nvar ChangeAnnotationIdentifier;\r\n(function(ChangeAnnotationIdentifier2) {\r\n  function is(value) {\r\n    const candidate = value;\r\n    return Is.string(candidate);\r\n  }\r\n  ChangeAnnotationIdentifier2.is = is;\r\n})(ChangeAnnotationIdentifier || (ChangeAnnotationIdentifier = {}));\r\nvar AnnotatedTextEdit;\r\n(function(AnnotatedTextEdit2) {\r\n  function replace(range, newText, annotation) {\r\n    return { range, newText, annotationId: annotation };\r\n  }\r\n  AnnotatedTextEdit2.replace = replace;\r\n  function insert(position, newText, annotation) {\r\n    return { range: { start: position, end: position }, newText, annotationId: annotation };\r\n  }\r\n  AnnotatedTextEdit2.insert = insert;\r\n  function del(range, annotation) {\r\n    return { range, newText: \"\", annotationId: annotation };\r\n  }\r\n  AnnotatedTextEdit2.del = del;\r\n  function is(value) {\r\n    const candidate = value;\r\n    return TextEdit.is(candidate) && (ChangeAnnotation.is(candidate.annotationId) || ChangeAnnotationIdentifier.is(candidate.annotationId));\r\n  }\r\n  AnnotatedTextEdit2.is = is;\r\n})(AnnotatedTextEdit || (AnnotatedTextEdit = {}));\r\nvar TextDocumentEdit;\r\n(function(TextDocumentEdit2) {\r\n  function create(textDocument, edits) {\r\n    return { textDocument, edits };\r\n  }\r\n  TextDocumentEdit2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return Is.defined(candidate) && OptionalVersionedTextDocumentIdentifier.is(candidate.textDocument) && Array.isArray(candidate.edits);\r\n  }\r\n  TextDocumentEdit2.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nvar CreateFile;\r\n(function(CreateFile2) {\r\n  function create(uri, options, annotation) {\r\n    let result = {\r\n      kind: \"create\",\r\n      uri\r\n    };\r\n    if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n      result.options = options;\r\n    }\r\n    if (annotation !== void 0) {\r\n      result.annotationId = annotation;\r\n    }\r\n    return result;\r\n  }\r\n  CreateFile2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return candidate && candidate.kind === \"create\" && Is.string(candidate.uri) && (candidate.options === void 0 || (candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))) && (candidate.annotationId === void 0 || ChangeAnnotationIdentifier.is(candidate.annotationId));\r\n  }\r\n  CreateFile2.is = is;\r\n})(CreateFile || (CreateFile = {}));\r\nvar RenameFile;\r\n(function(RenameFile2) {\r\n  function create(oldUri, newUri, options, annotation) {\r\n    let result = {\r\n      kind: \"rename\",\r\n      oldUri,\r\n      newUri\r\n    };\r\n    if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n      result.options = options;\r\n    }\r\n    if (annotation !== void 0) {\r\n      result.annotationId = annotation;\r\n    }\r\n    return result;\r\n  }\r\n  RenameFile2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return candidate && candidate.kind === \"rename\" && Is.string(candidate.oldUri) && Is.string(candidate.newUri) && (candidate.options === void 0 || (candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))) && (candidate.annotationId === void 0 || ChangeAnnotationIdentifier.is(candidate.annotationId));\r\n  }\r\n  RenameFile2.is = is;\r\n})(RenameFile || (RenameFile = {}));\r\nvar DeleteFile;\r\n(function(DeleteFile2) {\r\n  function create(uri, options, annotation) {\r\n    let result = {\r\n      kind: \"delete\",\r\n      uri\r\n    };\r\n    if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n      result.options = options;\r\n    }\r\n    if (annotation !== void 0) {\r\n      result.annotationId = annotation;\r\n    }\r\n    return result;\r\n  }\r\n  DeleteFile2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return candidate && candidate.kind === \"delete\" && Is.string(candidate.uri) && (candidate.options === void 0 || (candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))) && (candidate.annotationId === void 0 || ChangeAnnotationIdentifier.is(candidate.annotationId));\r\n  }\r\n  DeleteFile2.is = is;\r\n})(DeleteFile || (DeleteFile = {}));\r\nvar WorkspaceEdit;\r\n(function(WorkspaceEdit2) {\r\n  function is(value) {\r\n    let candidate = value;\r\n    return candidate && (candidate.changes !== void 0 || candidate.documentChanges !== void 0) && (candidate.documentChanges === void 0 || candidate.documentChanges.every((change) => {\r\n      if (Is.string(change.kind)) {\r\n        return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n      } else {\r\n        return TextDocumentEdit.is(change);\r\n      }\r\n    }));\r\n  }\r\n  WorkspaceEdit2.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextDocumentIdentifier;\r\n(function(TextDocumentIdentifier2) {\r\n  function create(uri) {\r\n    return { uri };\r\n  }\r\n  TextDocumentIdentifier2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return Is.defined(candidate) && Is.string(candidate.uri);\r\n  }\r\n  TextDocumentIdentifier2.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\nvar VersionedTextDocumentIdentifier;\r\n(function(VersionedTextDocumentIdentifier2) {\r\n  function create(uri, version) {\r\n    return { uri, version };\r\n  }\r\n  VersionedTextDocumentIdentifier2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return Is.defined(candidate) && Is.string(candidate.uri) && Is.integer(candidate.version);\r\n  }\r\n  VersionedTextDocumentIdentifier2.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\nvar OptionalVersionedTextDocumentIdentifier;\r\n(function(OptionalVersionedTextDocumentIdentifier2) {\r\n  function create(uri, version) {\r\n    return { uri, version };\r\n  }\r\n  OptionalVersionedTextDocumentIdentifier2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.integer(candidate.version));\r\n  }\r\n  OptionalVersionedTextDocumentIdentifier2.is = is;\r\n})(OptionalVersionedTextDocumentIdentifier || (OptionalVersionedTextDocumentIdentifier = {}));\r\nvar TextDocumentItem;\r\n(function(TextDocumentItem2) {\r\n  function create(uri, languageId, version, text) {\r\n    return { uri, languageId, version, text };\r\n  }\r\n  TextDocumentItem2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.integer(candidate.version) && Is.string(candidate.text);\r\n  }\r\n  TextDocumentItem2.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\nvar MarkupKind;\r\n(function(MarkupKind2) {\r\n  MarkupKind2.PlainText = \"plaintext\";\r\n  MarkupKind2.Markdown = \"markdown\";\r\n  function is(value) {\r\n    const candidate = value;\r\n    return candidate === MarkupKind2.PlainText || candidate === MarkupKind2.Markdown;\r\n  }\r\n  MarkupKind2.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nvar MarkupContent;\r\n(function(MarkupContent2) {\r\n  function is(value) {\r\n    const candidate = value;\r\n    return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n  }\r\n  MarkupContent2.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\nvar CompletionItemKind;\r\n(function(CompletionItemKind2) {\r\n  CompletionItemKind2.Text = 1;\r\n  CompletionItemKind2.Method = 2;\r\n  CompletionItemKind2.Function = 3;\r\n  CompletionItemKind2.Constructor = 4;\r\n  CompletionItemKind2.Field = 5;\r\n  CompletionItemKind2.Variable = 6;\r\n  CompletionItemKind2.Class = 7;\r\n  CompletionItemKind2.Interface = 8;\r\n  CompletionItemKind2.Module = 9;\r\n  CompletionItemKind2.Property = 10;\r\n  CompletionItemKind2.Unit = 11;\r\n  CompletionItemKind2.Value = 12;\r\n  CompletionItemKind2.Enum = 13;\r\n  CompletionItemKind2.Keyword = 14;\r\n  CompletionItemKind2.Snippet = 15;\r\n  CompletionItemKind2.Color = 16;\r\n  CompletionItemKind2.File = 17;\r\n  CompletionItemKind2.Reference = 18;\r\n  CompletionItemKind2.Folder = 19;\r\n  CompletionItemKind2.EnumMember = 20;\r\n  CompletionItemKind2.Constant = 21;\r\n  CompletionItemKind2.Struct = 22;\r\n  CompletionItemKind2.Event = 23;\r\n  CompletionItemKind2.Operator = 24;\r\n  CompletionItemKind2.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\nvar InsertTextFormat;\r\n(function(InsertTextFormat2) {\r\n  InsertTextFormat2.PlainText = 1;\r\n  InsertTextFormat2.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\nvar CompletionItemTag;\r\n(function(CompletionItemTag2) {\r\n  CompletionItemTag2.Deprecated = 1;\r\n})(CompletionItemTag || (CompletionItemTag = {}));\r\nvar InsertReplaceEdit;\r\n(function(InsertReplaceEdit2) {\r\n  function create(newText, insert, replace) {\r\n    return { newText, insert, replace };\r\n  }\r\n  InsertReplaceEdit2.create = create;\r\n  function is(value) {\r\n    const candidate = value;\r\n    return candidate && Is.string(candidate.newText) && Range.is(candidate.insert) && Range.is(candidate.replace);\r\n  }\r\n  InsertReplaceEdit2.is = is;\r\n})(InsertReplaceEdit || (InsertReplaceEdit = {}));\r\nvar InsertTextMode;\r\n(function(InsertTextMode2) {\r\n  InsertTextMode2.asIs = 1;\r\n  InsertTextMode2.adjustIndentation = 2;\r\n})(InsertTextMode || (InsertTextMode = {}));\r\nvar CompletionItemLabelDetails;\r\n(function(CompletionItemLabelDetails2) {\r\n  function is(value) {\r\n    const candidate = value;\r\n    return candidate && (Is.string(candidate.detail) || candidate.detail === void 0) && (Is.string(candidate.description) || candidate.description === void 0);\r\n  }\r\n  CompletionItemLabelDetails2.is = is;\r\n})(CompletionItemLabelDetails || (CompletionItemLabelDetails = {}));\r\nvar CompletionItem;\r\n(function(CompletionItem2) {\r\n  function create(label) {\r\n    return { label };\r\n  }\r\n  CompletionItem2.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\nvar CompletionList;\r\n(function(CompletionList2) {\r\n  function create(items, isIncomplete) {\r\n    return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n  }\r\n  CompletionList2.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nvar MarkedString;\r\n(function(MarkedString2) {\r\n  function fromPlainText(plainText) {\r\n    return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, \"\\\\$&\");\r\n  }\r\n  MarkedString2.fromPlainText = fromPlainText;\r\n  function is(value) {\r\n    const candidate = value;\r\n    return Is.string(candidate) || Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value);\r\n  }\r\n  MarkedString2.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nvar Hover;\r\n(function(Hover2) {\r\n  function is(value) {\r\n    let candidate = value;\r\n    return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) || MarkedString.is(candidate.contents) || Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n  }\r\n  Hover2.is = is;\r\n})(Hover || (Hover = {}));\r\nvar ParameterInformation;\r\n(function(ParameterInformation2) {\r\n  function create(label, documentation) {\r\n    return documentation ? { label, documentation } : { label };\r\n  }\r\n  ParameterInformation2.create = create;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\nvar SignatureInformation;\r\n(function(SignatureInformation2) {\r\n  function create(label, documentation, ...parameters) {\r\n    let result = { label };\r\n    if (Is.defined(documentation)) {\r\n      result.documentation = documentation;\r\n    }\r\n    if (Is.defined(parameters)) {\r\n      result.parameters = parameters;\r\n    } else {\r\n      result.parameters = [];\r\n    }\r\n    return result;\r\n  }\r\n  SignatureInformation2.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\nvar DocumentHighlightKind;\r\n(function(DocumentHighlightKind2) {\r\n  DocumentHighlightKind2.Text = 1;\r\n  DocumentHighlightKind2.Read = 2;\r\n  DocumentHighlightKind2.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\nvar DocumentHighlight;\r\n(function(DocumentHighlight2) {\r\n  function create(range, kind) {\r\n    let result = { range };\r\n    if (Is.number(kind)) {\r\n      result.kind = kind;\r\n    }\r\n    return result;\r\n  }\r\n  DocumentHighlight2.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\nvar SymbolKind;\r\n(function(SymbolKind2) {\r\n  SymbolKind2.File = 1;\r\n  SymbolKind2.Module = 2;\r\n  SymbolKind2.Namespace = 3;\r\n  SymbolKind2.Package = 4;\r\n  SymbolKind2.Class = 5;\r\n  SymbolKind2.Method = 6;\r\n  SymbolKind2.Property = 7;\r\n  SymbolKind2.Field = 8;\r\n  SymbolKind2.Constructor = 9;\r\n  SymbolKind2.Enum = 10;\r\n  SymbolKind2.Interface = 11;\r\n  SymbolKind2.Function = 12;\r\n  SymbolKind2.Variable = 13;\r\n  SymbolKind2.Constant = 14;\r\n  SymbolKind2.String = 15;\r\n  SymbolKind2.Number = 16;\r\n  SymbolKind2.Boolean = 17;\r\n  SymbolKind2.Array = 18;\r\n  SymbolKind2.Object = 19;\r\n  SymbolKind2.Key = 20;\r\n  SymbolKind2.Null = 21;\r\n  SymbolKind2.EnumMember = 22;\r\n  SymbolKind2.Struct = 23;\r\n  SymbolKind2.Event = 24;\r\n  SymbolKind2.Operator = 25;\r\n  SymbolKind2.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\nvar SymbolTag;\r\n(function(SymbolTag2) {\r\n  SymbolTag2.Deprecated = 1;\r\n})(SymbolTag || (SymbolTag = {}));\r\nvar SymbolInformation;\r\n(function(SymbolInformation2) {\r\n  function create(name, kind, range, uri, containerName) {\r\n    let result = {\r\n      name,\r\n      kind,\r\n      location: { uri, range }\r\n    };\r\n    if (containerName) {\r\n      result.containerName = containerName;\r\n    }\r\n    return result;\r\n  }\r\n  SymbolInformation2.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\nvar WorkspaceSymbol;\r\n(function(WorkspaceSymbol2) {\r\n  function create(name, kind, uri, range) {\r\n    return range !== void 0 ? { name, kind, location: { uri, range } } : { name, kind, location: { uri } };\r\n  }\r\n  WorkspaceSymbol2.create = create;\r\n})(WorkspaceSymbol || (WorkspaceSymbol = {}));\r\nvar DocumentSymbol;\r\n(function(DocumentSymbol2) {\r\n  function create(name, detail, kind, range, selectionRange, children) {\r\n    let result = {\r\n      name,\r\n      detail,\r\n      kind,\r\n      range,\r\n      selectionRange\r\n    };\r\n    if (children !== void 0) {\r\n      result.children = children;\r\n    }\r\n    return result;\r\n  }\r\n  DocumentSymbol2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return candidate && Is.string(candidate.name) && Is.number(candidate.kind) && Range.is(candidate.range) && Range.is(candidate.selectionRange) && (candidate.detail === void 0 || Is.string(candidate.detail)) && (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) && (candidate.children === void 0 || Array.isArray(candidate.children)) && (candidate.tags === void 0 || Array.isArray(candidate.tags));\r\n  }\r\n  DocumentSymbol2.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\nvar CodeActionKind;\r\n(function(CodeActionKind2) {\r\n  CodeActionKind2.Empty = \"\";\r\n  CodeActionKind2.QuickFix = \"quickfix\";\r\n  CodeActionKind2.Refactor = \"refactor\";\r\n  CodeActionKind2.RefactorExtract = \"refactor.extract\";\r\n  CodeActionKind2.RefactorInline = \"refactor.inline\";\r\n  CodeActionKind2.RefactorRewrite = \"refactor.rewrite\";\r\n  CodeActionKind2.Source = \"source\";\r\n  CodeActionKind2.SourceOrganizeImports = \"source.organizeImports\";\r\n  CodeActionKind2.SourceFixAll = \"source.fixAll\";\r\n})(CodeActionKind || (CodeActionKind = {}));\r\nvar CodeActionTriggerKind;\r\n(function(CodeActionTriggerKind2) {\r\n  CodeActionTriggerKind2.Invoked = 1;\r\n  CodeActionTriggerKind2.Automatic = 2;\r\n})(CodeActionTriggerKind || (CodeActionTriggerKind = {}));\r\nvar CodeActionContext;\r\n(function(CodeActionContext2) {\r\n  function create(diagnostics, only, triggerKind) {\r\n    let result = { diagnostics };\r\n    if (only !== void 0 && only !== null) {\r\n      result.only = only;\r\n    }\r\n    if (triggerKind !== void 0 && triggerKind !== null) {\r\n      result.triggerKind = triggerKind;\r\n    }\r\n    return result;\r\n  }\r\n  CodeActionContext2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string)) && (candidate.triggerKind === void 0 || candidate.triggerKind === CodeActionTriggerKind.Invoked || candidate.triggerKind === CodeActionTriggerKind.Automatic);\r\n  }\r\n  CodeActionContext2.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nvar CodeAction;\r\n(function(CodeAction2) {\r\n  function create(title, kindOrCommandOrEdit, kind) {\r\n    let result = { title };\r\n    let checkKind = true;\r\n    if (typeof kindOrCommandOrEdit === \"string\") {\r\n      checkKind = false;\r\n      result.kind = kindOrCommandOrEdit;\r\n    } else if (Command.is(kindOrCommandOrEdit)) {\r\n      result.command = kindOrCommandOrEdit;\r\n    } else {\r\n      result.edit = kindOrCommandOrEdit;\r\n    }\r\n    if (checkKind && kind !== void 0) {\r\n      result.kind = kind;\r\n    }\r\n    return result;\r\n  }\r\n  CodeAction2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return candidate && Is.string(candidate.title) && (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) && (candidate.kind === void 0 || Is.string(candidate.kind)) && (candidate.edit !== void 0 || candidate.command !== void 0) && (candidate.command === void 0 || Command.is(candidate.command)) && (candidate.isPreferred === void 0 || Is.boolean(candidate.isPreferred)) && (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n  }\r\n  CodeAction2.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\nvar CodeLens;\r\n(function(CodeLens2) {\r\n  function create(range, data) {\r\n    let result = { range };\r\n    if (Is.defined(data)) {\r\n      result.data = data;\r\n    }\r\n    return result;\r\n  }\r\n  CodeLens2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n  }\r\n  CodeLens2.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\nvar FormattingOptions;\r\n(function(FormattingOptions2) {\r\n  function create(tabSize, insertSpaces) {\r\n    return { tabSize, insertSpaces };\r\n  }\r\n  FormattingOptions2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return Is.defined(candidate) && Is.uinteger(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n  }\r\n  FormattingOptions2.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\nvar DocumentLink;\r\n(function(DocumentLink2) {\r\n  function create(range, target, data) {\r\n    return { range, target, data };\r\n  }\r\n  DocumentLink2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n  }\r\n  DocumentLink2.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\nvar SelectionRange;\r\n(function(SelectionRange2) {\r\n  function create(range, parent) {\r\n    return { range, parent };\r\n  }\r\n  SelectionRange2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return Is.objectLiteral(candidate) && Range.is(candidate.range) && (candidate.parent === void 0 || SelectionRange2.is(candidate.parent));\r\n  }\r\n  SelectionRange2.is = is;\r\n})(SelectionRange || (SelectionRange = {}));\r\nvar SemanticTokenTypes;\r\n(function(SemanticTokenTypes2) {\r\n  SemanticTokenTypes2[\"namespace\"] = \"namespace\";\r\n  SemanticTokenTypes2[\"type\"] = \"type\";\r\n  SemanticTokenTypes2[\"class\"] = \"class\";\r\n  SemanticTokenTypes2[\"enum\"] = \"enum\";\r\n  SemanticTokenTypes2[\"interface\"] = \"interface\";\r\n  SemanticTokenTypes2[\"struct\"] = \"struct\";\r\n  SemanticTokenTypes2[\"typeParameter\"] = \"typeParameter\";\r\n  SemanticTokenTypes2[\"parameter\"] = \"parameter\";\r\n  SemanticTokenTypes2[\"variable\"] = \"variable\";\r\n  SemanticTokenTypes2[\"property\"] = \"property\";\r\n  SemanticTokenTypes2[\"enumMember\"] = \"enumMember\";\r\n  SemanticTokenTypes2[\"event\"] = \"event\";\r\n  SemanticTokenTypes2[\"function\"] = \"function\";\r\n  SemanticTokenTypes2[\"method\"] = \"method\";\r\n  SemanticTokenTypes2[\"macro\"] = \"macro\";\r\n  SemanticTokenTypes2[\"keyword\"] = \"keyword\";\r\n  SemanticTokenTypes2[\"modifier\"] = \"modifier\";\r\n  SemanticTokenTypes2[\"comment\"] = \"comment\";\r\n  SemanticTokenTypes2[\"string\"] = \"string\";\r\n  SemanticTokenTypes2[\"number\"] = \"number\";\r\n  SemanticTokenTypes2[\"regexp\"] = \"regexp\";\r\n  SemanticTokenTypes2[\"operator\"] = \"operator\";\r\n  SemanticTokenTypes2[\"decorator\"] = \"decorator\";\r\n})(SemanticTokenTypes || (SemanticTokenTypes = {}));\r\nvar SemanticTokenModifiers;\r\n(function(SemanticTokenModifiers2) {\r\n  SemanticTokenModifiers2[\"declaration\"] = \"declaration\";\r\n  SemanticTokenModifiers2[\"definition\"] = \"definition\";\r\n  SemanticTokenModifiers2[\"readonly\"] = \"readonly\";\r\n  SemanticTokenModifiers2[\"static\"] = \"static\";\r\n  SemanticTokenModifiers2[\"deprecated\"] = \"deprecated\";\r\n  SemanticTokenModifiers2[\"abstract\"] = \"abstract\";\r\n  SemanticTokenModifiers2[\"async\"] = \"async\";\r\n  SemanticTokenModifiers2[\"modification\"] = \"modification\";\r\n  SemanticTokenModifiers2[\"documentation\"] = \"documentation\";\r\n  SemanticTokenModifiers2[\"defaultLibrary\"] = \"defaultLibrary\";\r\n})(SemanticTokenModifiers || (SemanticTokenModifiers = {}));\r\nvar SemanticTokens;\r\n(function(SemanticTokens2) {\r\n  function is(value) {\r\n    const candidate = value;\r\n    return Is.objectLiteral(candidate) && (candidate.resultId === void 0 || typeof candidate.resultId === \"string\") && Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === \"number\");\r\n  }\r\n  SemanticTokens2.is = is;\r\n})(SemanticTokens || (SemanticTokens = {}));\r\nvar InlineValueText;\r\n(function(InlineValueText2) {\r\n  function create(range, text) {\r\n    return { range, text };\r\n  }\r\n  InlineValueText2.create = create;\r\n  function is(value) {\r\n    const candidate = value;\r\n    return candidate !== void 0 && candidate !== null && Range.is(candidate.range) && Is.string(candidate.text);\r\n  }\r\n  InlineValueText2.is = is;\r\n})(InlineValueText || (InlineValueText = {}));\r\nvar InlineValueVariableLookup;\r\n(function(InlineValueVariableLookup2) {\r\n  function create(range, variableName, caseSensitiveLookup) {\r\n    return { range, variableName, caseSensitiveLookup };\r\n  }\r\n  InlineValueVariableLookup2.create = create;\r\n  function is(value) {\r\n    const candidate = value;\r\n    return candidate !== void 0 && candidate !== null && Range.is(candidate.range) && Is.boolean(candidate.caseSensitiveLookup) && (Is.string(candidate.variableName) || candidate.variableName === void 0);\r\n  }\r\n  InlineValueVariableLookup2.is = is;\r\n})(InlineValueVariableLookup || (InlineValueVariableLookup = {}));\r\nvar InlineValueEvaluatableExpression;\r\n(function(InlineValueEvaluatableExpression2) {\r\n  function create(range, expression) {\r\n    return { range, expression };\r\n  }\r\n  InlineValueEvaluatableExpression2.create = create;\r\n  function is(value) {\r\n    const candidate = value;\r\n    return candidate !== void 0 && candidate !== null && Range.is(candidate.range) && (Is.string(candidate.expression) || candidate.expression === void 0);\r\n  }\r\n  InlineValueEvaluatableExpression2.is = is;\r\n})(InlineValueEvaluatableExpression || (InlineValueEvaluatableExpression = {}));\r\nvar InlineValueContext;\r\n(function(InlineValueContext2) {\r\n  function create(frameId, stoppedLocation) {\r\n    return { frameId, stoppedLocation };\r\n  }\r\n  InlineValueContext2.create = create;\r\n  function is(value) {\r\n    const candidate = value;\r\n    return Is.defined(candidate) && Range.is(value.stoppedLocation);\r\n  }\r\n  InlineValueContext2.is = is;\r\n})(InlineValueContext || (InlineValueContext = {}));\r\nvar InlayHintKind;\r\n(function(InlayHintKind2) {\r\n  InlayHintKind2.Type = 1;\r\n  InlayHintKind2.Parameter = 2;\r\n  function is(value) {\r\n    return value === 1 || value === 2;\r\n  }\r\n  InlayHintKind2.is = is;\r\n})(InlayHintKind || (InlayHintKind = {}));\r\nvar InlayHintLabelPart;\r\n(function(InlayHintLabelPart2) {\r\n  function create(value) {\r\n    return { value };\r\n  }\r\n  InlayHintLabelPart2.create = create;\r\n  function is(value) {\r\n    const candidate = value;\r\n    return Is.objectLiteral(candidate) && (candidate.tooltip === void 0 || Is.string(candidate.tooltip) || MarkupContent.is(candidate.tooltip)) && (candidate.location === void 0 || Location.is(candidate.location)) && (candidate.command === void 0 || Command.is(candidate.command));\r\n  }\r\n  InlayHintLabelPart2.is = is;\r\n})(InlayHintLabelPart || (InlayHintLabelPart = {}));\r\nvar InlayHint;\r\n(function(InlayHint2) {\r\n  function create(position, label, kind) {\r\n    const result = { position, label };\r\n    if (kind !== void 0) {\r\n      result.kind = kind;\r\n    }\r\n    return result;\r\n  }\r\n  InlayHint2.create = create;\r\n  function is(value) {\r\n    const candidate = value;\r\n    return Is.objectLiteral(candidate) && Position.is(candidate.position) && (Is.string(candidate.label) || Is.typedArray(candidate.label, InlayHintLabelPart.is)) && (candidate.kind === void 0 || InlayHintKind.is(candidate.kind)) && candidate.textEdits === void 0 || Is.typedArray(candidate.textEdits, TextEdit.is) && (candidate.tooltip === void 0 || Is.string(candidate.tooltip) || MarkupContent.is(candidate.tooltip)) && (candidate.paddingLeft === void 0 || Is.boolean(candidate.paddingLeft)) && (candidate.paddingRight === void 0 || Is.boolean(candidate.paddingRight));\r\n  }\r\n  InlayHint2.is = is;\r\n})(InlayHint || (InlayHint = {}));\r\nvar StringValue;\r\n(function(StringValue2) {\r\n  function createSnippet(value) {\r\n    return { kind: \"snippet\", value };\r\n  }\r\n  StringValue2.createSnippet = createSnippet;\r\n})(StringValue || (StringValue = {}));\r\nvar InlineCompletionItem;\r\n(function(InlineCompletionItem2) {\r\n  function create(insertText, filterText, range, command) {\r\n    return { insertText, filterText, range, command };\r\n  }\r\n  InlineCompletionItem2.create = create;\r\n})(InlineCompletionItem || (InlineCompletionItem = {}));\r\nvar InlineCompletionList;\r\n(function(InlineCompletionList2) {\r\n  function create(items) {\r\n    return { items };\r\n  }\r\n  InlineCompletionList2.create = create;\r\n})(InlineCompletionList || (InlineCompletionList = {}));\r\nvar InlineCompletionTriggerKind;\r\n(function(InlineCompletionTriggerKind2) {\r\n  InlineCompletionTriggerKind2.Invoked = 0;\r\n  InlineCompletionTriggerKind2.Automatic = 1;\r\n})(InlineCompletionTriggerKind || (InlineCompletionTriggerKind = {}));\r\nvar SelectedCompletionInfo;\r\n(function(SelectedCompletionInfo2) {\r\n  function create(range, text) {\r\n    return { range, text };\r\n  }\r\n  SelectedCompletionInfo2.create = create;\r\n})(SelectedCompletionInfo || (SelectedCompletionInfo = {}));\r\nvar InlineCompletionContext;\r\n(function(InlineCompletionContext2) {\r\n  function create(triggerKind, selectedCompletionInfo) {\r\n    return { triggerKind, selectedCompletionInfo };\r\n  }\r\n  InlineCompletionContext2.create = create;\r\n})(InlineCompletionContext || (InlineCompletionContext = {}));\r\nvar WorkspaceFolder;\r\n(function(WorkspaceFolder2) {\r\n  function is(value) {\r\n    const candidate = value;\r\n    return Is.objectLiteral(candidate) && URI.is(candidate.uri) && Is.string(candidate.name);\r\n  }\r\n  WorkspaceFolder2.is = is;\r\n})(WorkspaceFolder || (WorkspaceFolder = {}));\r\nvar TextDocument;\r\n(function(TextDocument2) {\r\n  function create(uri, languageId, version, content) {\r\n    return new FullTextDocument(uri, languageId, version, content);\r\n  }\r\n  TextDocument2.create = create;\r\n  function is(value) {\r\n    let candidate = value;\r\n    return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.uinteger(candidate.lineCount) && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n  }\r\n  TextDocument2.is = is;\r\n  function applyEdits(document, edits) {\r\n    let text = document.getText();\r\n    let sortedEdits = mergeSort(edits, (a, b) => {\r\n      let diff = a.range.start.line - b.range.start.line;\r\n      if (diff === 0) {\r\n        return a.range.start.character - b.range.start.character;\r\n      }\r\n      return diff;\r\n    });\r\n    let lastModifiedOffset = text.length;\r\n    for (let i = sortedEdits.length - 1; i >= 0; i--) {\r\n      let e = sortedEdits[i];\r\n      let startOffset = document.offsetAt(e.range.start);\r\n      let endOffset = document.offsetAt(e.range.end);\r\n      if (endOffset <= lastModifiedOffset) {\r\n        text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n      } else {\r\n        throw new Error(\"Overlapping edit\");\r\n      }\r\n      lastModifiedOffset = startOffset;\r\n    }\r\n    return text;\r\n  }\r\n  TextDocument2.applyEdits = applyEdits;\r\n  function mergeSort(data, compare) {\r\n    if (data.length <= 1) {\r\n      return data;\r\n    }\r\n    const p = data.length / 2 | 0;\r\n    const left = data.slice(0, p);\r\n    const right = data.slice(p);\r\n    mergeSort(left, compare);\r\n    mergeSort(right, compare);\r\n    let leftIdx = 0;\r\n    let rightIdx = 0;\r\n    let i = 0;\r\n    while (leftIdx < left.length && rightIdx < right.length) {\r\n      let ret = compare(left[leftIdx], right[rightIdx]);\r\n      if (ret <= 0) {\r\n        data[i++] = left[leftIdx++];\r\n      } else {\r\n        data[i++] = right[rightIdx++];\r\n      }\r\n    }\r\n    while (leftIdx < left.length) {\r\n      data[i++] = left[leftIdx++];\r\n    }\r\n    while (rightIdx < right.length) {\r\n      data[i++] = right[rightIdx++];\r\n    }\r\n    return data;\r\n  }\r\n})(TextDocument || (TextDocument = {}));\r\nvar FullTextDocument = class {\r\n  constructor(uri, languageId, version, content) {\r\n    this._uri = uri;\r\n    this._languageId = languageId;\r\n    this._version = version;\r\n    this._content = content;\r\n    this._lineOffsets = void 0;\r\n  }\r\n  get uri() {\r\n    return this._uri;\r\n  }\r\n  get languageId() {\r\n    return this._languageId;\r\n  }\r\n  get version() {\r\n    return this._version;\r\n  }\r\n  getText(range) {\r\n    if (range) {\r\n      let start = this.offsetAt(range.start);\r\n      let end = this.offsetAt(range.end);\r\n      return this._content.substring(start, end);\r\n    }\r\n    return this._content;\r\n  }\r\n  update(event, version) {\r\n    this._content = event.text;\r\n    this._version = version;\r\n    this._lineOffsets = void 0;\r\n  }\r\n  getLineOffsets() {\r\n    if (this._lineOffsets === void 0) {\r\n      let lineOffsets = [];\r\n      let text = this._content;\r\n      let isLineStart = true;\r\n      for (let i = 0; i < text.length; i++) {\r\n        if (isLineStart) {\r\n          lineOffsets.push(i);\r\n          isLineStart = false;\r\n        }\r\n        let ch = text.charAt(i);\r\n        isLineStart = ch === \"\\r\" || ch === \"\\n\";\r\n        if (ch === \"\\r\" && i + 1 < text.length && text.charAt(i + 1) === \"\\n\") {\r\n          i++;\r\n        }\r\n      }\r\n      if (isLineStart && text.length > 0) {\r\n        lineOffsets.push(text.length);\r\n      }\r\n      this._lineOffsets = lineOffsets;\r\n    }\r\n    return this._lineOffsets;\r\n  }\r\n  positionAt(offset) {\r\n    offset = Math.max(Math.min(offset, this._content.length), 0);\r\n    let lineOffsets = this.getLineOffsets();\r\n    let low = 0, high = lineOffsets.length;\r\n    if (high === 0) {\r\n      return Position.create(0, offset);\r\n    }\r\n    while (low < high) {\r\n      let mid = Math.floor((low + high) / 2);\r\n      if (lineOffsets[mid] > offset) {\r\n        high = mid;\r\n      } else {\r\n        low = mid + 1;\r\n      }\r\n    }\r\n    let line = low - 1;\r\n    return Position.create(line, offset - lineOffsets[line]);\r\n  }\r\n  offsetAt(position) {\r\n    let lineOffsets = this.getLineOffsets();\r\n    if (position.line >= lineOffsets.length) {\r\n      return this._content.length;\r\n    } else if (position.line < 0) {\r\n      return 0;\r\n    }\r\n    let lineOffset = lineOffsets[position.line];\r\n    let nextLineOffset = position.line + 1 < lineOffsets.length ? lineOffsets[position.line + 1] : this._content.length;\r\n    return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n  }\r\n  get lineCount() {\r\n    return this.getLineOffsets().length;\r\n  }\r\n};\r\nvar Is;\r\n(function(Is2) {\r\n  const toString = Object.prototype.toString;\r\n  function defined(value) {\r\n    return typeof value !== \"undefined\";\r\n  }\r\n  Is2.defined = defined;\r\n  function undefined2(value) {\r\n    return typeof value === \"undefined\";\r\n  }\r\n  Is2.undefined = undefined2;\r\n  function boolean(value) {\r\n    return value === true || value === false;\r\n  }\r\n  Is2.boolean = boolean;\r\n  function string(value) {\r\n    return toString.call(value) === \"[object String]\";\r\n  }\r\n  Is2.string = string;\r\n  function number(value) {\r\n    return toString.call(value) === \"[object Number]\";\r\n  }\r\n  Is2.number = number;\r\n  function numberRange(value, min, max) {\r\n    return toString.call(value) === \"[object Number]\" && min <= value && value <= max;\r\n  }\r\n  Is2.numberRange = numberRange;\r\n  function integer2(value) {\r\n    return toString.call(value) === \"[object Number]\" && -2147483648 <= value && value <= 2147483647;\r\n  }\r\n  Is2.integer = integer2;\r\n  function uinteger2(value) {\r\n    return toString.call(value) === \"[object Number]\" && 0 <= value && value <= 2147483647;\r\n  }\r\n  Is2.uinteger = uinteger2;\r\n  function func(value) {\r\n    return toString.call(value) === \"[object Function]\";\r\n  }\r\n  Is2.func = func;\r\n  function objectLiteral(value) {\r\n    return value !== null && typeof value === \"object\";\r\n  }\r\n  Is2.objectLiteral = objectLiteral;\r\n  function typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n  }\r\n  Is2.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n\r\n// src/language/common/lspLanguageFeatures.ts\r\nvar DiagnosticsAdapter = class {\r\n  constructor(_languageId, _worker, configChangeEvent) {\r\n    this._languageId = _languageId;\r\n    this._worker = _worker;\r\n    this._disposables = [];\r\n    this._listener = /* @__PURE__ */ Object.create(null);\r\n    const onModelAdd = (model) => {\r\n      let modeId = model.getLanguageId();\r\n      if (modeId !== this._languageId) {\r\n        return;\r\n      }\r\n      let handle;\r\n      this._listener[model.uri.toString()] = model.onDidChangeContent(() => {\r\n        window.clearTimeout(handle);\r\n        handle = window.setTimeout(() => this._doValidate(model.uri, modeId), 500);\r\n      });\r\n      this._doValidate(model.uri, modeId);\r\n    };\r\n    const onModelRemoved = (model) => {\r\n      monaco_editor_core_exports.editor.setModelMarkers(model, this._languageId, []);\r\n      let uriStr = model.uri.toString();\r\n      let listener = this._listener[uriStr];\r\n      if (listener) {\r\n        listener.dispose();\r\n        delete this._listener[uriStr];\r\n      }\r\n    };\r\n    this._disposables.push(monaco_editor_core_exports.editor.onDidCreateModel(onModelAdd));\r\n    this._disposables.push(monaco_editor_core_exports.editor.onWillDisposeModel(onModelRemoved));\r\n    this._disposables.push(\r\n      monaco_editor_core_exports.editor.onDidChangeModelLanguage((event) => {\r\n        onModelRemoved(event.model);\r\n        onModelAdd(event.model);\r\n      })\r\n    );\r\n    this._disposables.push(\r\n      configChangeEvent((_) => {\r\n        monaco_editor_core_exports.editor.getModels().forEach((model) => {\r\n          if (model.getLanguageId() === this._languageId) {\r\n            onModelRemoved(model);\r\n            onModelAdd(model);\r\n          }\r\n        });\r\n      })\r\n    );\r\n    this._disposables.push({\r\n      dispose: () => {\r\n        monaco_editor_core_exports.editor.getModels().forEach(onModelRemoved);\r\n        for (let key in this._listener) {\r\n          this._listener[key].dispose();\r\n        }\r\n      }\r\n    });\r\n    monaco_editor_core_exports.editor.getModels().forEach(onModelAdd);\r\n  }\r\n  dispose() {\r\n    this._disposables.forEach((d) => d && d.dispose());\r\n    this._disposables.length = 0;\r\n  }\r\n  _doValidate(resource, languageId) {\r\n    this._worker(resource).then((worker) => {\r\n      return worker.doValidation(resource.toString());\r\n    }).then((diagnostics) => {\r\n      const markers = diagnostics.map((d) => toDiagnostics(resource, d));\r\n      let model = monaco_editor_core_exports.editor.getModel(resource);\r\n      if (model && model.getLanguageId() === languageId) {\r\n        monaco_editor_core_exports.editor.setModelMarkers(model, languageId, markers);\r\n      }\r\n    }).then(void 0, (err) => {\r\n      console.error(err);\r\n    });\r\n  }\r\n};\r\nfunction toSeverity(lsSeverity) {\r\n  switch (lsSeverity) {\r\n    case DiagnosticSeverity.Error:\r\n      return monaco_editor_core_exports.MarkerSeverity.Error;\r\n    case DiagnosticSeverity.Warning:\r\n      return monaco_editor_core_exports.MarkerSeverity.Warning;\r\n    case DiagnosticSeverity.Information:\r\n      return monaco_editor_core_exports.MarkerSeverity.Info;\r\n    case DiagnosticSeverity.Hint:\r\n      return monaco_editor_core_exports.MarkerSeverity.Hint;\r\n    default:\r\n      return monaco_editor_core_exports.MarkerSeverity.Info;\r\n  }\r\n}\r\nfunction toDiagnostics(resource, diag) {\r\n  let code = typeof diag.code === \"number\" ? String(diag.code) : diag.code;\r\n  return {\r\n    severity: toSeverity(diag.severity),\r\n    startLineNumber: diag.range.start.line + 1,\r\n    startColumn: diag.range.start.character + 1,\r\n    endLineNumber: diag.range.end.line + 1,\r\n    endColumn: diag.range.end.character + 1,\r\n    message: diag.message,\r\n    code,\r\n    source: diag.source\r\n  };\r\n}\r\nvar CompletionAdapter = class {\r\n  constructor(_worker, _triggerCharacters) {\r\n    this._worker = _worker;\r\n    this._triggerCharacters = _triggerCharacters;\r\n  }\r\n  get triggerCharacters() {\r\n    return this._triggerCharacters;\r\n  }\r\n  provideCompletionItems(model, position, context, token) {\r\n    const resource = model.uri;\r\n    return this._worker(resource).then((worker) => {\r\n      return worker.doComplete(resource.toString(), fromPosition(position));\r\n    }).then((info) => {\r\n      if (!info) {\r\n        return;\r\n      }\r\n      const wordInfo = model.getWordUntilPosition(position);\r\n      const wordRange = new monaco_editor_core_exports.Range(\r\n        position.lineNumber,\r\n        wordInfo.startColumn,\r\n        position.lineNumber,\r\n        wordInfo.endColumn\r\n      );\r\n      const items = info.items.map((entry) => {\r\n        const item = {\r\n          label: entry.label,\r\n          insertText: entry.insertText || entry.label,\r\n          sortText: entry.sortText,\r\n          filterText: entry.filterText,\r\n          documentation: entry.documentation,\r\n          detail: entry.detail,\r\n          command: toCommand(entry.command),\r\n          range: wordRange,\r\n          kind: toCompletionItemKind(entry.kind)\r\n        };\r\n        if (entry.textEdit) {\r\n          if (isInsertReplaceEdit(entry.textEdit)) {\r\n            item.range = {\r\n              insert: toRange(entry.textEdit.insert),\r\n              replace: toRange(entry.textEdit.replace)\r\n            };\r\n          } else {\r\n            item.range = toRange(entry.textEdit.range);\r\n          }\r\n          item.insertText = entry.textEdit.newText;\r\n        }\r\n        if (entry.additionalTextEdits) {\r\n          item.additionalTextEdits = entry.additionalTextEdits.map(toTextEdit);\r\n        }\r\n        if (entry.insertTextFormat === InsertTextFormat.Snippet) {\r\n          item.insertTextRules = monaco_editor_core_exports.languages.CompletionItemInsertTextRule.InsertAsSnippet;\r\n        }\r\n        return item;\r\n      });\r\n      return {\r\n        isIncomplete: info.isIncomplete,\r\n        suggestions: items\r\n      };\r\n    });\r\n  }\r\n};\r\nfunction fromPosition(position) {\r\n  if (!position) {\r\n    return void 0;\r\n  }\r\n  return { character: position.column - 1, line: position.lineNumber - 1 };\r\n}\r\nfunction fromRange(range) {\r\n  if (!range) {\r\n    return void 0;\r\n  }\r\n  return {\r\n    start: {\r\n      line: range.startLineNumber - 1,\r\n      character: range.startColumn - 1\r\n    },\r\n    end: { line: range.endLineNumber - 1, character: range.endColumn - 1 }\r\n  };\r\n}\r\nfunction toRange(range) {\r\n  if (!range) {\r\n    return void 0;\r\n  }\r\n  return new monaco_editor_core_exports.Range(\r\n    range.start.line + 1,\r\n    range.start.character + 1,\r\n    range.end.line + 1,\r\n    range.end.character + 1\r\n  );\r\n}\r\nfunction isInsertReplaceEdit(edit) {\r\n  return typeof edit.insert !== \"undefined\" && typeof edit.replace !== \"undefined\";\r\n}\r\nfunction toCompletionItemKind(kind) {\r\n  const mItemKind = monaco_editor_core_exports.languages.CompletionItemKind;\r\n  switch (kind) {\r\n    case CompletionItemKind.Text:\r\n      return mItemKind.Text;\r\n    case CompletionItemKind.Method:\r\n      return mItemKind.Method;\r\n    case CompletionItemKind.Function:\r\n      return mItemKind.Function;\r\n    case CompletionItemKind.Constructor:\r\n      return mItemKind.Constructor;\r\n    case CompletionItemKind.Field:\r\n      return mItemKind.Field;\r\n    case CompletionItemKind.Variable:\r\n      return mItemKind.Variable;\r\n    case CompletionItemKind.Class:\r\n      return mItemKind.Class;\r\n    case CompletionItemKind.Interface:\r\n      return mItemKind.Interface;\r\n    case CompletionItemKind.Module:\r\n      return mItemKind.Module;\r\n    case CompletionItemKind.Property:\r\n      return mItemKind.Property;\r\n    case CompletionItemKind.Unit:\r\n      return mItemKind.Unit;\r\n    case CompletionItemKind.Value:\r\n      return mItemKind.Value;\r\n    case CompletionItemKind.Enum:\r\n      return mItemKind.Enum;\r\n    case CompletionItemKind.Keyword:\r\n      return mItemKind.Keyword;\r\n    case CompletionItemKind.Snippet:\r\n      return mItemKind.Snippet;\r\n    case CompletionItemKind.Color:\r\n      return mItemKind.Color;\r\n    case CompletionItemKind.File:\r\n      return mItemKind.File;\r\n    case CompletionItemKind.Reference:\r\n      return mItemKind.Reference;\r\n  }\r\n  return mItemKind.Property;\r\n}\r\nfunction toTextEdit(textEdit) {\r\n  if (!textEdit) {\r\n    return void 0;\r\n  }\r\n  return {\r\n    range: toRange(textEdit.range),\r\n    text: textEdit.newText\r\n  };\r\n}\r\nfunction toCommand(c) {\r\n  return c && c.command === \"editor.action.triggerSuggest\" ? { id: c.command, title: c.title, arguments: c.arguments } : void 0;\r\n}\r\nvar HoverAdapter = class {\r\n  constructor(_worker) {\r\n    this._worker = _worker;\r\n  }\r\n  provideHover(model, position, token) {\r\n    let resource = model.uri;\r\n    return this._worker(resource).then((worker) => {\r\n      return worker.doHover(resource.toString(), fromPosition(position));\r\n    }).then((info) => {\r\n      if (!info) {\r\n        return;\r\n      }\r\n      return {\r\n        range: toRange(info.range),\r\n        contents: toMarkedStringArray(info.contents)\r\n      };\r\n    });\r\n  }\r\n};\r\nfunction isMarkupContent(thing) {\r\n  return thing && typeof thing === \"object\" && typeof thing.kind === \"string\";\r\n}\r\nfunction toMarkdownString(entry) {\r\n  if (typeof entry === \"string\") {\r\n    return {\r\n      value: entry\r\n    };\r\n  }\r\n  if (isMarkupContent(entry)) {\r\n    if (entry.kind === \"plaintext\") {\r\n      return {\r\n        value: entry.value.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, \"\\\\$&\")\r\n      };\r\n    }\r\n    return {\r\n      value: entry.value\r\n    };\r\n  }\r\n  return { value: \"```\" + entry.language + \"\\n\" + entry.value + \"\\n```\\n\" };\r\n}\r\nfunction toMarkedStringArray(contents) {\r\n  if (!contents) {\r\n    return void 0;\r\n  }\r\n  if (Array.isArray(contents)) {\r\n    return contents.map(toMarkdownString);\r\n  }\r\n  return [toMarkdownString(contents)];\r\n}\r\nvar DocumentHighlightAdapter = class {\r\n  constructor(_worker) {\r\n    this._worker = _worker;\r\n  }\r\n  provideDocumentHighlights(model, position, token) {\r\n    const resource = model.uri;\r\n    return this._worker(resource).then((worker) => worker.findDocumentHighlights(resource.toString(), fromPosition(position))).then((entries) => {\r\n      if (!entries) {\r\n        return;\r\n      }\r\n      return entries.map((entry) => {\r\n        return {\r\n          range: toRange(entry.range),\r\n          kind: toDocumentHighlightKind(entry.kind)\r\n        };\r\n      });\r\n    });\r\n  }\r\n};\r\nfunction toDocumentHighlightKind(kind) {\r\n  switch (kind) {\r\n    case DocumentHighlightKind.Read:\r\n      return monaco_editor_core_exports.languages.DocumentHighlightKind.Read;\r\n    case DocumentHighlightKind.Write:\r\n      return monaco_editor_core_exports.languages.DocumentHighlightKind.Write;\r\n    case DocumentHighlightKind.Text:\r\n      return monaco_editor_core_exports.languages.DocumentHighlightKind.Text;\r\n  }\r\n  return monaco_editor_core_exports.languages.DocumentHighlightKind.Text;\r\n}\r\nvar DefinitionAdapter = class {\r\n  constructor(_worker) {\r\n    this._worker = _worker;\r\n  }\r\n  provideDefinition(model, position, token) {\r\n    const resource = model.uri;\r\n    return this._worker(resource).then((worker) => {\r\n      return worker.findDefinition(resource.toString(), fromPosition(position));\r\n    }).then((definition) => {\r\n      if (!definition) {\r\n        return;\r\n      }\r\n      return [toLocation(definition)];\r\n    });\r\n  }\r\n};\r\nfunction toLocation(location) {\r\n  return {\r\n    uri: monaco_editor_core_exports.Uri.parse(location.uri),\r\n    range: toRange(location.range)\r\n  };\r\n}\r\nvar ReferenceAdapter = class {\r\n  constructor(_worker) {\r\n    this._worker = _worker;\r\n  }\r\n  provideReferences(model, position, context, token) {\r\n    const resource = model.uri;\r\n    return this._worker(resource).then((worker) => {\r\n      return worker.findReferences(resource.toString(), fromPosition(position));\r\n    }).then((entries) => {\r\n      if (!entries) {\r\n        return;\r\n      }\r\n      return entries.map(toLocation);\r\n    });\r\n  }\r\n};\r\nvar RenameAdapter = class {\r\n  constructor(_worker) {\r\n    this._worker = _worker;\r\n  }\r\n  provideRenameEdits(model, position, newName, token) {\r\n    const resource = model.uri;\r\n    return this._worker(resource).then((worker) => {\r\n      return worker.doRename(resource.toString(), fromPosition(position), newName);\r\n    }).then((edit) => {\r\n      return toWorkspaceEdit(edit);\r\n    });\r\n  }\r\n};\r\nfunction toWorkspaceEdit(edit) {\r\n  if (!edit || !edit.changes) {\r\n    return void 0;\r\n  }\r\n  let resourceEdits = [];\r\n  for (let uri in edit.changes) {\r\n    const _uri = monaco_editor_core_exports.Uri.parse(uri);\r\n    for (let e of edit.changes[uri]) {\r\n      resourceEdits.push({\r\n        resource: _uri,\r\n        versionId: void 0,\r\n        textEdit: {\r\n          range: toRange(e.range),\r\n          text: e.newText\r\n        }\r\n      });\r\n    }\r\n  }\r\n  return {\r\n    edits: resourceEdits\r\n  };\r\n}\r\nvar DocumentSymbolAdapter = class {\r\n  constructor(_worker) {\r\n    this._worker = _worker;\r\n  }\r\n  provideDocumentSymbols(model, token) {\r\n    const resource = model.uri;\r\n    return this._worker(resource).then((worker) => worker.findDocumentSymbols(resource.toString())).then((items) => {\r\n      if (!items) {\r\n        return;\r\n      }\r\n      return items.map((item) => {\r\n        if (isDocumentSymbol(item)) {\r\n          return toDocumentSymbol(item);\r\n        }\r\n        return {\r\n          name: item.name,\r\n          detail: \"\",\r\n          containerName: item.containerName,\r\n          kind: toSymbolKind(item.kind),\r\n          range: toRange(item.location.range),\r\n          selectionRange: toRange(item.location.range),\r\n          tags: []\r\n        };\r\n      });\r\n    });\r\n  }\r\n};\r\nfunction isDocumentSymbol(symbol) {\r\n  return \"children\" in symbol;\r\n}\r\nfunction toDocumentSymbol(symbol) {\r\n  return {\r\n    name: symbol.name,\r\n    detail: symbol.detail ?? \"\",\r\n    kind: toSymbolKind(symbol.kind),\r\n    range: toRange(symbol.range),\r\n    selectionRange: toRange(symbol.selectionRange),\r\n    tags: symbol.tags ?? [],\r\n    children: (symbol.children ?? []).map((item) => toDocumentSymbol(item))\r\n  };\r\n}\r\nfunction toSymbolKind(kind) {\r\n  let mKind = monaco_editor_core_exports.languages.SymbolKind;\r\n  switch (kind) {\r\n    case SymbolKind.File:\r\n      return mKind.File;\r\n    case SymbolKind.Module:\r\n      return mKind.Module;\r\n    case SymbolKind.Namespace:\r\n      return mKind.Namespace;\r\n    case SymbolKind.Package:\r\n      return mKind.Package;\r\n    case SymbolKind.Class:\r\n      return mKind.Class;\r\n    case SymbolKind.Method:\r\n      return mKind.Method;\r\n    case SymbolKind.Property:\r\n      return mKind.Property;\r\n    case SymbolKind.Field:\r\n      return mKind.Field;\r\n    case SymbolKind.Constructor:\r\n      return mKind.Constructor;\r\n    case SymbolKind.Enum:\r\n      return mKind.Enum;\r\n    case SymbolKind.Interface:\r\n      return mKind.Interface;\r\n    case SymbolKind.Function:\r\n      return mKind.Function;\r\n    case SymbolKind.Variable:\r\n      return mKind.Variable;\r\n    case SymbolKind.Constant:\r\n      return mKind.Constant;\r\n    case SymbolKind.String:\r\n      return mKind.String;\r\n    case SymbolKind.Number:\r\n      return mKind.Number;\r\n    case SymbolKind.Boolean:\r\n      return mKind.Boolean;\r\n    case SymbolKind.Array:\r\n      return mKind.Array;\r\n  }\r\n  return mKind.Function;\r\n}\r\nvar DocumentLinkAdapter = class {\r\n  constructor(_worker) {\r\n    this._worker = _worker;\r\n  }\r\n  provideLinks(model, token) {\r\n    const resource = model.uri;\r\n    return this._worker(resource).then((worker) => worker.findDocumentLinks(resource.toString())).then((items) => {\r\n      if (!items) {\r\n        return;\r\n      }\r\n      return {\r\n        links: items.map((item) => ({\r\n          range: toRange(item.range),\r\n          url: item.target\r\n        }))\r\n      };\r\n    });\r\n  }\r\n};\r\nvar DocumentFormattingEditProvider = class {\r\n  constructor(_worker) {\r\n    this._worker = _worker;\r\n  }\r\n  provideDocumentFormattingEdits(model, options, token) {\r\n    const resource = model.uri;\r\n    return this._worker(resource).then((worker) => {\r\n      return worker.format(resource.toString(), null, fromFormattingOptions(options)).then((edits) => {\r\n        if (!edits || edits.length === 0) {\r\n          return;\r\n        }\r\n        return edits.map(toTextEdit);\r\n      });\r\n    });\r\n  }\r\n};\r\nvar DocumentRangeFormattingEditProvider = class {\r\n  constructor(_worker) {\r\n    this._worker = _worker;\r\n    this.canFormatMultipleRanges = false;\r\n  }\r\n  provideDocumentRangeFormattingEdits(model, range, options, token) {\r\n    const resource = model.uri;\r\n    return this._worker(resource).then((worker) => {\r\n      return worker.format(resource.toString(), fromRange(range), fromFormattingOptions(options)).then((edits) => {\r\n        if (!edits || edits.length === 0) {\r\n          return;\r\n        }\r\n        return edits.map(toTextEdit);\r\n      });\r\n    });\r\n  }\r\n};\r\nfunction fromFormattingOptions(options) {\r\n  return {\r\n    tabSize: options.tabSize,\r\n    insertSpaces: options.insertSpaces\r\n  };\r\n}\r\nvar DocumentColorAdapter = class {\r\n  constructor(_worker) {\r\n    this._worker = _worker;\r\n  }\r\n  provideDocumentColors(model, token) {\r\n    const resource = model.uri;\r\n    return this._worker(resource).then((worker) => worker.findDocumentColors(resource.toString())).then((infos) => {\r\n      if (!infos) {\r\n        return;\r\n      }\r\n      return infos.map((item) => ({\r\n        color: item.color,\r\n        range: toRange(item.range)\r\n      }));\r\n    });\r\n  }\r\n  provideColorPresentations(model, info, token) {\r\n    const resource = model.uri;\r\n    return this._worker(resource).then(\r\n      (worker) => worker.getColorPresentations(resource.toString(), info.color, fromRange(info.range))\r\n    ).then((presentations) => {\r\n      if (!presentations) {\r\n        return;\r\n      }\r\n      return presentations.map((presentation) => {\r\n        let item = {\r\n          label: presentation.label\r\n        };\r\n        if (presentation.textEdit) {\r\n          item.textEdit = toTextEdit(presentation.textEdit);\r\n        }\r\n        if (presentation.additionalTextEdits) {\r\n          item.additionalTextEdits = presentation.additionalTextEdits.map(toTextEdit);\r\n        }\r\n        return item;\r\n      });\r\n    });\r\n  }\r\n};\r\nvar FoldingRangeAdapter = class {\r\n  constructor(_worker) {\r\n    this._worker = _worker;\r\n  }\r\n  provideFoldingRanges(model, context, token) {\r\n    const resource = model.uri;\r\n    return this._worker(resource).then((worker) => worker.getFoldingRanges(resource.toString(), context)).then((ranges) => {\r\n      if (!ranges) {\r\n        return;\r\n      }\r\n      return ranges.map((range) => {\r\n        const result = {\r\n          start: range.startLine + 1,\r\n          end: range.endLine + 1\r\n        };\r\n        if (typeof range.kind !== \"undefined\") {\r\n          result.kind = toFoldingRangeKind(range.kind);\r\n        }\r\n        return result;\r\n      });\r\n    });\r\n  }\r\n};\r\nfunction toFoldingRangeKind(kind) {\r\n  switch (kind) {\r\n    case FoldingRangeKind.Comment:\r\n      return monaco_editor_core_exports.languages.FoldingRangeKind.Comment;\r\n    case FoldingRangeKind.Imports:\r\n      return monaco_editor_core_exports.languages.FoldingRangeKind.Imports;\r\n    case FoldingRangeKind.Region:\r\n      return monaco_editor_core_exports.languages.FoldingRangeKind.Region;\r\n  }\r\n  return void 0;\r\n}\r\nvar SelectionRangeAdapter = class {\r\n  constructor(_worker) {\r\n    this._worker = _worker;\r\n  }\r\n  provideSelectionRanges(model, positions, token) {\r\n    const resource = model.uri;\r\n    return this._worker(resource).then(\r\n      (worker) => worker.getSelectionRanges(\r\n        resource.toString(),\r\n        positions.map(fromPosition)\r\n      )\r\n    ).then((selectionRanges) => {\r\n      if (!selectionRanges) {\r\n        return;\r\n      }\r\n      return selectionRanges.map((selectionRange) => {\r\n        const result = [];\r\n        while (selectionRange) {\r\n          result.push({ range: toRange(selectionRange.range) });\r\n          selectionRange = selectionRange.parent;\r\n        }\r\n        return result;\r\n      });\r\n    });\r\n  }\r\n};\r\n\r\n// src/language/css/cssMode.ts\r\nfunction setupMode(defaults) {\r\n  const disposables = [];\r\n  const providers = [];\r\n  const client = new WorkerManager(defaults);\r\n  disposables.push(client);\r\n  const worker = (...uris) => {\r\n    return client.getLanguageServiceWorker(...uris);\r\n  };\r\n  function registerProviders() {\r\n    const { languageId, modeConfiguration } = defaults;\r\n    disposeAll(providers);\r\n    if (modeConfiguration.completionItems) {\r\n      providers.push(\r\n        monaco_editor_core_exports.languages.registerCompletionItemProvider(\r\n          languageId,\r\n          new CompletionAdapter(worker, [\"/\", \"-\", \":\"])\r\n        )\r\n      );\r\n    }\r\n    if (modeConfiguration.hovers) {\r\n      providers.push(\r\n        monaco_editor_core_exports.languages.registerHoverProvider(languageId, new HoverAdapter(worker))\r\n      );\r\n    }\r\n    if (modeConfiguration.documentHighlights) {\r\n      providers.push(\r\n        monaco_editor_core_exports.languages.registerDocumentHighlightProvider(\r\n          languageId,\r\n          new DocumentHighlightAdapter(worker)\r\n        )\r\n      );\r\n    }\r\n    if (modeConfiguration.definitions) {\r\n      providers.push(\r\n        monaco_editor_core_exports.languages.registerDefinitionProvider(\r\n          languageId,\r\n          new DefinitionAdapter(worker)\r\n        )\r\n      );\r\n    }\r\n    if (modeConfiguration.references) {\r\n      providers.push(\r\n        monaco_editor_core_exports.languages.registerReferenceProvider(\r\n          languageId,\r\n          new ReferenceAdapter(worker)\r\n        )\r\n      );\r\n    }\r\n    if (modeConfiguration.documentSymbols) {\r\n      providers.push(\r\n        monaco_editor_core_exports.languages.registerDocumentSymbolProvider(\r\n          languageId,\r\n          new DocumentSymbolAdapter(worker)\r\n        )\r\n      );\r\n    }\r\n    if (modeConfiguration.rename) {\r\n      providers.push(\r\n        monaco_editor_core_exports.languages.registerRenameProvider(languageId, new RenameAdapter(worker))\r\n      );\r\n    }\r\n    if (modeConfiguration.colors) {\r\n      providers.push(\r\n        monaco_editor_core_exports.languages.registerColorProvider(\r\n          languageId,\r\n          new DocumentColorAdapter(worker)\r\n        )\r\n      );\r\n    }\r\n    if (modeConfiguration.foldingRanges) {\r\n      providers.push(\r\n        monaco_editor_core_exports.languages.registerFoldingRangeProvider(\r\n          languageId,\r\n          new FoldingRangeAdapter(worker)\r\n        )\r\n      );\r\n    }\r\n    if (modeConfiguration.diagnostics) {\r\n      providers.push(\r\n        new DiagnosticsAdapter(languageId, worker, defaults.onDidChange)\r\n      );\r\n    }\r\n    if (modeConfiguration.selectionRanges) {\r\n      providers.push(\r\n        monaco_editor_core_exports.languages.registerSelectionRangeProvider(\r\n          languageId,\r\n          new SelectionRangeAdapter(worker)\r\n        )\r\n      );\r\n    }\r\n    if (modeConfiguration.documentFormattingEdits) {\r\n      providers.push(\r\n        monaco_editor_core_exports.languages.registerDocumentFormattingEditProvider(\r\n          languageId,\r\n          new DocumentFormattingEditProvider(worker)\r\n        )\r\n      );\r\n    }\r\n    if (modeConfiguration.documentRangeFormattingEdits) {\r\n      providers.push(\r\n        monaco_editor_core_exports.languages.registerDocumentRangeFormattingEditProvider(\r\n          languageId,\r\n          new DocumentRangeFormattingEditProvider(worker)\r\n        )\r\n      );\r\n    }\r\n  }\r\n  registerProviders();\r\n  disposables.push(asDisposable(providers));\r\n  return asDisposable(disposables);\r\n}\r\nfunction asDisposable(disposables) {\r\n  return { dispose: () => disposeAll(disposables) };\r\n}\r\nfunction disposeAll(disposables) {\r\n  while (disposables.length) {\r\n    disposables.pop().dispose();\r\n  }\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvbW9uYWNvLWVkaXRvci9lc20vdnMvbGFuZ3VhZ2UvY3NzL2Nzc01vZGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDRGQUE0RjtBQUN6SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxrREFBdUI7QUFDUTtBQUN0RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGtDQUFrQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGtCQUFrQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQywwQkFBMEI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsNEJBQTRCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsNEJBQTRCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZTtBQUNmLE1BQU07QUFDTixlQUFlO0FBQ2YsTUFBTTtBQUNOLG9FQUFvRSxJQUFJLElBQUksSUFBSSxJQUFJLE1BQU0sSUFBSSxLQUFLO0FBQ25HO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHNCQUFzQjtBQUN2QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDRCQUE0QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLG9DQUFvQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsc0JBQXNCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDRDQUE0QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDhDQUE4QztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw0Q0FBNEM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxvQ0FBb0M7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsb0VBQW9FO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0RBQWdEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxzQ0FBc0M7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDBDQUEwQztBQUMzQztBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQ0FBZ0M7QUFDakM7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDBCQUEwQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYSxTQUFTLGdDQUFnQztBQUN0RDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDRCQUE0QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsNENBQTRDO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnRUFBZ0U7QUFDakU7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWEsU0FBUyxnQ0FBZ0M7QUFDdEQ7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw4Q0FBOEM7QUFDL0M7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw0Q0FBNEM7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQ0FBZ0M7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdDQUFnQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdDQUFnQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxDQUFDLHNDQUFzQztBQUN2QztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHdEQUF3RDtBQUN6RDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDBFQUEwRTtBQUMzRTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDBGQUEwRjtBQUMzRjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDRDQUE0QztBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdDQUFnQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsc0NBQXNDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0RBQWdEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw0Q0FBNEM7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw4Q0FBOEM7QUFDL0M7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw4Q0FBOEM7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHdDQUF3QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0VBQWdFO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsQ0FBQyx3Q0FBd0M7QUFDekM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxDQUFDLHdDQUF3QztBQUN6QztBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLG9DQUFvQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsc0JBQXNCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBLDZCQUE2Qix1QkFBdUIsSUFBSTtBQUN4RDtBQUNBO0FBQ0EsQ0FBQyxvREFBb0Q7QUFDckQ7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsb0RBQW9EO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHNEQUFzRDtBQUN2RDtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw4Q0FBOEM7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdDQUFnQztBQUNqQztBQUNBO0FBQ0E7QUFDQSxDQUFDLDhCQUE4QjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDhDQUE4QztBQUMvQztBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0Msd0JBQXdCLGVBQWUsSUFBSSx3QkFBd0I7QUFDbkc7QUFDQTtBQUNBLENBQUMsMENBQTBDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsd0NBQXdDO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHdDQUF3QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsc0RBQXNEO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw4Q0FBOEM7QUFDL0M7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQ0FBZ0M7QUFDakM7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDRCQUE0QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDhDQUE4QztBQUMvQztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLG9DQUFvQztBQUNyQztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHdDQUF3QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0RBQWdEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsd0RBQXdEO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyx3Q0FBd0M7QUFDekM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQywwQ0FBMEM7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw4REFBOEQ7QUFDL0Q7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw0RUFBNEU7QUFDN0U7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnREFBZ0Q7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsc0NBQXNDO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0RBQWdEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyw4QkFBOEI7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxDQUFDLGtDQUFrQztBQUNuQztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLENBQUMsb0RBQW9EO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsQ0FBQyxvREFBb0Q7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGtFQUFrRTtBQUNuRTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBLENBQUMsd0RBQXdEO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsQ0FBQywwREFBMEQ7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDBDQUEwQztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHlDQUF5QyxRQUFRO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxvQ0FBb0M7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixpQkFBaUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQkFBZ0I7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrREFBK0Qsd0RBQXdEO0FBQ3ZIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLHNDQUFzQztBQUM5RDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxnQ0FBZ0M7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXNCRSIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9tb25hY28tZWRpdG9yL2VzbS92cy9sYW5ndWFnZS9jc3MvY3NzTW9kZS5qcz9kYjRmIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbiAqIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiBWZXJzaW9uOiAwLjUwLjAoYzMyMWQwZmJlY2I1MGFiOGE1MzY1ZmExOTY1NDc2YjBhZTYzZmM4NylcclxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvbW9uYWNvLWVkaXRvci9ibG9iL21haW4vTElDRU5TRS50eHRcclxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG52YXIgX19kZWZQcm9wID0gT2JqZWN0LmRlZmluZVByb3BlcnR5O1xyXG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XHJcbnZhciBfX2dldE93blByb3BOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xyXG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcclxudmFyIF9fY29weVByb3BzID0gKHRvLCBmcm9tLCBleGNlcHQsIGRlc2MpID0+IHtcclxuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICBmb3IgKGxldCBrZXkgb2YgX19nZXRPd25Qcm9wTmFtZXMoZnJvbSkpXHJcbiAgICAgIGlmICghX19oYXNPd25Qcm9wLmNhbGwodG8sIGtleSkgJiYga2V5ICE9PSBleGNlcHQpXHJcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xyXG4gIH1cclxuICByZXR1cm4gdG87XHJcbn07XHJcbnZhciBfX3JlRXhwb3J0ID0gKHRhcmdldCwgbW9kLCBzZWNvbmRUYXJnZXQpID0+IChfX2NvcHlQcm9wcyh0YXJnZXQsIG1vZCwgXCJkZWZhdWx0XCIpLCBzZWNvbmRUYXJnZXQgJiYgX19jb3B5UHJvcHMoc2Vjb25kVGFyZ2V0LCBtb2QsIFwiZGVmYXVsdFwiKSk7XHJcblxyXG4vLyBzcmMvZmlsbGVycy9tb25hY28tZWRpdG9yLWNvcmUudHNcclxudmFyIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzID0ge307XHJcbl9fcmVFeHBvcnQobW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMsIG1vbmFjb19lZGl0b3JfY29yZV9zdGFyKTtcclxuaW1wb3J0ICogYXMgbW9uYWNvX2VkaXRvcl9jb3JlX3N0YXIgZnJvbSBcIi4uLy4uL2VkaXRvci9lZGl0b3IuYXBpLmpzXCI7XHJcblxyXG4vLyBzcmMvbGFuZ3VhZ2UvY3NzL3dvcmtlck1hbmFnZXIudHNcclxudmFyIFNUT1BfV0hFTl9JRExFX0ZPUiA9IDIgKiA2MCAqIDFlMztcclxudmFyIFdvcmtlck1hbmFnZXIgPSBjbGFzcyB7XHJcbiAgY29uc3RydWN0b3IoZGVmYXVsdHMpIHtcclxuICAgIHRoaXMuX2RlZmF1bHRzID0gZGVmYXVsdHM7XHJcbiAgICB0aGlzLl93b3JrZXIgPSBudWxsO1xyXG4gICAgdGhpcy5fY2xpZW50ID0gbnVsbDtcclxuICAgIHRoaXMuX2lkbGVDaGVja0ludGVydmFsID0gd2luZG93LnNldEludGVydmFsKCgpID0+IHRoaXMuX2NoZWNrSWZJZGxlKCksIDMwICogMWUzKTtcclxuICAgIHRoaXMuX2xhc3RVc2VkVGltZSA9IDA7XHJcbiAgICB0aGlzLl9jb25maWdDaGFuZ2VMaXN0ZW5lciA9IHRoaXMuX2RlZmF1bHRzLm9uRGlkQ2hhbmdlKCgpID0+IHRoaXMuX3N0b3BXb3JrZXIoKSk7XHJcbiAgfVxyXG4gIF9zdG9wV29ya2VyKCkge1xyXG4gICAgaWYgKHRoaXMuX3dvcmtlcikge1xyXG4gICAgICB0aGlzLl93b3JrZXIuZGlzcG9zZSgpO1xyXG4gICAgICB0aGlzLl93b3JrZXIgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fY2xpZW50ID0gbnVsbDtcclxuICB9XHJcbiAgZGlzcG9zZSgpIHtcclxuICAgIGNsZWFySW50ZXJ2YWwodGhpcy5faWRsZUNoZWNrSW50ZXJ2YWwpO1xyXG4gICAgdGhpcy5fY29uZmlnQ2hhbmdlTGlzdGVuZXIuZGlzcG9zZSgpO1xyXG4gICAgdGhpcy5fc3RvcFdvcmtlcigpO1xyXG4gIH1cclxuICBfY2hlY2tJZklkbGUoKSB7XHJcbiAgICBpZiAoIXRoaXMuX3dvcmtlcikge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgdGltZVBhc3NlZFNpbmNlTGFzdFVzZWQgPSBEYXRlLm5vdygpIC0gdGhpcy5fbGFzdFVzZWRUaW1lO1xyXG4gICAgaWYgKHRpbWVQYXNzZWRTaW5jZUxhc3RVc2VkID4gU1RPUF9XSEVOX0lETEVfRk9SKSB7XHJcbiAgICAgIHRoaXMuX3N0b3BXb3JrZXIoKTtcclxuICAgIH1cclxuICB9XHJcbiAgX2dldENsaWVudCgpIHtcclxuICAgIHRoaXMuX2xhc3RVc2VkVGltZSA9IERhdGUubm93KCk7XHJcbiAgICBpZiAoIXRoaXMuX2NsaWVudCkge1xyXG4gICAgICB0aGlzLl93b3JrZXIgPSBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5lZGl0b3IuY3JlYXRlV2ViV29ya2VyKHtcclxuICAgICAgICAvLyBtb2R1bGUgdGhhdCBleHBvcnRzIHRoZSBjcmVhdGUoKSBtZXRob2QgYW5kIHJldHVybnMgYSBgQ1NTV29ya2VyYCBpbnN0YW5jZVxyXG4gICAgICAgIG1vZHVsZUlkOiBcInZzL2xhbmd1YWdlL2Nzcy9jc3NXb3JrZXJcIixcclxuICAgICAgICBsYWJlbDogdGhpcy5fZGVmYXVsdHMubGFuZ3VhZ2VJZCxcclxuICAgICAgICAvLyBwYXNzZWQgaW4gdG8gdGhlIGNyZWF0ZSgpIG1ldGhvZFxyXG4gICAgICAgIGNyZWF0ZURhdGE6IHtcclxuICAgICAgICAgIG9wdGlvbnM6IHRoaXMuX2RlZmF1bHRzLm9wdGlvbnMsXHJcbiAgICAgICAgICBsYW5ndWFnZUlkOiB0aGlzLl9kZWZhdWx0cy5sYW5ndWFnZUlkXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5fY2xpZW50ID0gdGhpcy5fd29ya2VyLmdldFByb3h5KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50O1xyXG4gIH1cclxuICBnZXRMYW5ndWFnZVNlcnZpY2VXb3JrZXIoLi4ucmVzb3VyY2VzKSB7XHJcbiAgICBsZXQgX2NsaWVudDtcclxuICAgIHJldHVybiB0aGlzLl9nZXRDbGllbnQoKS50aGVuKChjbGllbnQpID0+IHtcclxuICAgICAgX2NsaWVudCA9IGNsaWVudDtcclxuICAgIH0pLnRoZW4oKF8pID0+IHtcclxuICAgICAgaWYgKHRoaXMuX3dvcmtlcikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl93b3JrZXIud2l0aFN5bmNlZFJlc291cmNlcyhyZXNvdXJjZXMpO1xyXG4gICAgICB9XHJcbiAgICB9KS50aGVuKChfKSA9PiBfY2xpZW50KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBub2RlX21vZHVsZXMvdnNjb2RlLWxhbmd1YWdlc2VydmVyLXR5cGVzL2xpYi9lc20vbWFpbi5qc1xyXG52YXIgRG9jdW1lbnRVcmk7XHJcbihmdW5jdGlvbihEb2N1bWVudFVyaTIpIHtcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIjtcclxuICB9XHJcbiAgRG9jdW1lbnRVcmkyLmlzID0gaXM7XHJcbn0pKERvY3VtZW50VXJpIHx8IChEb2N1bWVudFVyaSA9IHt9KSk7XHJcbnZhciBVUkk7XHJcbihmdW5jdGlvbihVUkkyKSB7XHJcbiAgZnVuY3Rpb24gaXModmFsdWUpIHtcclxuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCI7XHJcbiAgfVxyXG4gIFVSSTIuaXMgPSBpcztcclxufSkoVVJJIHx8IChVUkkgPSB7fSkpO1xyXG52YXIgaW50ZWdlcjtcclxuKGZ1bmN0aW9uKGludGVnZXIyKSB7XHJcbiAgaW50ZWdlcjIuTUlOX1ZBTFVFID0gLTIxNDc0ODM2NDg7XHJcbiAgaW50ZWdlcjIuTUFYX1ZBTFVFID0gMjE0NzQ4MzY0NztcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJudW1iZXJcIiAmJiBpbnRlZ2VyMi5NSU5fVkFMVUUgPD0gdmFsdWUgJiYgdmFsdWUgPD0gaW50ZWdlcjIuTUFYX1ZBTFVFO1xyXG4gIH1cclxuICBpbnRlZ2VyMi5pcyA9IGlzO1xyXG59KShpbnRlZ2VyIHx8IChpbnRlZ2VyID0ge30pKTtcclxudmFyIHVpbnRlZ2VyO1xyXG4oZnVuY3Rpb24odWludGVnZXIyKSB7XHJcbiAgdWludGVnZXIyLk1JTl9WQUxVRSA9IDA7XHJcbiAgdWludGVnZXIyLk1BWF9WQUxVRSA9IDIxNDc0ODM2NDc7XHJcbiAgZnVuY3Rpb24gaXModmFsdWUpIHtcclxuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwibnVtYmVyXCIgJiYgdWludGVnZXIyLk1JTl9WQUxVRSA8PSB2YWx1ZSAmJiB2YWx1ZSA8PSB1aW50ZWdlcjIuTUFYX1ZBTFVFO1xyXG4gIH1cclxuICB1aW50ZWdlcjIuaXMgPSBpcztcclxufSkodWludGVnZXIgfHwgKHVpbnRlZ2VyID0ge30pKTtcclxudmFyIFBvc2l0aW9uO1xyXG4oZnVuY3Rpb24oUG9zaXRpb24zKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKGxpbmUsIGNoYXJhY3Rlcikge1xyXG4gICAgaWYgKGxpbmUgPT09IE51bWJlci5NQVhfVkFMVUUpIHtcclxuICAgICAgbGluZSA9IHVpbnRlZ2VyLk1BWF9WQUxVRTtcclxuICAgIH1cclxuICAgIGlmIChjaGFyYWN0ZXIgPT09IE51bWJlci5NQVhfVkFMVUUpIHtcclxuICAgICAgY2hhcmFjdGVyID0gdWludGVnZXIuTUFYX1ZBTFVFO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHsgbGluZSwgY2hhcmFjdGVyIH07XHJcbiAgfVxyXG4gIFBvc2l0aW9uMy5jcmVhdGUgPSBjcmVhdGU7XHJcbiAgZnVuY3Rpb24gaXModmFsdWUpIHtcclxuICAgIGxldCBjYW5kaWRhdGUgPSB2YWx1ZTtcclxuICAgIHJldHVybiBJcy5vYmplY3RMaXRlcmFsKGNhbmRpZGF0ZSkgJiYgSXMudWludGVnZXIoY2FuZGlkYXRlLmxpbmUpICYmIElzLnVpbnRlZ2VyKGNhbmRpZGF0ZS5jaGFyYWN0ZXIpO1xyXG4gIH1cclxuICBQb3NpdGlvbjMuaXMgPSBpcztcclxufSkoUG9zaXRpb24gfHwgKFBvc2l0aW9uID0ge30pKTtcclxudmFyIFJhbmdlO1xyXG4oZnVuY3Rpb24oUmFuZ2UzKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKG9uZSwgdHdvLCB0aHJlZSwgZm91cikge1xyXG4gICAgaWYgKElzLnVpbnRlZ2VyKG9uZSkgJiYgSXMudWludGVnZXIodHdvKSAmJiBJcy51aW50ZWdlcih0aHJlZSkgJiYgSXMudWludGVnZXIoZm91cikpIHtcclxuICAgICAgcmV0dXJuIHsgc3RhcnQ6IFBvc2l0aW9uLmNyZWF0ZShvbmUsIHR3byksIGVuZDogUG9zaXRpb24uY3JlYXRlKHRocmVlLCBmb3VyKSB9O1xyXG4gICAgfSBlbHNlIGlmIChQb3NpdGlvbi5pcyhvbmUpICYmIFBvc2l0aW9uLmlzKHR3bykpIHtcclxuICAgICAgcmV0dXJuIHsgc3RhcnQ6IG9uZSwgZW5kOiB0d28gfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgUmFuZ2UjY3JlYXRlIGNhbGxlZCB3aXRoIGludmFsaWQgYXJndW1lbnRzWyR7b25lfSwgJHt0d299LCAke3RocmVlfSwgJHtmb3VyfV1gKTtcclxuICAgIH1cclxuICB9XHJcbiAgUmFuZ2UzLmNyZWF0ZSA9IGNyZWF0ZTtcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgbGV0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLm9iamVjdExpdGVyYWwoY2FuZGlkYXRlKSAmJiBQb3NpdGlvbi5pcyhjYW5kaWRhdGUuc3RhcnQpICYmIFBvc2l0aW9uLmlzKGNhbmRpZGF0ZS5lbmQpO1xyXG4gIH1cclxuICBSYW5nZTMuaXMgPSBpcztcclxufSkoUmFuZ2UgfHwgKFJhbmdlID0ge30pKTtcclxudmFyIExvY2F0aW9uO1xyXG4oZnVuY3Rpb24oTG9jYXRpb24yKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKHVyaSwgcmFuZ2UpIHtcclxuICAgIHJldHVybiB7IHVyaSwgcmFuZ2UgfTtcclxuICB9XHJcbiAgTG9jYXRpb24yLmNyZWF0ZSA9IGNyZWF0ZTtcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgbGV0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLm9iamVjdExpdGVyYWwoY2FuZGlkYXRlKSAmJiBSYW5nZS5pcyhjYW5kaWRhdGUucmFuZ2UpICYmIChJcy5zdHJpbmcoY2FuZGlkYXRlLnVyaSkgfHwgSXMudW5kZWZpbmVkKGNhbmRpZGF0ZS51cmkpKTtcclxuICB9XHJcbiAgTG9jYXRpb24yLmlzID0gaXM7XHJcbn0pKExvY2F0aW9uIHx8IChMb2NhdGlvbiA9IHt9KSk7XHJcbnZhciBMb2NhdGlvbkxpbms7XHJcbihmdW5jdGlvbihMb2NhdGlvbkxpbmsyKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKHRhcmdldFVyaSwgdGFyZ2V0UmFuZ2UsIHRhcmdldFNlbGVjdGlvblJhbmdlLCBvcmlnaW5TZWxlY3Rpb25SYW5nZSkge1xyXG4gICAgcmV0dXJuIHsgdGFyZ2V0VXJpLCB0YXJnZXRSYW5nZSwgdGFyZ2V0U2VsZWN0aW9uUmFuZ2UsIG9yaWdpblNlbGVjdGlvblJhbmdlIH07XHJcbiAgfVxyXG4gIExvY2F0aW9uTGluazIuY3JlYXRlID0gY3JlYXRlO1xyXG4gIGZ1bmN0aW9uIGlzKHZhbHVlKSB7XHJcbiAgICBsZXQgY2FuZGlkYXRlID0gdmFsdWU7XHJcbiAgICByZXR1cm4gSXMub2JqZWN0TGl0ZXJhbChjYW5kaWRhdGUpICYmIFJhbmdlLmlzKGNhbmRpZGF0ZS50YXJnZXRSYW5nZSkgJiYgSXMuc3RyaW5nKGNhbmRpZGF0ZS50YXJnZXRVcmkpICYmIFJhbmdlLmlzKGNhbmRpZGF0ZS50YXJnZXRTZWxlY3Rpb25SYW5nZSkgJiYgKFJhbmdlLmlzKGNhbmRpZGF0ZS5vcmlnaW5TZWxlY3Rpb25SYW5nZSkgfHwgSXMudW5kZWZpbmVkKGNhbmRpZGF0ZS5vcmlnaW5TZWxlY3Rpb25SYW5nZSkpO1xyXG4gIH1cclxuICBMb2NhdGlvbkxpbmsyLmlzID0gaXM7XHJcbn0pKExvY2F0aW9uTGluayB8fCAoTG9jYXRpb25MaW5rID0ge30pKTtcclxudmFyIENvbG9yO1xyXG4oZnVuY3Rpb24oQ29sb3IyKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKHJlZCwgZ3JlZW4sIGJsdWUsIGFscGhhKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICByZWQsXHJcbiAgICAgIGdyZWVuLFxyXG4gICAgICBibHVlLFxyXG4gICAgICBhbHBoYVxyXG4gICAgfTtcclxuICB9XHJcbiAgQ29sb3IyLmNyZWF0ZSA9IGNyZWF0ZTtcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgY29uc3QgY2FuZGlkYXRlID0gdmFsdWU7XHJcbiAgICByZXR1cm4gSXMub2JqZWN0TGl0ZXJhbChjYW5kaWRhdGUpICYmIElzLm51bWJlclJhbmdlKGNhbmRpZGF0ZS5yZWQsIDAsIDEpICYmIElzLm51bWJlclJhbmdlKGNhbmRpZGF0ZS5ncmVlbiwgMCwgMSkgJiYgSXMubnVtYmVyUmFuZ2UoY2FuZGlkYXRlLmJsdWUsIDAsIDEpICYmIElzLm51bWJlclJhbmdlKGNhbmRpZGF0ZS5hbHBoYSwgMCwgMSk7XHJcbiAgfVxyXG4gIENvbG9yMi5pcyA9IGlzO1xyXG59KShDb2xvciB8fCAoQ29sb3IgPSB7fSkpO1xyXG52YXIgQ29sb3JJbmZvcm1hdGlvbjtcclxuKGZ1bmN0aW9uKENvbG9ySW5mb3JtYXRpb24yKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKHJhbmdlLCBjb2xvcikge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgcmFuZ2UsXHJcbiAgICAgIGNvbG9yXHJcbiAgICB9O1xyXG4gIH1cclxuICBDb2xvckluZm9ybWF0aW9uMi5jcmVhdGUgPSBjcmVhdGU7XHJcbiAgZnVuY3Rpb24gaXModmFsdWUpIHtcclxuICAgIGNvbnN0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLm9iamVjdExpdGVyYWwoY2FuZGlkYXRlKSAmJiBSYW5nZS5pcyhjYW5kaWRhdGUucmFuZ2UpICYmIENvbG9yLmlzKGNhbmRpZGF0ZS5jb2xvcik7XHJcbiAgfVxyXG4gIENvbG9ySW5mb3JtYXRpb24yLmlzID0gaXM7XHJcbn0pKENvbG9ySW5mb3JtYXRpb24gfHwgKENvbG9ySW5mb3JtYXRpb24gPSB7fSkpO1xyXG52YXIgQ29sb3JQcmVzZW50YXRpb247XHJcbihmdW5jdGlvbihDb2xvclByZXNlbnRhdGlvbjIpIHtcclxuICBmdW5jdGlvbiBjcmVhdGUobGFiZWwsIHRleHRFZGl0LCBhZGRpdGlvbmFsVGV4dEVkaXRzKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBsYWJlbCxcclxuICAgICAgdGV4dEVkaXQsXHJcbiAgICAgIGFkZGl0aW9uYWxUZXh0RWRpdHNcclxuICAgIH07XHJcbiAgfVxyXG4gIENvbG9yUHJlc2VudGF0aW9uMi5jcmVhdGUgPSBjcmVhdGU7XHJcbiAgZnVuY3Rpb24gaXModmFsdWUpIHtcclxuICAgIGNvbnN0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLm9iamVjdExpdGVyYWwoY2FuZGlkYXRlKSAmJiBJcy5zdHJpbmcoY2FuZGlkYXRlLmxhYmVsKSAmJiAoSXMudW5kZWZpbmVkKGNhbmRpZGF0ZS50ZXh0RWRpdCkgfHwgVGV4dEVkaXQuaXMoY2FuZGlkYXRlKSkgJiYgKElzLnVuZGVmaW5lZChjYW5kaWRhdGUuYWRkaXRpb25hbFRleHRFZGl0cykgfHwgSXMudHlwZWRBcnJheShjYW5kaWRhdGUuYWRkaXRpb25hbFRleHRFZGl0cywgVGV4dEVkaXQuaXMpKTtcclxuICB9XHJcbiAgQ29sb3JQcmVzZW50YXRpb24yLmlzID0gaXM7XHJcbn0pKENvbG9yUHJlc2VudGF0aW9uIHx8IChDb2xvclByZXNlbnRhdGlvbiA9IHt9KSk7XHJcbnZhciBGb2xkaW5nUmFuZ2VLaW5kO1xyXG4oZnVuY3Rpb24oRm9sZGluZ1JhbmdlS2luZDIpIHtcclxuICBGb2xkaW5nUmFuZ2VLaW5kMi5Db21tZW50ID0gXCJjb21tZW50XCI7XHJcbiAgRm9sZGluZ1JhbmdlS2luZDIuSW1wb3J0cyA9IFwiaW1wb3J0c1wiO1xyXG4gIEZvbGRpbmdSYW5nZUtpbmQyLlJlZ2lvbiA9IFwicmVnaW9uXCI7XHJcbn0pKEZvbGRpbmdSYW5nZUtpbmQgfHwgKEZvbGRpbmdSYW5nZUtpbmQgPSB7fSkpO1xyXG52YXIgRm9sZGluZ1JhbmdlO1xyXG4oZnVuY3Rpb24oRm9sZGluZ1JhbmdlMikge1xyXG4gIGZ1bmN0aW9uIGNyZWF0ZShzdGFydExpbmUsIGVuZExpbmUsIHN0YXJ0Q2hhcmFjdGVyLCBlbmRDaGFyYWN0ZXIsIGtpbmQsIGNvbGxhcHNlZFRleHQpIHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHtcclxuICAgICAgc3RhcnRMaW5lLFxyXG4gICAgICBlbmRMaW5lXHJcbiAgICB9O1xyXG4gICAgaWYgKElzLmRlZmluZWQoc3RhcnRDaGFyYWN0ZXIpKSB7XHJcbiAgICAgIHJlc3VsdC5zdGFydENoYXJhY3RlciA9IHN0YXJ0Q2hhcmFjdGVyO1xyXG4gICAgfVxyXG4gICAgaWYgKElzLmRlZmluZWQoZW5kQ2hhcmFjdGVyKSkge1xyXG4gICAgICByZXN1bHQuZW5kQ2hhcmFjdGVyID0gZW5kQ2hhcmFjdGVyO1xyXG4gICAgfVxyXG4gICAgaWYgKElzLmRlZmluZWQoa2luZCkpIHtcclxuICAgICAgcmVzdWx0LmtpbmQgPSBraW5kO1xyXG4gICAgfVxyXG4gICAgaWYgKElzLmRlZmluZWQoY29sbGFwc2VkVGV4dCkpIHtcclxuICAgICAgcmVzdWx0LmNvbGxhcHNlZFRleHQgPSBjb2xsYXBzZWRUZXh0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcbiAgRm9sZGluZ1JhbmdlMi5jcmVhdGUgPSBjcmVhdGU7XHJcbiAgZnVuY3Rpb24gaXModmFsdWUpIHtcclxuICAgIGNvbnN0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLm9iamVjdExpdGVyYWwoY2FuZGlkYXRlKSAmJiBJcy51aW50ZWdlcihjYW5kaWRhdGUuc3RhcnRMaW5lKSAmJiBJcy51aW50ZWdlcihjYW5kaWRhdGUuc3RhcnRMaW5lKSAmJiAoSXMudW5kZWZpbmVkKGNhbmRpZGF0ZS5zdGFydENoYXJhY3RlcikgfHwgSXMudWludGVnZXIoY2FuZGlkYXRlLnN0YXJ0Q2hhcmFjdGVyKSkgJiYgKElzLnVuZGVmaW5lZChjYW5kaWRhdGUuZW5kQ2hhcmFjdGVyKSB8fCBJcy51aW50ZWdlcihjYW5kaWRhdGUuZW5kQ2hhcmFjdGVyKSkgJiYgKElzLnVuZGVmaW5lZChjYW5kaWRhdGUua2luZCkgfHwgSXMuc3RyaW5nKGNhbmRpZGF0ZS5raW5kKSk7XHJcbiAgfVxyXG4gIEZvbGRpbmdSYW5nZTIuaXMgPSBpcztcclxufSkoRm9sZGluZ1JhbmdlIHx8IChGb2xkaW5nUmFuZ2UgPSB7fSkpO1xyXG52YXIgRGlhZ25vc3RpY1JlbGF0ZWRJbmZvcm1hdGlvbjtcclxuKGZ1bmN0aW9uKERpYWdub3N0aWNSZWxhdGVkSW5mb3JtYXRpb24yKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKGxvY2F0aW9uLCBtZXNzYWdlKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBsb2NhdGlvbixcclxuICAgICAgbWVzc2FnZVxyXG4gICAgfTtcclxuICB9XHJcbiAgRGlhZ25vc3RpY1JlbGF0ZWRJbmZvcm1hdGlvbjIuY3JlYXRlID0gY3JlYXRlO1xyXG4gIGZ1bmN0aW9uIGlzKHZhbHVlKSB7XHJcbiAgICBsZXQgY2FuZGlkYXRlID0gdmFsdWU7XHJcbiAgICByZXR1cm4gSXMuZGVmaW5lZChjYW5kaWRhdGUpICYmIExvY2F0aW9uLmlzKGNhbmRpZGF0ZS5sb2NhdGlvbikgJiYgSXMuc3RyaW5nKGNhbmRpZGF0ZS5tZXNzYWdlKTtcclxuICB9XHJcbiAgRGlhZ25vc3RpY1JlbGF0ZWRJbmZvcm1hdGlvbjIuaXMgPSBpcztcclxufSkoRGlhZ25vc3RpY1JlbGF0ZWRJbmZvcm1hdGlvbiB8fCAoRGlhZ25vc3RpY1JlbGF0ZWRJbmZvcm1hdGlvbiA9IHt9KSk7XHJcbnZhciBEaWFnbm9zdGljU2V2ZXJpdHk7XHJcbihmdW5jdGlvbihEaWFnbm9zdGljU2V2ZXJpdHkyKSB7XHJcbiAgRGlhZ25vc3RpY1NldmVyaXR5Mi5FcnJvciA9IDE7XHJcbiAgRGlhZ25vc3RpY1NldmVyaXR5Mi5XYXJuaW5nID0gMjtcclxuICBEaWFnbm9zdGljU2V2ZXJpdHkyLkluZm9ybWF0aW9uID0gMztcclxuICBEaWFnbm9zdGljU2V2ZXJpdHkyLkhpbnQgPSA0O1xyXG59KShEaWFnbm9zdGljU2V2ZXJpdHkgfHwgKERpYWdub3N0aWNTZXZlcml0eSA9IHt9KSk7XHJcbnZhciBEaWFnbm9zdGljVGFnO1xyXG4oZnVuY3Rpb24oRGlhZ25vc3RpY1RhZzIpIHtcclxuICBEaWFnbm9zdGljVGFnMi5Vbm5lY2Vzc2FyeSA9IDE7XHJcbiAgRGlhZ25vc3RpY1RhZzIuRGVwcmVjYXRlZCA9IDI7XHJcbn0pKERpYWdub3N0aWNUYWcgfHwgKERpYWdub3N0aWNUYWcgPSB7fSkpO1xyXG52YXIgQ29kZURlc2NyaXB0aW9uO1xyXG4oZnVuY3Rpb24oQ29kZURlc2NyaXB0aW9uMikge1xyXG4gIGZ1bmN0aW9uIGlzKHZhbHVlKSB7XHJcbiAgICBjb25zdCBjYW5kaWRhdGUgPSB2YWx1ZTtcclxuICAgIHJldHVybiBJcy5vYmplY3RMaXRlcmFsKGNhbmRpZGF0ZSkgJiYgSXMuc3RyaW5nKGNhbmRpZGF0ZS5ocmVmKTtcclxuICB9XHJcbiAgQ29kZURlc2NyaXB0aW9uMi5pcyA9IGlzO1xyXG59KShDb2RlRGVzY3JpcHRpb24gfHwgKENvZGVEZXNjcmlwdGlvbiA9IHt9KSk7XHJcbnZhciBEaWFnbm9zdGljO1xyXG4oZnVuY3Rpb24oRGlhZ25vc3RpYzIpIHtcclxuICBmdW5jdGlvbiBjcmVhdGUocmFuZ2UsIG1lc3NhZ2UsIHNldmVyaXR5LCBjb2RlLCBzb3VyY2UsIHJlbGF0ZWRJbmZvcm1hdGlvbikge1xyXG4gICAgbGV0IHJlc3VsdCA9IHsgcmFuZ2UsIG1lc3NhZ2UgfTtcclxuICAgIGlmIChJcy5kZWZpbmVkKHNldmVyaXR5KSkge1xyXG4gICAgICByZXN1bHQuc2V2ZXJpdHkgPSBzZXZlcml0eTtcclxuICAgIH1cclxuICAgIGlmIChJcy5kZWZpbmVkKGNvZGUpKSB7XHJcbiAgICAgIHJlc3VsdC5jb2RlID0gY29kZTtcclxuICAgIH1cclxuICAgIGlmIChJcy5kZWZpbmVkKHNvdXJjZSkpIHtcclxuICAgICAgcmVzdWx0LnNvdXJjZSA9IHNvdXJjZTtcclxuICAgIH1cclxuICAgIGlmIChJcy5kZWZpbmVkKHJlbGF0ZWRJbmZvcm1hdGlvbikpIHtcclxuICAgICAgcmVzdWx0LnJlbGF0ZWRJbmZvcm1hdGlvbiA9IHJlbGF0ZWRJbmZvcm1hdGlvbjtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG4gIERpYWdub3N0aWMyLmNyZWF0ZSA9IGNyZWF0ZTtcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgbGV0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLmRlZmluZWQoY2FuZGlkYXRlKSAmJiBSYW5nZS5pcyhjYW5kaWRhdGUucmFuZ2UpICYmIElzLnN0cmluZyhjYW5kaWRhdGUubWVzc2FnZSkgJiYgKElzLm51bWJlcihjYW5kaWRhdGUuc2V2ZXJpdHkpIHx8IElzLnVuZGVmaW5lZChjYW5kaWRhdGUuc2V2ZXJpdHkpKSAmJiAoSXMuaW50ZWdlcihjYW5kaWRhdGUuY29kZSkgfHwgSXMuc3RyaW5nKGNhbmRpZGF0ZS5jb2RlKSB8fCBJcy51bmRlZmluZWQoY2FuZGlkYXRlLmNvZGUpKSAmJiAoSXMudW5kZWZpbmVkKGNhbmRpZGF0ZS5jb2RlRGVzY3JpcHRpb24pIHx8IElzLnN0cmluZygoX2EgPSBjYW5kaWRhdGUuY29kZURlc2NyaXB0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaHJlZikpICYmIChJcy5zdHJpbmcoY2FuZGlkYXRlLnNvdXJjZSkgfHwgSXMudW5kZWZpbmVkKGNhbmRpZGF0ZS5zb3VyY2UpKSAmJiAoSXMudW5kZWZpbmVkKGNhbmRpZGF0ZS5yZWxhdGVkSW5mb3JtYXRpb24pIHx8IElzLnR5cGVkQXJyYXkoY2FuZGlkYXRlLnJlbGF0ZWRJbmZvcm1hdGlvbiwgRGlhZ25vc3RpY1JlbGF0ZWRJbmZvcm1hdGlvbi5pcykpO1xyXG4gIH1cclxuICBEaWFnbm9zdGljMi5pcyA9IGlzO1xyXG59KShEaWFnbm9zdGljIHx8IChEaWFnbm9zdGljID0ge30pKTtcclxudmFyIENvbW1hbmQ7XHJcbihmdW5jdGlvbihDb21tYW5kMikge1xyXG4gIGZ1bmN0aW9uIGNyZWF0ZSh0aXRsZSwgY29tbWFuZCwgLi4uYXJncykge1xyXG4gICAgbGV0IHJlc3VsdCA9IHsgdGl0bGUsIGNvbW1hbmQgfTtcclxuICAgIGlmIChJcy5kZWZpbmVkKGFyZ3MpICYmIGFyZ3MubGVuZ3RoID4gMCkge1xyXG4gICAgICByZXN1bHQuYXJndW1lbnRzID0gYXJncztcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG4gIENvbW1hbmQyLmNyZWF0ZSA9IGNyZWF0ZTtcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgbGV0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLmRlZmluZWQoY2FuZGlkYXRlKSAmJiBJcy5zdHJpbmcoY2FuZGlkYXRlLnRpdGxlKSAmJiBJcy5zdHJpbmcoY2FuZGlkYXRlLmNvbW1hbmQpO1xyXG4gIH1cclxuICBDb21tYW5kMi5pcyA9IGlzO1xyXG59KShDb21tYW5kIHx8IChDb21tYW5kID0ge30pKTtcclxudmFyIFRleHRFZGl0O1xyXG4oZnVuY3Rpb24oVGV4dEVkaXQyKSB7XHJcbiAgZnVuY3Rpb24gcmVwbGFjZShyYW5nZSwgbmV3VGV4dCkge1xyXG4gICAgcmV0dXJuIHsgcmFuZ2UsIG5ld1RleHQgfTtcclxuICB9XHJcbiAgVGV4dEVkaXQyLnJlcGxhY2UgPSByZXBsYWNlO1xyXG4gIGZ1bmN0aW9uIGluc2VydChwb3NpdGlvbiwgbmV3VGV4dCkge1xyXG4gICAgcmV0dXJuIHsgcmFuZ2U6IHsgc3RhcnQ6IHBvc2l0aW9uLCBlbmQ6IHBvc2l0aW9uIH0sIG5ld1RleHQgfTtcclxuICB9XHJcbiAgVGV4dEVkaXQyLmluc2VydCA9IGluc2VydDtcclxuICBmdW5jdGlvbiBkZWwocmFuZ2UpIHtcclxuICAgIHJldHVybiB7IHJhbmdlLCBuZXdUZXh0OiBcIlwiIH07XHJcbiAgfVxyXG4gIFRleHRFZGl0Mi5kZWwgPSBkZWw7XHJcbiAgZnVuY3Rpb24gaXModmFsdWUpIHtcclxuICAgIGNvbnN0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLm9iamVjdExpdGVyYWwoY2FuZGlkYXRlKSAmJiBJcy5zdHJpbmcoY2FuZGlkYXRlLm5ld1RleHQpICYmIFJhbmdlLmlzKGNhbmRpZGF0ZS5yYW5nZSk7XHJcbiAgfVxyXG4gIFRleHRFZGl0Mi5pcyA9IGlzO1xyXG59KShUZXh0RWRpdCB8fCAoVGV4dEVkaXQgPSB7fSkpO1xyXG52YXIgQ2hhbmdlQW5ub3RhdGlvbjtcclxuKGZ1bmN0aW9uKENoYW5nZUFubm90YXRpb24yKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKGxhYmVsLCBuZWVkc0NvbmZpcm1hdGlvbiwgZGVzY3JpcHRpb24pIHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHsgbGFiZWwgfTtcclxuICAgIGlmIChuZWVkc0NvbmZpcm1hdGlvbiAhPT0gdm9pZCAwKSB7XHJcbiAgICAgIHJlc3VsdC5uZWVkc0NvbmZpcm1hdGlvbiA9IG5lZWRzQ29uZmlybWF0aW9uO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlc2NyaXB0aW9uICE9PSB2b2lkIDApIHtcclxuICAgICAgcmVzdWx0LmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuICBDaGFuZ2VBbm5vdGF0aW9uMi5jcmVhdGUgPSBjcmVhdGU7XHJcbiAgZnVuY3Rpb24gaXModmFsdWUpIHtcclxuICAgIGNvbnN0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLm9iamVjdExpdGVyYWwoY2FuZGlkYXRlKSAmJiBJcy5zdHJpbmcoY2FuZGlkYXRlLmxhYmVsKSAmJiAoSXMuYm9vbGVhbihjYW5kaWRhdGUubmVlZHNDb25maXJtYXRpb24pIHx8IGNhbmRpZGF0ZS5uZWVkc0NvbmZpcm1hdGlvbiA9PT0gdm9pZCAwKSAmJiAoSXMuc3RyaW5nKGNhbmRpZGF0ZS5kZXNjcmlwdGlvbikgfHwgY2FuZGlkYXRlLmRlc2NyaXB0aW9uID09PSB2b2lkIDApO1xyXG4gIH1cclxuICBDaGFuZ2VBbm5vdGF0aW9uMi5pcyA9IGlzO1xyXG59KShDaGFuZ2VBbm5vdGF0aW9uIHx8IChDaGFuZ2VBbm5vdGF0aW9uID0ge30pKTtcclxudmFyIENoYW5nZUFubm90YXRpb25JZGVudGlmaWVyO1xyXG4oZnVuY3Rpb24oQ2hhbmdlQW5ub3RhdGlvbklkZW50aWZpZXIyKSB7XHJcbiAgZnVuY3Rpb24gaXModmFsdWUpIHtcclxuICAgIGNvbnN0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLnN0cmluZyhjYW5kaWRhdGUpO1xyXG4gIH1cclxuICBDaGFuZ2VBbm5vdGF0aW9uSWRlbnRpZmllcjIuaXMgPSBpcztcclxufSkoQ2hhbmdlQW5ub3RhdGlvbklkZW50aWZpZXIgfHwgKENoYW5nZUFubm90YXRpb25JZGVudGlmaWVyID0ge30pKTtcclxudmFyIEFubm90YXRlZFRleHRFZGl0O1xyXG4oZnVuY3Rpb24oQW5ub3RhdGVkVGV4dEVkaXQyKSB7XHJcbiAgZnVuY3Rpb24gcmVwbGFjZShyYW5nZSwgbmV3VGV4dCwgYW5ub3RhdGlvbikge1xyXG4gICAgcmV0dXJuIHsgcmFuZ2UsIG5ld1RleHQsIGFubm90YXRpb25JZDogYW5ub3RhdGlvbiB9O1xyXG4gIH1cclxuICBBbm5vdGF0ZWRUZXh0RWRpdDIucmVwbGFjZSA9IHJlcGxhY2U7XHJcbiAgZnVuY3Rpb24gaW5zZXJ0KHBvc2l0aW9uLCBuZXdUZXh0LCBhbm5vdGF0aW9uKSB7XHJcbiAgICByZXR1cm4geyByYW5nZTogeyBzdGFydDogcG9zaXRpb24sIGVuZDogcG9zaXRpb24gfSwgbmV3VGV4dCwgYW5ub3RhdGlvbklkOiBhbm5vdGF0aW9uIH07XHJcbiAgfVxyXG4gIEFubm90YXRlZFRleHRFZGl0Mi5pbnNlcnQgPSBpbnNlcnQ7XHJcbiAgZnVuY3Rpb24gZGVsKHJhbmdlLCBhbm5vdGF0aW9uKSB7XHJcbiAgICByZXR1cm4geyByYW5nZSwgbmV3VGV4dDogXCJcIiwgYW5ub3RhdGlvbklkOiBhbm5vdGF0aW9uIH07XHJcbiAgfVxyXG4gIEFubm90YXRlZFRleHRFZGl0Mi5kZWwgPSBkZWw7XHJcbiAgZnVuY3Rpb24gaXModmFsdWUpIHtcclxuICAgIGNvbnN0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIFRleHRFZGl0LmlzKGNhbmRpZGF0ZSkgJiYgKENoYW5nZUFubm90YXRpb24uaXMoY2FuZGlkYXRlLmFubm90YXRpb25JZCkgfHwgQ2hhbmdlQW5ub3RhdGlvbklkZW50aWZpZXIuaXMoY2FuZGlkYXRlLmFubm90YXRpb25JZCkpO1xyXG4gIH1cclxuICBBbm5vdGF0ZWRUZXh0RWRpdDIuaXMgPSBpcztcclxufSkoQW5ub3RhdGVkVGV4dEVkaXQgfHwgKEFubm90YXRlZFRleHRFZGl0ID0ge30pKTtcclxudmFyIFRleHREb2N1bWVudEVkaXQ7XHJcbihmdW5jdGlvbihUZXh0RG9jdW1lbnRFZGl0Mikge1xyXG4gIGZ1bmN0aW9uIGNyZWF0ZSh0ZXh0RG9jdW1lbnQsIGVkaXRzKSB7XHJcbiAgICByZXR1cm4geyB0ZXh0RG9jdW1lbnQsIGVkaXRzIH07XHJcbiAgfVxyXG4gIFRleHREb2N1bWVudEVkaXQyLmNyZWF0ZSA9IGNyZWF0ZTtcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgbGV0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLmRlZmluZWQoY2FuZGlkYXRlKSAmJiBPcHRpb25hbFZlcnNpb25lZFRleHREb2N1bWVudElkZW50aWZpZXIuaXMoY2FuZGlkYXRlLnRleHREb2N1bWVudCkgJiYgQXJyYXkuaXNBcnJheShjYW5kaWRhdGUuZWRpdHMpO1xyXG4gIH1cclxuICBUZXh0RG9jdW1lbnRFZGl0Mi5pcyA9IGlzO1xyXG59KShUZXh0RG9jdW1lbnRFZGl0IHx8IChUZXh0RG9jdW1lbnRFZGl0ID0ge30pKTtcclxudmFyIENyZWF0ZUZpbGU7XHJcbihmdW5jdGlvbihDcmVhdGVGaWxlMikge1xyXG4gIGZ1bmN0aW9uIGNyZWF0ZSh1cmksIG9wdGlvbnMsIGFubm90YXRpb24pIHtcclxuICAgIGxldCByZXN1bHQgPSB7XHJcbiAgICAgIGtpbmQ6IFwiY3JlYXRlXCIsXHJcbiAgICAgIHVyaVxyXG4gICAgfTtcclxuICAgIGlmIChvcHRpb25zICE9PSB2b2lkIDAgJiYgKG9wdGlvbnMub3ZlcndyaXRlICE9PSB2b2lkIDAgfHwgb3B0aW9ucy5pZ25vcmVJZkV4aXN0cyAhPT0gdm9pZCAwKSkge1xyXG4gICAgICByZXN1bHQub3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICB9XHJcbiAgICBpZiAoYW5ub3RhdGlvbiAhPT0gdm9pZCAwKSB7XHJcbiAgICAgIHJlc3VsdC5hbm5vdGF0aW9uSWQgPSBhbm5vdGF0aW9uO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcbiAgQ3JlYXRlRmlsZTIuY3JlYXRlID0gY3JlYXRlO1xyXG4gIGZ1bmN0aW9uIGlzKHZhbHVlKSB7XHJcbiAgICBsZXQgY2FuZGlkYXRlID0gdmFsdWU7XHJcbiAgICByZXR1cm4gY2FuZGlkYXRlICYmIGNhbmRpZGF0ZS5raW5kID09PSBcImNyZWF0ZVwiICYmIElzLnN0cmluZyhjYW5kaWRhdGUudXJpKSAmJiAoY2FuZGlkYXRlLm9wdGlvbnMgPT09IHZvaWQgMCB8fCAoY2FuZGlkYXRlLm9wdGlvbnMub3ZlcndyaXRlID09PSB2b2lkIDAgfHwgSXMuYm9vbGVhbihjYW5kaWRhdGUub3B0aW9ucy5vdmVyd3JpdGUpKSAmJiAoY2FuZGlkYXRlLm9wdGlvbnMuaWdub3JlSWZFeGlzdHMgPT09IHZvaWQgMCB8fCBJcy5ib29sZWFuKGNhbmRpZGF0ZS5vcHRpb25zLmlnbm9yZUlmRXhpc3RzKSkpICYmIChjYW5kaWRhdGUuYW5ub3RhdGlvbklkID09PSB2b2lkIDAgfHwgQ2hhbmdlQW5ub3RhdGlvbklkZW50aWZpZXIuaXMoY2FuZGlkYXRlLmFubm90YXRpb25JZCkpO1xyXG4gIH1cclxuICBDcmVhdGVGaWxlMi5pcyA9IGlzO1xyXG59KShDcmVhdGVGaWxlIHx8IChDcmVhdGVGaWxlID0ge30pKTtcclxudmFyIFJlbmFtZUZpbGU7XHJcbihmdW5jdGlvbihSZW5hbWVGaWxlMikge1xyXG4gIGZ1bmN0aW9uIGNyZWF0ZShvbGRVcmksIG5ld1VyaSwgb3B0aW9ucywgYW5ub3RhdGlvbikge1xyXG4gICAgbGV0IHJlc3VsdCA9IHtcclxuICAgICAga2luZDogXCJyZW5hbWVcIixcclxuICAgICAgb2xkVXJpLFxyXG4gICAgICBuZXdVcmlcclxuICAgIH07XHJcbiAgICBpZiAob3B0aW9ucyAhPT0gdm9pZCAwICYmIChvcHRpb25zLm92ZXJ3cml0ZSAhPT0gdm9pZCAwIHx8IG9wdGlvbnMuaWdub3JlSWZFeGlzdHMgIT09IHZvaWQgMCkpIHtcclxuICAgICAgcmVzdWx0Lm9wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgfVxyXG4gICAgaWYgKGFubm90YXRpb24gIT09IHZvaWQgMCkge1xyXG4gICAgICByZXN1bHQuYW5ub3RhdGlvbklkID0gYW5ub3RhdGlvbjtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG4gIFJlbmFtZUZpbGUyLmNyZWF0ZSA9IGNyZWF0ZTtcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgbGV0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIGNhbmRpZGF0ZSAmJiBjYW5kaWRhdGUua2luZCA9PT0gXCJyZW5hbWVcIiAmJiBJcy5zdHJpbmcoY2FuZGlkYXRlLm9sZFVyaSkgJiYgSXMuc3RyaW5nKGNhbmRpZGF0ZS5uZXdVcmkpICYmIChjYW5kaWRhdGUub3B0aW9ucyA9PT0gdm9pZCAwIHx8IChjYW5kaWRhdGUub3B0aW9ucy5vdmVyd3JpdGUgPT09IHZvaWQgMCB8fCBJcy5ib29sZWFuKGNhbmRpZGF0ZS5vcHRpb25zLm92ZXJ3cml0ZSkpICYmIChjYW5kaWRhdGUub3B0aW9ucy5pZ25vcmVJZkV4aXN0cyA9PT0gdm9pZCAwIHx8IElzLmJvb2xlYW4oY2FuZGlkYXRlLm9wdGlvbnMuaWdub3JlSWZFeGlzdHMpKSkgJiYgKGNhbmRpZGF0ZS5hbm5vdGF0aW9uSWQgPT09IHZvaWQgMCB8fCBDaGFuZ2VBbm5vdGF0aW9uSWRlbnRpZmllci5pcyhjYW5kaWRhdGUuYW5ub3RhdGlvbklkKSk7XHJcbiAgfVxyXG4gIFJlbmFtZUZpbGUyLmlzID0gaXM7XHJcbn0pKFJlbmFtZUZpbGUgfHwgKFJlbmFtZUZpbGUgPSB7fSkpO1xyXG52YXIgRGVsZXRlRmlsZTtcclxuKGZ1bmN0aW9uKERlbGV0ZUZpbGUyKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKHVyaSwgb3B0aW9ucywgYW5ub3RhdGlvbikge1xyXG4gICAgbGV0IHJlc3VsdCA9IHtcclxuICAgICAga2luZDogXCJkZWxldGVcIixcclxuICAgICAgdXJpXHJcbiAgICB9O1xyXG4gICAgaWYgKG9wdGlvbnMgIT09IHZvaWQgMCAmJiAob3B0aW9ucy5yZWN1cnNpdmUgIT09IHZvaWQgMCB8fCBvcHRpb25zLmlnbm9yZUlmTm90RXhpc3RzICE9PSB2b2lkIDApKSB7XHJcbiAgICAgIHJlc3VsdC5vcHRpb25zID0gb3B0aW9ucztcclxuICAgIH1cclxuICAgIGlmIChhbm5vdGF0aW9uICE9PSB2b2lkIDApIHtcclxuICAgICAgcmVzdWx0LmFubm90YXRpb25JZCA9IGFubm90YXRpb247XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuICBEZWxldGVGaWxlMi5jcmVhdGUgPSBjcmVhdGU7XHJcbiAgZnVuY3Rpb24gaXModmFsdWUpIHtcclxuICAgIGxldCBjYW5kaWRhdGUgPSB2YWx1ZTtcclxuICAgIHJldHVybiBjYW5kaWRhdGUgJiYgY2FuZGlkYXRlLmtpbmQgPT09IFwiZGVsZXRlXCIgJiYgSXMuc3RyaW5nKGNhbmRpZGF0ZS51cmkpICYmIChjYW5kaWRhdGUub3B0aW9ucyA9PT0gdm9pZCAwIHx8IChjYW5kaWRhdGUub3B0aW9ucy5yZWN1cnNpdmUgPT09IHZvaWQgMCB8fCBJcy5ib29sZWFuKGNhbmRpZGF0ZS5vcHRpb25zLnJlY3Vyc2l2ZSkpICYmIChjYW5kaWRhdGUub3B0aW9ucy5pZ25vcmVJZk5vdEV4aXN0cyA9PT0gdm9pZCAwIHx8IElzLmJvb2xlYW4oY2FuZGlkYXRlLm9wdGlvbnMuaWdub3JlSWZOb3RFeGlzdHMpKSkgJiYgKGNhbmRpZGF0ZS5hbm5vdGF0aW9uSWQgPT09IHZvaWQgMCB8fCBDaGFuZ2VBbm5vdGF0aW9uSWRlbnRpZmllci5pcyhjYW5kaWRhdGUuYW5ub3RhdGlvbklkKSk7XHJcbiAgfVxyXG4gIERlbGV0ZUZpbGUyLmlzID0gaXM7XHJcbn0pKERlbGV0ZUZpbGUgfHwgKERlbGV0ZUZpbGUgPSB7fSkpO1xyXG52YXIgV29ya3NwYWNlRWRpdDtcclxuKGZ1bmN0aW9uKFdvcmtzcGFjZUVkaXQyKSB7XHJcbiAgZnVuY3Rpb24gaXModmFsdWUpIHtcclxuICAgIGxldCBjYW5kaWRhdGUgPSB2YWx1ZTtcclxuICAgIHJldHVybiBjYW5kaWRhdGUgJiYgKGNhbmRpZGF0ZS5jaGFuZ2VzICE9PSB2b2lkIDAgfHwgY2FuZGlkYXRlLmRvY3VtZW50Q2hhbmdlcyAhPT0gdm9pZCAwKSAmJiAoY2FuZGlkYXRlLmRvY3VtZW50Q2hhbmdlcyA9PT0gdm9pZCAwIHx8IGNhbmRpZGF0ZS5kb2N1bWVudENoYW5nZXMuZXZlcnkoKGNoYW5nZSkgPT4ge1xyXG4gICAgICBpZiAoSXMuc3RyaW5nKGNoYW5nZS5raW5kKSkge1xyXG4gICAgICAgIHJldHVybiBDcmVhdGVGaWxlLmlzKGNoYW5nZSkgfHwgUmVuYW1lRmlsZS5pcyhjaGFuZ2UpIHx8IERlbGV0ZUZpbGUuaXMoY2hhbmdlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gVGV4dERvY3VtZW50RWRpdC5pcyhjaGFuZ2UpO1xyXG4gICAgICB9XHJcbiAgICB9KSk7XHJcbiAgfVxyXG4gIFdvcmtzcGFjZUVkaXQyLmlzID0gaXM7XHJcbn0pKFdvcmtzcGFjZUVkaXQgfHwgKFdvcmtzcGFjZUVkaXQgPSB7fSkpO1xyXG52YXIgVGV4dERvY3VtZW50SWRlbnRpZmllcjtcclxuKGZ1bmN0aW9uKFRleHREb2N1bWVudElkZW50aWZpZXIyKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKHVyaSkge1xyXG4gICAgcmV0dXJuIHsgdXJpIH07XHJcbiAgfVxyXG4gIFRleHREb2N1bWVudElkZW50aWZpZXIyLmNyZWF0ZSA9IGNyZWF0ZTtcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgbGV0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLmRlZmluZWQoY2FuZGlkYXRlKSAmJiBJcy5zdHJpbmcoY2FuZGlkYXRlLnVyaSk7XHJcbiAgfVxyXG4gIFRleHREb2N1bWVudElkZW50aWZpZXIyLmlzID0gaXM7XHJcbn0pKFRleHREb2N1bWVudElkZW50aWZpZXIgfHwgKFRleHREb2N1bWVudElkZW50aWZpZXIgPSB7fSkpO1xyXG52YXIgVmVyc2lvbmVkVGV4dERvY3VtZW50SWRlbnRpZmllcjtcclxuKGZ1bmN0aW9uKFZlcnNpb25lZFRleHREb2N1bWVudElkZW50aWZpZXIyKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKHVyaSwgdmVyc2lvbikge1xyXG4gICAgcmV0dXJuIHsgdXJpLCB2ZXJzaW9uIH07XHJcbiAgfVxyXG4gIFZlcnNpb25lZFRleHREb2N1bWVudElkZW50aWZpZXIyLmNyZWF0ZSA9IGNyZWF0ZTtcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgbGV0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLmRlZmluZWQoY2FuZGlkYXRlKSAmJiBJcy5zdHJpbmcoY2FuZGlkYXRlLnVyaSkgJiYgSXMuaW50ZWdlcihjYW5kaWRhdGUudmVyc2lvbik7XHJcbiAgfVxyXG4gIFZlcnNpb25lZFRleHREb2N1bWVudElkZW50aWZpZXIyLmlzID0gaXM7XHJcbn0pKFZlcnNpb25lZFRleHREb2N1bWVudElkZW50aWZpZXIgfHwgKFZlcnNpb25lZFRleHREb2N1bWVudElkZW50aWZpZXIgPSB7fSkpO1xyXG52YXIgT3B0aW9uYWxWZXJzaW9uZWRUZXh0RG9jdW1lbnRJZGVudGlmaWVyO1xyXG4oZnVuY3Rpb24oT3B0aW9uYWxWZXJzaW9uZWRUZXh0RG9jdW1lbnRJZGVudGlmaWVyMikge1xyXG4gIGZ1bmN0aW9uIGNyZWF0ZSh1cmksIHZlcnNpb24pIHtcclxuICAgIHJldHVybiB7IHVyaSwgdmVyc2lvbiB9O1xyXG4gIH1cclxuICBPcHRpb25hbFZlcnNpb25lZFRleHREb2N1bWVudElkZW50aWZpZXIyLmNyZWF0ZSA9IGNyZWF0ZTtcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgbGV0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLmRlZmluZWQoY2FuZGlkYXRlKSAmJiBJcy5zdHJpbmcoY2FuZGlkYXRlLnVyaSkgJiYgKGNhbmRpZGF0ZS52ZXJzaW9uID09PSBudWxsIHx8IElzLmludGVnZXIoY2FuZGlkYXRlLnZlcnNpb24pKTtcclxuICB9XHJcbiAgT3B0aW9uYWxWZXJzaW9uZWRUZXh0RG9jdW1lbnRJZGVudGlmaWVyMi5pcyA9IGlzO1xyXG59KShPcHRpb25hbFZlcnNpb25lZFRleHREb2N1bWVudElkZW50aWZpZXIgfHwgKE9wdGlvbmFsVmVyc2lvbmVkVGV4dERvY3VtZW50SWRlbnRpZmllciA9IHt9KSk7XHJcbnZhciBUZXh0RG9jdW1lbnRJdGVtO1xyXG4oZnVuY3Rpb24oVGV4dERvY3VtZW50SXRlbTIpIHtcclxuICBmdW5jdGlvbiBjcmVhdGUodXJpLCBsYW5ndWFnZUlkLCB2ZXJzaW9uLCB0ZXh0KSB7XHJcbiAgICByZXR1cm4geyB1cmksIGxhbmd1YWdlSWQsIHZlcnNpb24sIHRleHQgfTtcclxuICB9XHJcbiAgVGV4dERvY3VtZW50SXRlbTIuY3JlYXRlID0gY3JlYXRlO1xyXG4gIGZ1bmN0aW9uIGlzKHZhbHVlKSB7XHJcbiAgICBsZXQgY2FuZGlkYXRlID0gdmFsdWU7XHJcbiAgICByZXR1cm4gSXMuZGVmaW5lZChjYW5kaWRhdGUpICYmIElzLnN0cmluZyhjYW5kaWRhdGUudXJpKSAmJiBJcy5zdHJpbmcoY2FuZGlkYXRlLmxhbmd1YWdlSWQpICYmIElzLmludGVnZXIoY2FuZGlkYXRlLnZlcnNpb24pICYmIElzLnN0cmluZyhjYW5kaWRhdGUudGV4dCk7XHJcbiAgfVxyXG4gIFRleHREb2N1bWVudEl0ZW0yLmlzID0gaXM7XHJcbn0pKFRleHREb2N1bWVudEl0ZW0gfHwgKFRleHREb2N1bWVudEl0ZW0gPSB7fSkpO1xyXG52YXIgTWFya3VwS2luZDtcclxuKGZ1bmN0aW9uKE1hcmt1cEtpbmQyKSB7XHJcbiAgTWFya3VwS2luZDIuUGxhaW5UZXh0ID0gXCJwbGFpbnRleHRcIjtcclxuICBNYXJrdXBLaW5kMi5NYXJrZG93biA9IFwibWFya2Rvd25cIjtcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgY29uc3QgY2FuZGlkYXRlID0gdmFsdWU7XHJcbiAgICByZXR1cm4gY2FuZGlkYXRlID09PSBNYXJrdXBLaW5kMi5QbGFpblRleHQgfHwgY2FuZGlkYXRlID09PSBNYXJrdXBLaW5kMi5NYXJrZG93bjtcclxuICB9XHJcbiAgTWFya3VwS2luZDIuaXMgPSBpcztcclxufSkoTWFya3VwS2luZCB8fCAoTWFya3VwS2luZCA9IHt9KSk7XHJcbnZhciBNYXJrdXBDb250ZW50O1xyXG4oZnVuY3Rpb24oTWFya3VwQ29udGVudDIpIHtcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgY29uc3QgY2FuZGlkYXRlID0gdmFsdWU7XHJcbiAgICByZXR1cm4gSXMub2JqZWN0TGl0ZXJhbCh2YWx1ZSkgJiYgTWFya3VwS2luZC5pcyhjYW5kaWRhdGUua2luZCkgJiYgSXMuc3RyaW5nKGNhbmRpZGF0ZS52YWx1ZSk7XHJcbiAgfVxyXG4gIE1hcmt1cENvbnRlbnQyLmlzID0gaXM7XHJcbn0pKE1hcmt1cENvbnRlbnQgfHwgKE1hcmt1cENvbnRlbnQgPSB7fSkpO1xyXG52YXIgQ29tcGxldGlvbkl0ZW1LaW5kO1xyXG4oZnVuY3Rpb24oQ29tcGxldGlvbkl0ZW1LaW5kMikge1xyXG4gIENvbXBsZXRpb25JdGVtS2luZDIuVGV4dCA9IDE7XHJcbiAgQ29tcGxldGlvbkl0ZW1LaW5kMi5NZXRob2QgPSAyO1xyXG4gIENvbXBsZXRpb25JdGVtS2luZDIuRnVuY3Rpb24gPSAzO1xyXG4gIENvbXBsZXRpb25JdGVtS2luZDIuQ29uc3RydWN0b3IgPSA0O1xyXG4gIENvbXBsZXRpb25JdGVtS2luZDIuRmllbGQgPSA1O1xyXG4gIENvbXBsZXRpb25JdGVtS2luZDIuVmFyaWFibGUgPSA2O1xyXG4gIENvbXBsZXRpb25JdGVtS2luZDIuQ2xhc3MgPSA3O1xyXG4gIENvbXBsZXRpb25JdGVtS2luZDIuSW50ZXJmYWNlID0gODtcclxuICBDb21wbGV0aW9uSXRlbUtpbmQyLk1vZHVsZSA9IDk7XHJcbiAgQ29tcGxldGlvbkl0ZW1LaW5kMi5Qcm9wZXJ0eSA9IDEwO1xyXG4gIENvbXBsZXRpb25JdGVtS2luZDIuVW5pdCA9IDExO1xyXG4gIENvbXBsZXRpb25JdGVtS2luZDIuVmFsdWUgPSAxMjtcclxuICBDb21wbGV0aW9uSXRlbUtpbmQyLkVudW0gPSAxMztcclxuICBDb21wbGV0aW9uSXRlbUtpbmQyLktleXdvcmQgPSAxNDtcclxuICBDb21wbGV0aW9uSXRlbUtpbmQyLlNuaXBwZXQgPSAxNTtcclxuICBDb21wbGV0aW9uSXRlbUtpbmQyLkNvbG9yID0gMTY7XHJcbiAgQ29tcGxldGlvbkl0ZW1LaW5kMi5GaWxlID0gMTc7XHJcbiAgQ29tcGxldGlvbkl0ZW1LaW5kMi5SZWZlcmVuY2UgPSAxODtcclxuICBDb21wbGV0aW9uSXRlbUtpbmQyLkZvbGRlciA9IDE5O1xyXG4gIENvbXBsZXRpb25JdGVtS2luZDIuRW51bU1lbWJlciA9IDIwO1xyXG4gIENvbXBsZXRpb25JdGVtS2luZDIuQ29uc3RhbnQgPSAyMTtcclxuICBDb21wbGV0aW9uSXRlbUtpbmQyLlN0cnVjdCA9IDIyO1xyXG4gIENvbXBsZXRpb25JdGVtS2luZDIuRXZlbnQgPSAyMztcclxuICBDb21wbGV0aW9uSXRlbUtpbmQyLk9wZXJhdG9yID0gMjQ7XHJcbiAgQ29tcGxldGlvbkl0ZW1LaW5kMi5UeXBlUGFyYW1ldGVyID0gMjU7XHJcbn0pKENvbXBsZXRpb25JdGVtS2luZCB8fCAoQ29tcGxldGlvbkl0ZW1LaW5kID0ge30pKTtcclxudmFyIEluc2VydFRleHRGb3JtYXQ7XHJcbihmdW5jdGlvbihJbnNlcnRUZXh0Rm9ybWF0Mikge1xyXG4gIEluc2VydFRleHRGb3JtYXQyLlBsYWluVGV4dCA9IDE7XHJcbiAgSW5zZXJ0VGV4dEZvcm1hdDIuU25pcHBldCA9IDI7XHJcbn0pKEluc2VydFRleHRGb3JtYXQgfHwgKEluc2VydFRleHRGb3JtYXQgPSB7fSkpO1xyXG52YXIgQ29tcGxldGlvbkl0ZW1UYWc7XHJcbihmdW5jdGlvbihDb21wbGV0aW9uSXRlbVRhZzIpIHtcclxuICBDb21wbGV0aW9uSXRlbVRhZzIuRGVwcmVjYXRlZCA9IDE7XHJcbn0pKENvbXBsZXRpb25JdGVtVGFnIHx8IChDb21wbGV0aW9uSXRlbVRhZyA9IHt9KSk7XHJcbnZhciBJbnNlcnRSZXBsYWNlRWRpdDtcclxuKGZ1bmN0aW9uKEluc2VydFJlcGxhY2VFZGl0Mikge1xyXG4gIGZ1bmN0aW9uIGNyZWF0ZShuZXdUZXh0LCBpbnNlcnQsIHJlcGxhY2UpIHtcclxuICAgIHJldHVybiB7IG5ld1RleHQsIGluc2VydCwgcmVwbGFjZSB9O1xyXG4gIH1cclxuICBJbnNlcnRSZXBsYWNlRWRpdDIuY3JlYXRlID0gY3JlYXRlO1xyXG4gIGZ1bmN0aW9uIGlzKHZhbHVlKSB7XHJcbiAgICBjb25zdCBjYW5kaWRhdGUgPSB2YWx1ZTtcclxuICAgIHJldHVybiBjYW5kaWRhdGUgJiYgSXMuc3RyaW5nKGNhbmRpZGF0ZS5uZXdUZXh0KSAmJiBSYW5nZS5pcyhjYW5kaWRhdGUuaW5zZXJ0KSAmJiBSYW5nZS5pcyhjYW5kaWRhdGUucmVwbGFjZSk7XHJcbiAgfVxyXG4gIEluc2VydFJlcGxhY2VFZGl0Mi5pcyA9IGlzO1xyXG59KShJbnNlcnRSZXBsYWNlRWRpdCB8fCAoSW5zZXJ0UmVwbGFjZUVkaXQgPSB7fSkpO1xyXG52YXIgSW5zZXJ0VGV4dE1vZGU7XHJcbihmdW5jdGlvbihJbnNlcnRUZXh0TW9kZTIpIHtcclxuICBJbnNlcnRUZXh0TW9kZTIuYXNJcyA9IDE7XHJcbiAgSW5zZXJ0VGV4dE1vZGUyLmFkanVzdEluZGVudGF0aW9uID0gMjtcclxufSkoSW5zZXJ0VGV4dE1vZGUgfHwgKEluc2VydFRleHRNb2RlID0ge30pKTtcclxudmFyIENvbXBsZXRpb25JdGVtTGFiZWxEZXRhaWxzO1xyXG4oZnVuY3Rpb24oQ29tcGxldGlvbkl0ZW1MYWJlbERldGFpbHMyKSB7XHJcbiAgZnVuY3Rpb24gaXModmFsdWUpIHtcclxuICAgIGNvbnN0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIGNhbmRpZGF0ZSAmJiAoSXMuc3RyaW5nKGNhbmRpZGF0ZS5kZXRhaWwpIHx8IGNhbmRpZGF0ZS5kZXRhaWwgPT09IHZvaWQgMCkgJiYgKElzLnN0cmluZyhjYW5kaWRhdGUuZGVzY3JpcHRpb24pIHx8IGNhbmRpZGF0ZS5kZXNjcmlwdGlvbiA9PT0gdm9pZCAwKTtcclxuICB9XHJcbiAgQ29tcGxldGlvbkl0ZW1MYWJlbERldGFpbHMyLmlzID0gaXM7XHJcbn0pKENvbXBsZXRpb25JdGVtTGFiZWxEZXRhaWxzIHx8IChDb21wbGV0aW9uSXRlbUxhYmVsRGV0YWlscyA9IHt9KSk7XHJcbnZhciBDb21wbGV0aW9uSXRlbTtcclxuKGZ1bmN0aW9uKENvbXBsZXRpb25JdGVtMikge1xyXG4gIGZ1bmN0aW9uIGNyZWF0ZShsYWJlbCkge1xyXG4gICAgcmV0dXJuIHsgbGFiZWwgfTtcclxuICB9XHJcbiAgQ29tcGxldGlvbkl0ZW0yLmNyZWF0ZSA9IGNyZWF0ZTtcclxufSkoQ29tcGxldGlvbkl0ZW0gfHwgKENvbXBsZXRpb25JdGVtID0ge30pKTtcclxudmFyIENvbXBsZXRpb25MaXN0O1xyXG4oZnVuY3Rpb24oQ29tcGxldGlvbkxpc3QyKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKGl0ZW1zLCBpc0luY29tcGxldGUpIHtcclxuICAgIHJldHVybiB7IGl0ZW1zOiBpdGVtcyA/IGl0ZW1zIDogW10sIGlzSW5jb21wbGV0ZTogISFpc0luY29tcGxldGUgfTtcclxuICB9XHJcbiAgQ29tcGxldGlvbkxpc3QyLmNyZWF0ZSA9IGNyZWF0ZTtcclxufSkoQ29tcGxldGlvbkxpc3QgfHwgKENvbXBsZXRpb25MaXN0ID0ge30pKTtcclxudmFyIE1hcmtlZFN0cmluZztcclxuKGZ1bmN0aW9uKE1hcmtlZFN0cmluZzIpIHtcclxuICBmdW5jdGlvbiBmcm9tUGxhaW5UZXh0KHBsYWluVGV4dCkge1xyXG4gICAgcmV0dXJuIHBsYWluVGV4dC5yZXBsYWNlKC9bXFxcXGAqX3t9W1xcXSgpIytcXC0uIV0vZywgXCJcXFxcJCZcIik7XHJcbiAgfVxyXG4gIE1hcmtlZFN0cmluZzIuZnJvbVBsYWluVGV4dCA9IGZyb21QbGFpblRleHQ7XHJcbiAgZnVuY3Rpb24gaXModmFsdWUpIHtcclxuICAgIGNvbnN0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLnN0cmluZyhjYW5kaWRhdGUpIHx8IElzLm9iamVjdExpdGVyYWwoY2FuZGlkYXRlKSAmJiBJcy5zdHJpbmcoY2FuZGlkYXRlLmxhbmd1YWdlKSAmJiBJcy5zdHJpbmcoY2FuZGlkYXRlLnZhbHVlKTtcclxuICB9XHJcbiAgTWFya2VkU3RyaW5nMi5pcyA9IGlzO1xyXG59KShNYXJrZWRTdHJpbmcgfHwgKE1hcmtlZFN0cmluZyA9IHt9KSk7XHJcbnZhciBIb3ZlcjtcclxuKGZ1bmN0aW9uKEhvdmVyMikge1xyXG4gIGZ1bmN0aW9uIGlzKHZhbHVlKSB7XHJcbiAgICBsZXQgY2FuZGlkYXRlID0gdmFsdWU7XHJcbiAgICByZXR1cm4gISFjYW5kaWRhdGUgJiYgSXMub2JqZWN0TGl0ZXJhbChjYW5kaWRhdGUpICYmIChNYXJrdXBDb250ZW50LmlzKGNhbmRpZGF0ZS5jb250ZW50cykgfHwgTWFya2VkU3RyaW5nLmlzKGNhbmRpZGF0ZS5jb250ZW50cykgfHwgSXMudHlwZWRBcnJheShjYW5kaWRhdGUuY29udGVudHMsIE1hcmtlZFN0cmluZy5pcykpICYmICh2YWx1ZS5yYW5nZSA9PT0gdm9pZCAwIHx8IFJhbmdlLmlzKHZhbHVlLnJhbmdlKSk7XHJcbiAgfVxyXG4gIEhvdmVyMi5pcyA9IGlzO1xyXG59KShIb3ZlciB8fCAoSG92ZXIgPSB7fSkpO1xyXG52YXIgUGFyYW1ldGVySW5mb3JtYXRpb247XHJcbihmdW5jdGlvbihQYXJhbWV0ZXJJbmZvcm1hdGlvbjIpIHtcclxuICBmdW5jdGlvbiBjcmVhdGUobGFiZWwsIGRvY3VtZW50YXRpb24pIHtcclxuICAgIHJldHVybiBkb2N1bWVudGF0aW9uID8geyBsYWJlbCwgZG9jdW1lbnRhdGlvbiB9IDogeyBsYWJlbCB9O1xyXG4gIH1cclxuICBQYXJhbWV0ZXJJbmZvcm1hdGlvbjIuY3JlYXRlID0gY3JlYXRlO1xyXG59KShQYXJhbWV0ZXJJbmZvcm1hdGlvbiB8fCAoUGFyYW1ldGVySW5mb3JtYXRpb24gPSB7fSkpO1xyXG52YXIgU2lnbmF0dXJlSW5mb3JtYXRpb247XHJcbihmdW5jdGlvbihTaWduYXR1cmVJbmZvcm1hdGlvbjIpIHtcclxuICBmdW5jdGlvbiBjcmVhdGUobGFiZWwsIGRvY3VtZW50YXRpb24sIC4uLnBhcmFtZXRlcnMpIHtcclxuICAgIGxldCByZXN1bHQgPSB7IGxhYmVsIH07XHJcbiAgICBpZiAoSXMuZGVmaW5lZChkb2N1bWVudGF0aW9uKSkge1xyXG4gICAgICByZXN1bHQuZG9jdW1lbnRhdGlvbiA9IGRvY3VtZW50YXRpb247XHJcbiAgICB9XHJcbiAgICBpZiAoSXMuZGVmaW5lZChwYXJhbWV0ZXJzKSkge1xyXG4gICAgICByZXN1bHQucGFyYW1ldGVycyA9IHBhcmFtZXRlcnM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXN1bHQucGFyYW1ldGVycyA9IFtdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcbiAgU2lnbmF0dXJlSW5mb3JtYXRpb24yLmNyZWF0ZSA9IGNyZWF0ZTtcclxufSkoU2lnbmF0dXJlSW5mb3JtYXRpb24gfHwgKFNpZ25hdHVyZUluZm9ybWF0aW9uID0ge30pKTtcclxudmFyIERvY3VtZW50SGlnaGxpZ2h0S2luZDtcclxuKGZ1bmN0aW9uKERvY3VtZW50SGlnaGxpZ2h0S2luZDIpIHtcclxuICBEb2N1bWVudEhpZ2hsaWdodEtpbmQyLlRleHQgPSAxO1xyXG4gIERvY3VtZW50SGlnaGxpZ2h0S2luZDIuUmVhZCA9IDI7XHJcbiAgRG9jdW1lbnRIaWdobGlnaHRLaW5kMi5Xcml0ZSA9IDM7XHJcbn0pKERvY3VtZW50SGlnaGxpZ2h0S2luZCB8fCAoRG9jdW1lbnRIaWdobGlnaHRLaW5kID0ge30pKTtcclxudmFyIERvY3VtZW50SGlnaGxpZ2h0O1xyXG4oZnVuY3Rpb24oRG9jdW1lbnRIaWdobGlnaHQyKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKHJhbmdlLCBraW5kKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0geyByYW5nZSB9O1xyXG4gICAgaWYgKElzLm51bWJlcihraW5kKSkge1xyXG4gICAgICByZXN1bHQua2luZCA9IGtpbmQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuICBEb2N1bWVudEhpZ2hsaWdodDIuY3JlYXRlID0gY3JlYXRlO1xyXG59KShEb2N1bWVudEhpZ2hsaWdodCB8fCAoRG9jdW1lbnRIaWdobGlnaHQgPSB7fSkpO1xyXG52YXIgU3ltYm9sS2luZDtcclxuKGZ1bmN0aW9uKFN5bWJvbEtpbmQyKSB7XHJcbiAgU3ltYm9sS2luZDIuRmlsZSA9IDE7XHJcbiAgU3ltYm9sS2luZDIuTW9kdWxlID0gMjtcclxuICBTeW1ib2xLaW5kMi5OYW1lc3BhY2UgPSAzO1xyXG4gIFN5bWJvbEtpbmQyLlBhY2thZ2UgPSA0O1xyXG4gIFN5bWJvbEtpbmQyLkNsYXNzID0gNTtcclxuICBTeW1ib2xLaW5kMi5NZXRob2QgPSA2O1xyXG4gIFN5bWJvbEtpbmQyLlByb3BlcnR5ID0gNztcclxuICBTeW1ib2xLaW5kMi5GaWVsZCA9IDg7XHJcbiAgU3ltYm9sS2luZDIuQ29uc3RydWN0b3IgPSA5O1xyXG4gIFN5bWJvbEtpbmQyLkVudW0gPSAxMDtcclxuICBTeW1ib2xLaW5kMi5JbnRlcmZhY2UgPSAxMTtcclxuICBTeW1ib2xLaW5kMi5GdW5jdGlvbiA9IDEyO1xyXG4gIFN5bWJvbEtpbmQyLlZhcmlhYmxlID0gMTM7XHJcbiAgU3ltYm9sS2luZDIuQ29uc3RhbnQgPSAxNDtcclxuICBTeW1ib2xLaW5kMi5TdHJpbmcgPSAxNTtcclxuICBTeW1ib2xLaW5kMi5OdW1iZXIgPSAxNjtcclxuICBTeW1ib2xLaW5kMi5Cb29sZWFuID0gMTc7XHJcbiAgU3ltYm9sS2luZDIuQXJyYXkgPSAxODtcclxuICBTeW1ib2xLaW5kMi5PYmplY3QgPSAxOTtcclxuICBTeW1ib2xLaW5kMi5LZXkgPSAyMDtcclxuICBTeW1ib2xLaW5kMi5OdWxsID0gMjE7XHJcbiAgU3ltYm9sS2luZDIuRW51bU1lbWJlciA9IDIyO1xyXG4gIFN5bWJvbEtpbmQyLlN0cnVjdCA9IDIzO1xyXG4gIFN5bWJvbEtpbmQyLkV2ZW50ID0gMjQ7XHJcbiAgU3ltYm9sS2luZDIuT3BlcmF0b3IgPSAyNTtcclxuICBTeW1ib2xLaW5kMi5UeXBlUGFyYW1ldGVyID0gMjY7XHJcbn0pKFN5bWJvbEtpbmQgfHwgKFN5bWJvbEtpbmQgPSB7fSkpO1xyXG52YXIgU3ltYm9sVGFnO1xyXG4oZnVuY3Rpb24oU3ltYm9sVGFnMikge1xyXG4gIFN5bWJvbFRhZzIuRGVwcmVjYXRlZCA9IDE7XHJcbn0pKFN5bWJvbFRhZyB8fCAoU3ltYm9sVGFnID0ge30pKTtcclxudmFyIFN5bWJvbEluZm9ybWF0aW9uO1xyXG4oZnVuY3Rpb24oU3ltYm9sSW5mb3JtYXRpb24yKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKG5hbWUsIGtpbmQsIHJhbmdlLCB1cmksIGNvbnRhaW5lck5hbWUpIHtcclxuICAgIGxldCByZXN1bHQgPSB7XHJcbiAgICAgIG5hbWUsXHJcbiAgICAgIGtpbmQsXHJcbiAgICAgIGxvY2F0aW9uOiB7IHVyaSwgcmFuZ2UgfVxyXG4gICAgfTtcclxuICAgIGlmIChjb250YWluZXJOYW1lKSB7XHJcbiAgICAgIHJlc3VsdC5jb250YWluZXJOYW1lID0gY29udGFpbmVyTmFtZTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG4gIFN5bWJvbEluZm9ybWF0aW9uMi5jcmVhdGUgPSBjcmVhdGU7XHJcbn0pKFN5bWJvbEluZm9ybWF0aW9uIHx8IChTeW1ib2xJbmZvcm1hdGlvbiA9IHt9KSk7XHJcbnZhciBXb3Jrc3BhY2VTeW1ib2w7XHJcbihmdW5jdGlvbihXb3Jrc3BhY2VTeW1ib2wyKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKG5hbWUsIGtpbmQsIHVyaSwgcmFuZ2UpIHtcclxuICAgIHJldHVybiByYW5nZSAhPT0gdm9pZCAwID8geyBuYW1lLCBraW5kLCBsb2NhdGlvbjogeyB1cmksIHJhbmdlIH0gfSA6IHsgbmFtZSwga2luZCwgbG9jYXRpb246IHsgdXJpIH0gfTtcclxuICB9XHJcbiAgV29ya3NwYWNlU3ltYm9sMi5jcmVhdGUgPSBjcmVhdGU7XHJcbn0pKFdvcmtzcGFjZVN5bWJvbCB8fCAoV29ya3NwYWNlU3ltYm9sID0ge30pKTtcclxudmFyIERvY3VtZW50U3ltYm9sO1xyXG4oZnVuY3Rpb24oRG9jdW1lbnRTeW1ib2wyKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKG5hbWUsIGRldGFpbCwga2luZCwgcmFuZ2UsIHNlbGVjdGlvblJhbmdlLCBjaGlsZHJlbikge1xyXG4gICAgbGV0IHJlc3VsdCA9IHtcclxuICAgICAgbmFtZSxcclxuICAgICAgZGV0YWlsLFxyXG4gICAgICBraW5kLFxyXG4gICAgICByYW5nZSxcclxuICAgICAgc2VsZWN0aW9uUmFuZ2VcclxuICAgIH07XHJcbiAgICBpZiAoY2hpbGRyZW4gIT09IHZvaWQgMCkge1xyXG4gICAgICByZXN1bHQuY2hpbGRyZW4gPSBjaGlsZHJlbjtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG4gIERvY3VtZW50U3ltYm9sMi5jcmVhdGUgPSBjcmVhdGU7XHJcbiAgZnVuY3Rpb24gaXModmFsdWUpIHtcclxuICAgIGxldCBjYW5kaWRhdGUgPSB2YWx1ZTtcclxuICAgIHJldHVybiBjYW5kaWRhdGUgJiYgSXMuc3RyaW5nKGNhbmRpZGF0ZS5uYW1lKSAmJiBJcy5udW1iZXIoY2FuZGlkYXRlLmtpbmQpICYmIFJhbmdlLmlzKGNhbmRpZGF0ZS5yYW5nZSkgJiYgUmFuZ2UuaXMoY2FuZGlkYXRlLnNlbGVjdGlvblJhbmdlKSAmJiAoY2FuZGlkYXRlLmRldGFpbCA9PT0gdm9pZCAwIHx8IElzLnN0cmluZyhjYW5kaWRhdGUuZGV0YWlsKSkgJiYgKGNhbmRpZGF0ZS5kZXByZWNhdGVkID09PSB2b2lkIDAgfHwgSXMuYm9vbGVhbihjYW5kaWRhdGUuZGVwcmVjYXRlZCkpICYmIChjYW5kaWRhdGUuY2hpbGRyZW4gPT09IHZvaWQgMCB8fCBBcnJheS5pc0FycmF5KGNhbmRpZGF0ZS5jaGlsZHJlbikpICYmIChjYW5kaWRhdGUudGFncyA9PT0gdm9pZCAwIHx8IEFycmF5LmlzQXJyYXkoY2FuZGlkYXRlLnRhZ3MpKTtcclxuICB9XHJcbiAgRG9jdW1lbnRTeW1ib2wyLmlzID0gaXM7XHJcbn0pKERvY3VtZW50U3ltYm9sIHx8IChEb2N1bWVudFN5bWJvbCA9IHt9KSk7XHJcbnZhciBDb2RlQWN0aW9uS2luZDtcclxuKGZ1bmN0aW9uKENvZGVBY3Rpb25LaW5kMikge1xyXG4gIENvZGVBY3Rpb25LaW5kMi5FbXB0eSA9IFwiXCI7XHJcbiAgQ29kZUFjdGlvbktpbmQyLlF1aWNrRml4ID0gXCJxdWlja2ZpeFwiO1xyXG4gIENvZGVBY3Rpb25LaW5kMi5SZWZhY3RvciA9IFwicmVmYWN0b3JcIjtcclxuICBDb2RlQWN0aW9uS2luZDIuUmVmYWN0b3JFeHRyYWN0ID0gXCJyZWZhY3Rvci5leHRyYWN0XCI7XHJcbiAgQ29kZUFjdGlvbktpbmQyLlJlZmFjdG9ySW5saW5lID0gXCJyZWZhY3Rvci5pbmxpbmVcIjtcclxuICBDb2RlQWN0aW9uS2luZDIuUmVmYWN0b3JSZXdyaXRlID0gXCJyZWZhY3Rvci5yZXdyaXRlXCI7XHJcbiAgQ29kZUFjdGlvbktpbmQyLlNvdXJjZSA9IFwic291cmNlXCI7XHJcbiAgQ29kZUFjdGlvbktpbmQyLlNvdXJjZU9yZ2FuaXplSW1wb3J0cyA9IFwic291cmNlLm9yZ2FuaXplSW1wb3J0c1wiO1xyXG4gIENvZGVBY3Rpb25LaW5kMi5Tb3VyY2VGaXhBbGwgPSBcInNvdXJjZS5maXhBbGxcIjtcclxufSkoQ29kZUFjdGlvbktpbmQgfHwgKENvZGVBY3Rpb25LaW5kID0ge30pKTtcclxudmFyIENvZGVBY3Rpb25UcmlnZ2VyS2luZDtcclxuKGZ1bmN0aW9uKENvZGVBY3Rpb25UcmlnZ2VyS2luZDIpIHtcclxuICBDb2RlQWN0aW9uVHJpZ2dlcktpbmQyLkludm9rZWQgPSAxO1xyXG4gIENvZGVBY3Rpb25UcmlnZ2VyS2luZDIuQXV0b21hdGljID0gMjtcclxufSkoQ29kZUFjdGlvblRyaWdnZXJLaW5kIHx8IChDb2RlQWN0aW9uVHJpZ2dlcktpbmQgPSB7fSkpO1xyXG52YXIgQ29kZUFjdGlvbkNvbnRleHQ7XHJcbihmdW5jdGlvbihDb2RlQWN0aW9uQ29udGV4dDIpIHtcclxuICBmdW5jdGlvbiBjcmVhdGUoZGlhZ25vc3RpY3MsIG9ubHksIHRyaWdnZXJLaW5kKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0geyBkaWFnbm9zdGljcyB9O1xyXG4gICAgaWYgKG9ubHkgIT09IHZvaWQgMCAmJiBvbmx5ICE9PSBudWxsKSB7XHJcbiAgICAgIHJlc3VsdC5vbmx5ID0gb25seTtcclxuICAgIH1cclxuICAgIGlmICh0cmlnZ2VyS2luZCAhPT0gdm9pZCAwICYmIHRyaWdnZXJLaW5kICE9PSBudWxsKSB7XHJcbiAgICAgIHJlc3VsdC50cmlnZ2VyS2luZCA9IHRyaWdnZXJLaW5kO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcbiAgQ29kZUFjdGlvbkNvbnRleHQyLmNyZWF0ZSA9IGNyZWF0ZTtcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgbGV0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLmRlZmluZWQoY2FuZGlkYXRlKSAmJiBJcy50eXBlZEFycmF5KGNhbmRpZGF0ZS5kaWFnbm9zdGljcywgRGlhZ25vc3RpYy5pcykgJiYgKGNhbmRpZGF0ZS5vbmx5ID09PSB2b2lkIDAgfHwgSXMudHlwZWRBcnJheShjYW5kaWRhdGUub25seSwgSXMuc3RyaW5nKSkgJiYgKGNhbmRpZGF0ZS50cmlnZ2VyS2luZCA9PT0gdm9pZCAwIHx8IGNhbmRpZGF0ZS50cmlnZ2VyS2luZCA9PT0gQ29kZUFjdGlvblRyaWdnZXJLaW5kLkludm9rZWQgfHwgY2FuZGlkYXRlLnRyaWdnZXJLaW5kID09PSBDb2RlQWN0aW9uVHJpZ2dlcktpbmQuQXV0b21hdGljKTtcclxuICB9XHJcbiAgQ29kZUFjdGlvbkNvbnRleHQyLmlzID0gaXM7XHJcbn0pKENvZGVBY3Rpb25Db250ZXh0IHx8IChDb2RlQWN0aW9uQ29udGV4dCA9IHt9KSk7XHJcbnZhciBDb2RlQWN0aW9uO1xyXG4oZnVuY3Rpb24oQ29kZUFjdGlvbjIpIHtcclxuICBmdW5jdGlvbiBjcmVhdGUodGl0bGUsIGtpbmRPckNvbW1hbmRPckVkaXQsIGtpbmQpIHtcclxuICAgIGxldCByZXN1bHQgPSB7IHRpdGxlIH07XHJcbiAgICBsZXQgY2hlY2tLaW5kID0gdHJ1ZTtcclxuICAgIGlmICh0eXBlb2Yga2luZE9yQ29tbWFuZE9yRWRpdCA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICBjaGVja0tpbmQgPSBmYWxzZTtcclxuICAgICAgcmVzdWx0LmtpbmQgPSBraW5kT3JDb21tYW5kT3JFZGl0O1xyXG4gICAgfSBlbHNlIGlmIChDb21tYW5kLmlzKGtpbmRPckNvbW1hbmRPckVkaXQpKSB7XHJcbiAgICAgIHJlc3VsdC5jb21tYW5kID0ga2luZE9yQ29tbWFuZE9yRWRpdDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlc3VsdC5lZGl0ID0ga2luZE9yQ29tbWFuZE9yRWRpdDtcclxuICAgIH1cclxuICAgIGlmIChjaGVja0tpbmQgJiYga2luZCAhPT0gdm9pZCAwKSB7XHJcbiAgICAgIHJlc3VsdC5raW5kID0ga2luZDtcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG4gIENvZGVBY3Rpb24yLmNyZWF0ZSA9IGNyZWF0ZTtcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgbGV0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIGNhbmRpZGF0ZSAmJiBJcy5zdHJpbmcoY2FuZGlkYXRlLnRpdGxlKSAmJiAoY2FuZGlkYXRlLmRpYWdub3N0aWNzID09PSB2b2lkIDAgfHwgSXMudHlwZWRBcnJheShjYW5kaWRhdGUuZGlhZ25vc3RpY3MsIERpYWdub3N0aWMuaXMpKSAmJiAoY2FuZGlkYXRlLmtpbmQgPT09IHZvaWQgMCB8fCBJcy5zdHJpbmcoY2FuZGlkYXRlLmtpbmQpKSAmJiAoY2FuZGlkYXRlLmVkaXQgIT09IHZvaWQgMCB8fCBjYW5kaWRhdGUuY29tbWFuZCAhPT0gdm9pZCAwKSAmJiAoY2FuZGlkYXRlLmNvbW1hbmQgPT09IHZvaWQgMCB8fCBDb21tYW5kLmlzKGNhbmRpZGF0ZS5jb21tYW5kKSkgJiYgKGNhbmRpZGF0ZS5pc1ByZWZlcnJlZCA9PT0gdm9pZCAwIHx8IElzLmJvb2xlYW4oY2FuZGlkYXRlLmlzUHJlZmVycmVkKSkgJiYgKGNhbmRpZGF0ZS5lZGl0ID09PSB2b2lkIDAgfHwgV29ya3NwYWNlRWRpdC5pcyhjYW5kaWRhdGUuZWRpdCkpO1xyXG4gIH1cclxuICBDb2RlQWN0aW9uMi5pcyA9IGlzO1xyXG59KShDb2RlQWN0aW9uIHx8IChDb2RlQWN0aW9uID0ge30pKTtcclxudmFyIENvZGVMZW5zO1xyXG4oZnVuY3Rpb24oQ29kZUxlbnMyKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKHJhbmdlLCBkYXRhKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0geyByYW5nZSB9O1xyXG4gICAgaWYgKElzLmRlZmluZWQoZGF0YSkpIHtcclxuICAgICAgcmVzdWx0LmRhdGEgPSBkYXRhO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcbiAgQ29kZUxlbnMyLmNyZWF0ZSA9IGNyZWF0ZTtcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgbGV0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLmRlZmluZWQoY2FuZGlkYXRlKSAmJiBSYW5nZS5pcyhjYW5kaWRhdGUucmFuZ2UpICYmIChJcy51bmRlZmluZWQoY2FuZGlkYXRlLmNvbW1hbmQpIHx8IENvbW1hbmQuaXMoY2FuZGlkYXRlLmNvbW1hbmQpKTtcclxuICB9XHJcbiAgQ29kZUxlbnMyLmlzID0gaXM7XHJcbn0pKENvZGVMZW5zIHx8IChDb2RlTGVucyA9IHt9KSk7XHJcbnZhciBGb3JtYXR0aW5nT3B0aW9ucztcclxuKGZ1bmN0aW9uKEZvcm1hdHRpbmdPcHRpb25zMikge1xyXG4gIGZ1bmN0aW9uIGNyZWF0ZSh0YWJTaXplLCBpbnNlcnRTcGFjZXMpIHtcclxuICAgIHJldHVybiB7IHRhYlNpemUsIGluc2VydFNwYWNlcyB9O1xyXG4gIH1cclxuICBGb3JtYXR0aW5nT3B0aW9uczIuY3JlYXRlID0gY3JlYXRlO1xyXG4gIGZ1bmN0aW9uIGlzKHZhbHVlKSB7XHJcbiAgICBsZXQgY2FuZGlkYXRlID0gdmFsdWU7XHJcbiAgICByZXR1cm4gSXMuZGVmaW5lZChjYW5kaWRhdGUpICYmIElzLnVpbnRlZ2VyKGNhbmRpZGF0ZS50YWJTaXplKSAmJiBJcy5ib29sZWFuKGNhbmRpZGF0ZS5pbnNlcnRTcGFjZXMpO1xyXG4gIH1cclxuICBGb3JtYXR0aW5nT3B0aW9uczIuaXMgPSBpcztcclxufSkoRm9ybWF0dGluZ09wdGlvbnMgfHwgKEZvcm1hdHRpbmdPcHRpb25zID0ge30pKTtcclxudmFyIERvY3VtZW50TGluaztcclxuKGZ1bmN0aW9uKERvY3VtZW50TGluazIpIHtcclxuICBmdW5jdGlvbiBjcmVhdGUocmFuZ2UsIHRhcmdldCwgZGF0YSkge1xyXG4gICAgcmV0dXJuIHsgcmFuZ2UsIHRhcmdldCwgZGF0YSB9O1xyXG4gIH1cclxuICBEb2N1bWVudExpbmsyLmNyZWF0ZSA9IGNyZWF0ZTtcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgbGV0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLmRlZmluZWQoY2FuZGlkYXRlKSAmJiBSYW5nZS5pcyhjYW5kaWRhdGUucmFuZ2UpICYmIChJcy51bmRlZmluZWQoY2FuZGlkYXRlLnRhcmdldCkgfHwgSXMuc3RyaW5nKGNhbmRpZGF0ZS50YXJnZXQpKTtcclxuICB9XHJcbiAgRG9jdW1lbnRMaW5rMi5pcyA9IGlzO1xyXG59KShEb2N1bWVudExpbmsgfHwgKERvY3VtZW50TGluayA9IHt9KSk7XHJcbnZhciBTZWxlY3Rpb25SYW5nZTtcclxuKGZ1bmN0aW9uKFNlbGVjdGlvblJhbmdlMikge1xyXG4gIGZ1bmN0aW9uIGNyZWF0ZShyYW5nZSwgcGFyZW50KSB7XHJcbiAgICByZXR1cm4geyByYW5nZSwgcGFyZW50IH07XHJcbiAgfVxyXG4gIFNlbGVjdGlvblJhbmdlMi5jcmVhdGUgPSBjcmVhdGU7XHJcbiAgZnVuY3Rpb24gaXModmFsdWUpIHtcclxuICAgIGxldCBjYW5kaWRhdGUgPSB2YWx1ZTtcclxuICAgIHJldHVybiBJcy5vYmplY3RMaXRlcmFsKGNhbmRpZGF0ZSkgJiYgUmFuZ2UuaXMoY2FuZGlkYXRlLnJhbmdlKSAmJiAoY2FuZGlkYXRlLnBhcmVudCA9PT0gdm9pZCAwIHx8IFNlbGVjdGlvblJhbmdlMi5pcyhjYW5kaWRhdGUucGFyZW50KSk7XHJcbiAgfVxyXG4gIFNlbGVjdGlvblJhbmdlMi5pcyA9IGlzO1xyXG59KShTZWxlY3Rpb25SYW5nZSB8fCAoU2VsZWN0aW9uUmFuZ2UgPSB7fSkpO1xyXG52YXIgU2VtYW50aWNUb2tlblR5cGVzO1xyXG4oZnVuY3Rpb24oU2VtYW50aWNUb2tlblR5cGVzMikge1xyXG4gIFNlbWFudGljVG9rZW5UeXBlczJbXCJuYW1lc3BhY2VcIl0gPSBcIm5hbWVzcGFjZVwiO1xyXG4gIFNlbWFudGljVG9rZW5UeXBlczJbXCJ0eXBlXCJdID0gXCJ0eXBlXCI7XHJcbiAgU2VtYW50aWNUb2tlblR5cGVzMltcImNsYXNzXCJdID0gXCJjbGFzc1wiO1xyXG4gIFNlbWFudGljVG9rZW5UeXBlczJbXCJlbnVtXCJdID0gXCJlbnVtXCI7XHJcbiAgU2VtYW50aWNUb2tlblR5cGVzMltcImludGVyZmFjZVwiXSA9IFwiaW50ZXJmYWNlXCI7XHJcbiAgU2VtYW50aWNUb2tlblR5cGVzMltcInN0cnVjdFwiXSA9IFwic3RydWN0XCI7XHJcbiAgU2VtYW50aWNUb2tlblR5cGVzMltcInR5cGVQYXJhbWV0ZXJcIl0gPSBcInR5cGVQYXJhbWV0ZXJcIjtcclxuICBTZW1hbnRpY1Rva2VuVHlwZXMyW1wicGFyYW1ldGVyXCJdID0gXCJwYXJhbWV0ZXJcIjtcclxuICBTZW1hbnRpY1Rva2VuVHlwZXMyW1widmFyaWFibGVcIl0gPSBcInZhcmlhYmxlXCI7XHJcbiAgU2VtYW50aWNUb2tlblR5cGVzMltcInByb3BlcnR5XCJdID0gXCJwcm9wZXJ0eVwiO1xyXG4gIFNlbWFudGljVG9rZW5UeXBlczJbXCJlbnVtTWVtYmVyXCJdID0gXCJlbnVtTWVtYmVyXCI7XHJcbiAgU2VtYW50aWNUb2tlblR5cGVzMltcImV2ZW50XCJdID0gXCJldmVudFwiO1xyXG4gIFNlbWFudGljVG9rZW5UeXBlczJbXCJmdW5jdGlvblwiXSA9IFwiZnVuY3Rpb25cIjtcclxuICBTZW1hbnRpY1Rva2VuVHlwZXMyW1wibWV0aG9kXCJdID0gXCJtZXRob2RcIjtcclxuICBTZW1hbnRpY1Rva2VuVHlwZXMyW1wibWFjcm9cIl0gPSBcIm1hY3JvXCI7XHJcbiAgU2VtYW50aWNUb2tlblR5cGVzMltcImtleXdvcmRcIl0gPSBcImtleXdvcmRcIjtcclxuICBTZW1hbnRpY1Rva2VuVHlwZXMyW1wibW9kaWZpZXJcIl0gPSBcIm1vZGlmaWVyXCI7XHJcbiAgU2VtYW50aWNUb2tlblR5cGVzMltcImNvbW1lbnRcIl0gPSBcImNvbW1lbnRcIjtcclxuICBTZW1hbnRpY1Rva2VuVHlwZXMyW1wic3RyaW5nXCJdID0gXCJzdHJpbmdcIjtcclxuICBTZW1hbnRpY1Rva2VuVHlwZXMyW1wibnVtYmVyXCJdID0gXCJudW1iZXJcIjtcclxuICBTZW1hbnRpY1Rva2VuVHlwZXMyW1wicmVnZXhwXCJdID0gXCJyZWdleHBcIjtcclxuICBTZW1hbnRpY1Rva2VuVHlwZXMyW1wib3BlcmF0b3JcIl0gPSBcIm9wZXJhdG9yXCI7XHJcbiAgU2VtYW50aWNUb2tlblR5cGVzMltcImRlY29yYXRvclwiXSA9IFwiZGVjb3JhdG9yXCI7XHJcbn0pKFNlbWFudGljVG9rZW5UeXBlcyB8fCAoU2VtYW50aWNUb2tlblR5cGVzID0ge30pKTtcclxudmFyIFNlbWFudGljVG9rZW5Nb2RpZmllcnM7XHJcbihmdW5jdGlvbihTZW1hbnRpY1Rva2VuTW9kaWZpZXJzMikge1xyXG4gIFNlbWFudGljVG9rZW5Nb2RpZmllcnMyW1wiZGVjbGFyYXRpb25cIl0gPSBcImRlY2xhcmF0aW9uXCI7XHJcbiAgU2VtYW50aWNUb2tlbk1vZGlmaWVyczJbXCJkZWZpbml0aW9uXCJdID0gXCJkZWZpbml0aW9uXCI7XHJcbiAgU2VtYW50aWNUb2tlbk1vZGlmaWVyczJbXCJyZWFkb25seVwiXSA9IFwicmVhZG9ubHlcIjtcclxuICBTZW1hbnRpY1Rva2VuTW9kaWZpZXJzMltcInN0YXRpY1wiXSA9IFwic3RhdGljXCI7XHJcbiAgU2VtYW50aWNUb2tlbk1vZGlmaWVyczJbXCJkZXByZWNhdGVkXCJdID0gXCJkZXByZWNhdGVkXCI7XHJcbiAgU2VtYW50aWNUb2tlbk1vZGlmaWVyczJbXCJhYnN0cmFjdFwiXSA9IFwiYWJzdHJhY3RcIjtcclxuICBTZW1hbnRpY1Rva2VuTW9kaWZpZXJzMltcImFzeW5jXCJdID0gXCJhc3luY1wiO1xyXG4gIFNlbWFudGljVG9rZW5Nb2RpZmllcnMyW1wibW9kaWZpY2F0aW9uXCJdID0gXCJtb2RpZmljYXRpb25cIjtcclxuICBTZW1hbnRpY1Rva2VuTW9kaWZpZXJzMltcImRvY3VtZW50YXRpb25cIl0gPSBcImRvY3VtZW50YXRpb25cIjtcclxuICBTZW1hbnRpY1Rva2VuTW9kaWZpZXJzMltcImRlZmF1bHRMaWJyYXJ5XCJdID0gXCJkZWZhdWx0TGlicmFyeVwiO1xyXG59KShTZW1hbnRpY1Rva2VuTW9kaWZpZXJzIHx8IChTZW1hbnRpY1Rva2VuTW9kaWZpZXJzID0ge30pKTtcclxudmFyIFNlbWFudGljVG9rZW5zO1xyXG4oZnVuY3Rpb24oU2VtYW50aWNUb2tlbnMyKSB7XHJcbiAgZnVuY3Rpb24gaXModmFsdWUpIHtcclxuICAgIGNvbnN0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLm9iamVjdExpdGVyYWwoY2FuZGlkYXRlKSAmJiAoY2FuZGlkYXRlLnJlc3VsdElkID09PSB2b2lkIDAgfHwgdHlwZW9mIGNhbmRpZGF0ZS5yZXN1bHRJZCA9PT0gXCJzdHJpbmdcIikgJiYgQXJyYXkuaXNBcnJheShjYW5kaWRhdGUuZGF0YSkgJiYgKGNhbmRpZGF0ZS5kYXRhLmxlbmd0aCA9PT0gMCB8fCB0eXBlb2YgY2FuZGlkYXRlLmRhdGFbMF0gPT09IFwibnVtYmVyXCIpO1xyXG4gIH1cclxuICBTZW1hbnRpY1Rva2VuczIuaXMgPSBpcztcclxufSkoU2VtYW50aWNUb2tlbnMgfHwgKFNlbWFudGljVG9rZW5zID0ge30pKTtcclxudmFyIElubGluZVZhbHVlVGV4dDtcclxuKGZ1bmN0aW9uKElubGluZVZhbHVlVGV4dDIpIHtcclxuICBmdW5jdGlvbiBjcmVhdGUocmFuZ2UsIHRleHQpIHtcclxuICAgIHJldHVybiB7IHJhbmdlLCB0ZXh0IH07XHJcbiAgfVxyXG4gIElubGluZVZhbHVlVGV4dDIuY3JlYXRlID0gY3JlYXRlO1xyXG4gIGZ1bmN0aW9uIGlzKHZhbHVlKSB7XHJcbiAgICBjb25zdCBjYW5kaWRhdGUgPSB2YWx1ZTtcclxuICAgIHJldHVybiBjYW5kaWRhdGUgIT09IHZvaWQgMCAmJiBjYW5kaWRhdGUgIT09IG51bGwgJiYgUmFuZ2UuaXMoY2FuZGlkYXRlLnJhbmdlKSAmJiBJcy5zdHJpbmcoY2FuZGlkYXRlLnRleHQpO1xyXG4gIH1cclxuICBJbmxpbmVWYWx1ZVRleHQyLmlzID0gaXM7XHJcbn0pKElubGluZVZhbHVlVGV4dCB8fCAoSW5saW5lVmFsdWVUZXh0ID0ge30pKTtcclxudmFyIElubGluZVZhbHVlVmFyaWFibGVMb29rdXA7XHJcbihmdW5jdGlvbihJbmxpbmVWYWx1ZVZhcmlhYmxlTG9va3VwMikge1xyXG4gIGZ1bmN0aW9uIGNyZWF0ZShyYW5nZSwgdmFyaWFibGVOYW1lLCBjYXNlU2Vuc2l0aXZlTG9va3VwKSB7XHJcbiAgICByZXR1cm4geyByYW5nZSwgdmFyaWFibGVOYW1lLCBjYXNlU2Vuc2l0aXZlTG9va3VwIH07XHJcbiAgfVxyXG4gIElubGluZVZhbHVlVmFyaWFibGVMb29rdXAyLmNyZWF0ZSA9IGNyZWF0ZTtcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgY29uc3QgY2FuZGlkYXRlID0gdmFsdWU7XHJcbiAgICByZXR1cm4gY2FuZGlkYXRlICE9PSB2b2lkIDAgJiYgY2FuZGlkYXRlICE9PSBudWxsICYmIFJhbmdlLmlzKGNhbmRpZGF0ZS5yYW5nZSkgJiYgSXMuYm9vbGVhbihjYW5kaWRhdGUuY2FzZVNlbnNpdGl2ZUxvb2t1cCkgJiYgKElzLnN0cmluZyhjYW5kaWRhdGUudmFyaWFibGVOYW1lKSB8fCBjYW5kaWRhdGUudmFyaWFibGVOYW1lID09PSB2b2lkIDApO1xyXG4gIH1cclxuICBJbmxpbmVWYWx1ZVZhcmlhYmxlTG9va3VwMi5pcyA9IGlzO1xyXG59KShJbmxpbmVWYWx1ZVZhcmlhYmxlTG9va3VwIHx8IChJbmxpbmVWYWx1ZVZhcmlhYmxlTG9va3VwID0ge30pKTtcclxudmFyIElubGluZVZhbHVlRXZhbHVhdGFibGVFeHByZXNzaW9uO1xyXG4oZnVuY3Rpb24oSW5saW5lVmFsdWVFdmFsdWF0YWJsZUV4cHJlc3Npb24yKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKHJhbmdlLCBleHByZXNzaW9uKSB7XHJcbiAgICByZXR1cm4geyByYW5nZSwgZXhwcmVzc2lvbiB9O1xyXG4gIH1cclxuICBJbmxpbmVWYWx1ZUV2YWx1YXRhYmxlRXhwcmVzc2lvbjIuY3JlYXRlID0gY3JlYXRlO1xyXG4gIGZ1bmN0aW9uIGlzKHZhbHVlKSB7XHJcbiAgICBjb25zdCBjYW5kaWRhdGUgPSB2YWx1ZTtcclxuICAgIHJldHVybiBjYW5kaWRhdGUgIT09IHZvaWQgMCAmJiBjYW5kaWRhdGUgIT09IG51bGwgJiYgUmFuZ2UuaXMoY2FuZGlkYXRlLnJhbmdlKSAmJiAoSXMuc3RyaW5nKGNhbmRpZGF0ZS5leHByZXNzaW9uKSB8fCBjYW5kaWRhdGUuZXhwcmVzc2lvbiA9PT0gdm9pZCAwKTtcclxuICB9XHJcbiAgSW5saW5lVmFsdWVFdmFsdWF0YWJsZUV4cHJlc3Npb24yLmlzID0gaXM7XHJcbn0pKElubGluZVZhbHVlRXZhbHVhdGFibGVFeHByZXNzaW9uIHx8IChJbmxpbmVWYWx1ZUV2YWx1YXRhYmxlRXhwcmVzc2lvbiA9IHt9KSk7XHJcbnZhciBJbmxpbmVWYWx1ZUNvbnRleHQ7XHJcbihmdW5jdGlvbihJbmxpbmVWYWx1ZUNvbnRleHQyKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKGZyYW1lSWQsIHN0b3BwZWRMb2NhdGlvbikge1xyXG4gICAgcmV0dXJuIHsgZnJhbWVJZCwgc3RvcHBlZExvY2F0aW9uIH07XHJcbiAgfVxyXG4gIElubGluZVZhbHVlQ29udGV4dDIuY3JlYXRlID0gY3JlYXRlO1xyXG4gIGZ1bmN0aW9uIGlzKHZhbHVlKSB7XHJcbiAgICBjb25zdCBjYW5kaWRhdGUgPSB2YWx1ZTtcclxuICAgIHJldHVybiBJcy5kZWZpbmVkKGNhbmRpZGF0ZSkgJiYgUmFuZ2UuaXModmFsdWUuc3RvcHBlZExvY2F0aW9uKTtcclxuICB9XHJcbiAgSW5saW5lVmFsdWVDb250ZXh0Mi5pcyA9IGlzO1xyXG59KShJbmxpbmVWYWx1ZUNvbnRleHQgfHwgKElubGluZVZhbHVlQ29udGV4dCA9IHt9KSk7XHJcbnZhciBJbmxheUhpbnRLaW5kO1xyXG4oZnVuY3Rpb24oSW5sYXlIaW50S2luZDIpIHtcclxuICBJbmxheUhpbnRLaW5kMi5UeXBlID0gMTtcclxuICBJbmxheUhpbnRLaW5kMi5QYXJhbWV0ZXIgPSAyO1xyXG4gIGZ1bmN0aW9uIGlzKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdmFsdWUgPT09IDEgfHwgdmFsdWUgPT09IDI7XHJcbiAgfVxyXG4gIElubGF5SGludEtpbmQyLmlzID0gaXM7XHJcbn0pKElubGF5SGludEtpbmQgfHwgKElubGF5SGludEtpbmQgPSB7fSkpO1xyXG52YXIgSW5sYXlIaW50TGFiZWxQYXJ0O1xyXG4oZnVuY3Rpb24oSW5sYXlIaW50TGFiZWxQYXJ0Mikge1xyXG4gIGZ1bmN0aW9uIGNyZWF0ZSh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHsgdmFsdWUgfTtcclxuICB9XHJcbiAgSW5sYXlIaW50TGFiZWxQYXJ0Mi5jcmVhdGUgPSBjcmVhdGU7XHJcbiAgZnVuY3Rpb24gaXModmFsdWUpIHtcclxuICAgIGNvbnN0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLm9iamVjdExpdGVyYWwoY2FuZGlkYXRlKSAmJiAoY2FuZGlkYXRlLnRvb2x0aXAgPT09IHZvaWQgMCB8fCBJcy5zdHJpbmcoY2FuZGlkYXRlLnRvb2x0aXApIHx8IE1hcmt1cENvbnRlbnQuaXMoY2FuZGlkYXRlLnRvb2x0aXApKSAmJiAoY2FuZGlkYXRlLmxvY2F0aW9uID09PSB2b2lkIDAgfHwgTG9jYXRpb24uaXMoY2FuZGlkYXRlLmxvY2F0aW9uKSkgJiYgKGNhbmRpZGF0ZS5jb21tYW5kID09PSB2b2lkIDAgfHwgQ29tbWFuZC5pcyhjYW5kaWRhdGUuY29tbWFuZCkpO1xyXG4gIH1cclxuICBJbmxheUhpbnRMYWJlbFBhcnQyLmlzID0gaXM7XHJcbn0pKElubGF5SGludExhYmVsUGFydCB8fCAoSW5sYXlIaW50TGFiZWxQYXJ0ID0ge30pKTtcclxudmFyIElubGF5SGludDtcclxuKGZ1bmN0aW9uKElubGF5SGludDIpIHtcclxuICBmdW5jdGlvbiBjcmVhdGUocG9zaXRpb24sIGxhYmVsLCBraW5kKSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSB7IHBvc2l0aW9uLCBsYWJlbCB9O1xyXG4gICAgaWYgKGtpbmQgIT09IHZvaWQgMCkge1xyXG4gICAgICByZXN1bHQua2luZCA9IGtpbmQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuICBJbmxheUhpbnQyLmNyZWF0ZSA9IGNyZWF0ZTtcclxuICBmdW5jdGlvbiBpcyh2YWx1ZSkge1xyXG4gICAgY29uc3QgY2FuZGlkYXRlID0gdmFsdWU7XHJcbiAgICByZXR1cm4gSXMub2JqZWN0TGl0ZXJhbChjYW5kaWRhdGUpICYmIFBvc2l0aW9uLmlzKGNhbmRpZGF0ZS5wb3NpdGlvbikgJiYgKElzLnN0cmluZyhjYW5kaWRhdGUubGFiZWwpIHx8IElzLnR5cGVkQXJyYXkoY2FuZGlkYXRlLmxhYmVsLCBJbmxheUhpbnRMYWJlbFBhcnQuaXMpKSAmJiAoY2FuZGlkYXRlLmtpbmQgPT09IHZvaWQgMCB8fCBJbmxheUhpbnRLaW5kLmlzKGNhbmRpZGF0ZS5raW5kKSkgJiYgY2FuZGlkYXRlLnRleHRFZGl0cyA9PT0gdm9pZCAwIHx8IElzLnR5cGVkQXJyYXkoY2FuZGlkYXRlLnRleHRFZGl0cywgVGV4dEVkaXQuaXMpICYmIChjYW5kaWRhdGUudG9vbHRpcCA9PT0gdm9pZCAwIHx8IElzLnN0cmluZyhjYW5kaWRhdGUudG9vbHRpcCkgfHwgTWFya3VwQ29udGVudC5pcyhjYW5kaWRhdGUudG9vbHRpcCkpICYmIChjYW5kaWRhdGUucGFkZGluZ0xlZnQgPT09IHZvaWQgMCB8fCBJcy5ib29sZWFuKGNhbmRpZGF0ZS5wYWRkaW5nTGVmdCkpICYmIChjYW5kaWRhdGUucGFkZGluZ1JpZ2h0ID09PSB2b2lkIDAgfHwgSXMuYm9vbGVhbihjYW5kaWRhdGUucGFkZGluZ1JpZ2h0KSk7XHJcbiAgfVxyXG4gIElubGF5SGludDIuaXMgPSBpcztcclxufSkoSW5sYXlIaW50IHx8IChJbmxheUhpbnQgPSB7fSkpO1xyXG52YXIgU3RyaW5nVmFsdWU7XHJcbihmdW5jdGlvbihTdHJpbmdWYWx1ZTIpIHtcclxuICBmdW5jdGlvbiBjcmVhdGVTbmlwcGV0KHZhbHVlKSB7XHJcbiAgICByZXR1cm4geyBraW5kOiBcInNuaXBwZXRcIiwgdmFsdWUgfTtcclxuICB9XHJcbiAgU3RyaW5nVmFsdWUyLmNyZWF0ZVNuaXBwZXQgPSBjcmVhdGVTbmlwcGV0O1xyXG59KShTdHJpbmdWYWx1ZSB8fCAoU3RyaW5nVmFsdWUgPSB7fSkpO1xyXG52YXIgSW5saW5lQ29tcGxldGlvbkl0ZW07XHJcbihmdW5jdGlvbihJbmxpbmVDb21wbGV0aW9uSXRlbTIpIHtcclxuICBmdW5jdGlvbiBjcmVhdGUoaW5zZXJ0VGV4dCwgZmlsdGVyVGV4dCwgcmFuZ2UsIGNvbW1hbmQpIHtcclxuICAgIHJldHVybiB7IGluc2VydFRleHQsIGZpbHRlclRleHQsIHJhbmdlLCBjb21tYW5kIH07XHJcbiAgfVxyXG4gIElubGluZUNvbXBsZXRpb25JdGVtMi5jcmVhdGUgPSBjcmVhdGU7XHJcbn0pKElubGluZUNvbXBsZXRpb25JdGVtIHx8IChJbmxpbmVDb21wbGV0aW9uSXRlbSA9IHt9KSk7XHJcbnZhciBJbmxpbmVDb21wbGV0aW9uTGlzdDtcclxuKGZ1bmN0aW9uKElubGluZUNvbXBsZXRpb25MaXN0Mikge1xyXG4gIGZ1bmN0aW9uIGNyZWF0ZShpdGVtcykge1xyXG4gICAgcmV0dXJuIHsgaXRlbXMgfTtcclxuICB9XHJcbiAgSW5saW5lQ29tcGxldGlvbkxpc3QyLmNyZWF0ZSA9IGNyZWF0ZTtcclxufSkoSW5saW5lQ29tcGxldGlvbkxpc3QgfHwgKElubGluZUNvbXBsZXRpb25MaXN0ID0ge30pKTtcclxudmFyIElubGluZUNvbXBsZXRpb25UcmlnZ2VyS2luZDtcclxuKGZ1bmN0aW9uKElubGluZUNvbXBsZXRpb25UcmlnZ2VyS2luZDIpIHtcclxuICBJbmxpbmVDb21wbGV0aW9uVHJpZ2dlcktpbmQyLkludm9rZWQgPSAwO1xyXG4gIElubGluZUNvbXBsZXRpb25UcmlnZ2VyS2luZDIuQXV0b21hdGljID0gMTtcclxufSkoSW5saW5lQ29tcGxldGlvblRyaWdnZXJLaW5kIHx8IChJbmxpbmVDb21wbGV0aW9uVHJpZ2dlcktpbmQgPSB7fSkpO1xyXG52YXIgU2VsZWN0ZWRDb21wbGV0aW9uSW5mbztcclxuKGZ1bmN0aW9uKFNlbGVjdGVkQ29tcGxldGlvbkluZm8yKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKHJhbmdlLCB0ZXh0KSB7XHJcbiAgICByZXR1cm4geyByYW5nZSwgdGV4dCB9O1xyXG4gIH1cclxuICBTZWxlY3RlZENvbXBsZXRpb25JbmZvMi5jcmVhdGUgPSBjcmVhdGU7XHJcbn0pKFNlbGVjdGVkQ29tcGxldGlvbkluZm8gfHwgKFNlbGVjdGVkQ29tcGxldGlvbkluZm8gPSB7fSkpO1xyXG52YXIgSW5saW5lQ29tcGxldGlvbkNvbnRleHQ7XHJcbihmdW5jdGlvbihJbmxpbmVDb21wbGV0aW9uQ29udGV4dDIpIHtcclxuICBmdW5jdGlvbiBjcmVhdGUodHJpZ2dlcktpbmQsIHNlbGVjdGVkQ29tcGxldGlvbkluZm8pIHtcclxuICAgIHJldHVybiB7IHRyaWdnZXJLaW5kLCBzZWxlY3RlZENvbXBsZXRpb25JbmZvIH07XHJcbiAgfVxyXG4gIElubGluZUNvbXBsZXRpb25Db250ZXh0Mi5jcmVhdGUgPSBjcmVhdGU7XHJcbn0pKElubGluZUNvbXBsZXRpb25Db250ZXh0IHx8IChJbmxpbmVDb21wbGV0aW9uQ29udGV4dCA9IHt9KSk7XHJcbnZhciBXb3Jrc3BhY2VGb2xkZXI7XHJcbihmdW5jdGlvbihXb3Jrc3BhY2VGb2xkZXIyKSB7XHJcbiAgZnVuY3Rpb24gaXModmFsdWUpIHtcclxuICAgIGNvbnN0IGNhbmRpZGF0ZSA9IHZhbHVlO1xyXG4gICAgcmV0dXJuIElzLm9iamVjdExpdGVyYWwoY2FuZGlkYXRlKSAmJiBVUkkuaXMoY2FuZGlkYXRlLnVyaSkgJiYgSXMuc3RyaW5nKGNhbmRpZGF0ZS5uYW1lKTtcclxuICB9XHJcbiAgV29ya3NwYWNlRm9sZGVyMi5pcyA9IGlzO1xyXG59KShXb3Jrc3BhY2VGb2xkZXIgfHwgKFdvcmtzcGFjZUZvbGRlciA9IHt9KSk7XHJcbnZhciBUZXh0RG9jdW1lbnQ7XHJcbihmdW5jdGlvbihUZXh0RG9jdW1lbnQyKSB7XHJcbiAgZnVuY3Rpb24gY3JlYXRlKHVyaSwgbGFuZ3VhZ2VJZCwgdmVyc2lvbiwgY29udGVudCkge1xyXG4gICAgcmV0dXJuIG5ldyBGdWxsVGV4dERvY3VtZW50KHVyaSwgbGFuZ3VhZ2VJZCwgdmVyc2lvbiwgY29udGVudCk7XHJcbiAgfVxyXG4gIFRleHREb2N1bWVudDIuY3JlYXRlID0gY3JlYXRlO1xyXG4gIGZ1bmN0aW9uIGlzKHZhbHVlKSB7XHJcbiAgICBsZXQgY2FuZGlkYXRlID0gdmFsdWU7XHJcbiAgICByZXR1cm4gSXMuZGVmaW5lZChjYW5kaWRhdGUpICYmIElzLnN0cmluZyhjYW5kaWRhdGUudXJpKSAmJiAoSXMudW5kZWZpbmVkKGNhbmRpZGF0ZS5sYW5ndWFnZUlkKSB8fCBJcy5zdHJpbmcoY2FuZGlkYXRlLmxhbmd1YWdlSWQpKSAmJiBJcy51aW50ZWdlcihjYW5kaWRhdGUubGluZUNvdW50KSAmJiBJcy5mdW5jKGNhbmRpZGF0ZS5nZXRUZXh0KSAmJiBJcy5mdW5jKGNhbmRpZGF0ZS5wb3NpdGlvbkF0KSAmJiBJcy5mdW5jKGNhbmRpZGF0ZS5vZmZzZXRBdCkgPyB0cnVlIDogZmFsc2U7XHJcbiAgfVxyXG4gIFRleHREb2N1bWVudDIuaXMgPSBpcztcclxuICBmdW5jdGlvbiBhcHBseUVkaXRzKGRvY3VtZW50LCBlZGl0cykge1xyXG4gICAgbGV0IHRleHQgPSBkb2N1bWVudC5nZXRUZXh0KCk7XHJcbiAgICBsZXQgc29ydGVkRWRpdHMgPSBtZXJnZVNvcnQoZWRpdHMsIChhLCBiKSA9PiB7XHJcbiAgICAgIGxldCBkaWZmID0gYS5yYW5nZS5zdGFydC5saW5lIC0gYi5yYW5nZS5zdGFydC5saW5lO1xyXG4gICAgICBpZiAoZGlmZiA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybiBhLnJhbmdlLnN0YXJ0LmNoYXJhY3RlciAtIGIucmFuZ2Uuc3RhcnQuY2hhcmFjdGVyO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBkaWZmO1xyXG4gICAgfSk7XHJcbiAgICBsZXQgbGFzdE1vZGlmaWVkT2Zmc2V0ID0gdGV4dC5sZW5ndGg7XHJcbiAgICBmb3IgKGxldCBpID0gc29ydGVkRWRpdHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgbGV0IGUgPSBzb3J0ZWRFZGl0c1tpXTtcclxuICAgICAgbGV0IHN0YXJ0T2Zmc2V0ID0gZG9jdW1lbnQub2Zmc2V0QXQoZS5yYW5nZS5zdGFydCk7XHJcbiAgICAgIGxldCBlbmRPZmZzZXQgPSBkb2N1bWVudC5vZmZzZXRBdChlLnJhbmdlLmVuZCk7XHJcbiAgICAgIGlmIChlbmRPZmZzZXQgPD0gbGFzdE1vZGlmaWVkT2Zmc2V0KSB7XHJcbiAgICAgICAgdGV4dCA9IHRleHQuc3Vic3RyaW5nKDAsIHN0YXJ0T2Zmc2V0KSArIGUubmV3VGV4dCArIHRleHQuc3Vic3RyaW5nKGVuZE9mZnNldCwgdGV4dC5sZW5ndGgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk92ZXJsYXBwaW5nIGVkaXRcIik7XHJcbiAgICAgIH1cclxuICAgICAgbGFzdE1vZGlmaWVkT2Zmc2V0ID0gc3RhcnRPZmZzZXQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGV4dDtcclxuICB9XHJcbiAgVGV4dERvY3VtZW50Mi5hcHBseUVkaXRzID0gYXBwbHlFZGl0cztcclxuICBmdW5jdGlvbiBtZXJnZVNvcnQoZGF0YSwgY29tcGFyZSkge1xyXG4gICAgaWYgKGRhdGEubGVuZ3RoIDw9IDEpIHtcclxuICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcbiAgICBjb25zdCBwID0gZGF0YS5sZW5ndGggLyAyIHwgMDtcclxuICAgIGNvbnN0IGxlZnQgPSBkYXRhLnNsaWNlKDAsIHApO1xyXG4gICAgY29uc3QgcmlnaHQgPSBkYXRhLnNsaWNlKHApO1xyXG4gICAgbWVyZ2VTb3J0KGxlZnQsIGNvbXBhcmUpO1xyXG4gICAgbWVyZ2VTb3J0KHJpZ2h0LCBjb21wYXJlKTtcclxuICAgIGxldCBsZWZ0SWR4ID0gMDtcclxuICAgIGxldCByaWdodElkeCA9IDA7XHJcbiAgICBsZXQgaSA9IDA7XHJcbiAgICB3aGlsZSAobGVmdElkeCA8IGxlZnQubGVuZ3RoICYmIHJpZ2h0SWR4IDwgcmlnaHQubGVuZ3RoKSB7XHJcbiAgICAgIGxldCByZXQgPSBjb21wYXJlKGxlZnRbbGVmdElkeF0sIHJpZ2h0W3JpZ2h0SWR4XSk7XHJcbiAgICAgIGlmIChyZXQgPD0gMCkge1xyXG4gICAgICAgIGRhdGFbaSsrXSA9IGxlZnRbbGVmdElkeCsrXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBkYXRhW2krK10gPSByaWdodFtyaWdodElkeCsrXTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgd2hpbGUgKGxlZnRJZHggPCBsZWZ0Lmxlbmd0aCkge1xyXG4gICAgICBkYXRhW2krK10gPSBsZWZ0W2xlZnRJZHgrK107XHJcbiAgICB9XHJcbiAgICB3aGlsZSAocmlnaHRJZHggPCByaWdodC5sZW5ndGgpIHtcclxuICAgICAgZGF0YVtpKytdID0gcmlnaHRbcmlnaHRJZHgrK107XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZGF0YTtcclxuICB9XHJcbn0pKFRleHREb2N1bWVudCB8fCAoVGV4dERvY3VtZW50ID0ge30pKTtcclxudmFyIEZ1bGxUZXh0RG9jdW1lbnQgPSBjbGFzcyB7XHJcbiAgY29uc3RydWN0b3IodXJpLCBsYW5ndWFnZUlkLCB2ZXJzaW9uLCBjb250ZW50KSB7XHJcbiAgICB0aGlzLl91cmkgPSB1cmk7XHJcbiAgICB0aGlzLl9sYW5ndWFnZUlkID0gbGFuZ3VhZ2VJZDtcclxuICAgIHRoaXMuX3ZlcnNpb24gPSB2ZXJzaW9uO1xyXG4gICAgdGhpcy5fY29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICB0aGlzLl9saW5lT2Zmc2V0cyA9IHZvaWQgMDtcclxuICB9XHJcbiAgZ2V0IHVyaSgpIHtcclxuICAgIHJldHVybiB0aGlzLl91cmk7XHJcbiAgfVxyXG4gIGdldCBsYW5ndWFnZUlkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2xhbmd1YWdlSWQ7XHJcbiAgfVxyXG4gIGdldCB2ZXJzaW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3ZlcnNpb247XHJcbiAgfVxyXG4gIGdldFRleHQocmFuZ2UpIHtcclxuICAgIGlmIChyYW5nZSkge1xyXG4gICAgICBsZXQgc3RhcnQgPSB0aGlzLm9mZnNldEF0KHJhbmdlLnN0YXJ0KTtcclxuICAgICAgbGV0IGVuZCA9IHRoaXMub2Zmc2V0QXQocmFuZ2UuZW5kKTtcclxuICAgICAgcmV0dXJuIHRoaXMuX2NvbnRlbnQuc3Vic3RyaW5nKHN0YXJ0LCBlbmQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuX2NvbnRlbnQ7XHJcbiAgfVxyXG4gIHVwZGF0ZShldmVudCwgdmVyc2lvbikge1xyXG4gICAgdGhpcy5fY29udGVudCA9IGV2ZW50LnRleHQ7XHJcbiAgICB0aGlzLl92ZXJzaW9uID0gdmVyc2lvbjtcclxuICAgIHRoaXMuX2xpbmVPZmZzZXRzID0gdm9pZCAwO1xyXG4gIH1cclxuICBnZXRMaW5lT2Zmc2V0cygpIHtcclxuICAgIGlmICh0aGlzLl9saW5lT2Zmc2V0cyA9PT0gdm9pZCAwKSB7XHJcbiAgICAgIGxldCBsaW5lT2Zmc2V0cyA9IFtdO1xyXG4gICAgICBsZXQgdGV4dCA9IHRoaXMuX2NvbnRlbnQ7XHJcbiAgICAgIGxldCBpc0xpbmVTdGFydCA9IHRydWU7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGV4dC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChpc0xpbmVTdGFydCkge1xyXG4gICAgICAgICAgbGluZU9mZnNldHMucHVzaChpKTtcclxuICAgICAgICAgIGlzTGluZVN0YXJ0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBjaCA9IHRleHQuY2hhckF0KGkpO1xyXG4gICAgICAgIGlzTGluZVN0YXJ0ID0gY2ggPT09IFwiXFxyXCIgfHwgY2ggPT09IFwiXFxuXCI7XHJcbiAgICAgICAgaWYgKGNoID09PSBcIlxcclwiICYmIGkgKyAxIDwgdGV4dC5sZW5ndGggJiYgdGV4dC5jaGFyQXQoaSArIDEpID09PSBcIlxcblwiKSB7XHJcbiAgICAgICAgICBpKys7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIGlmIChpc0xpbmVTdGFydCAmJiB0ZXh0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICBsaW5lT2Zmc2V0cy5wdXNoKHRleHQubGVuZ3RoKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLl9saW5lT2Zmc2V0cyA9IGxpbmVPZmZzZXRzO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXMuX2xpbmVPZmZzZXRzO1xyXG4gIH1cclxuICBwb3NpdGlvbkF0KG9mZnNldCkge1xyXG4gICAgb2Zmc2V0ID0gTWF0aC5tYXgoTWF0aC5taW4ob2Zmc2V0LCB0aGlzLl9jb250ZW50Lmxlbmd0aCksIDApO1xyXG4gICAgbGV0IGxpbmVPZmZzZXRzID0gdGhpcy5nZXRMaW5lT2Zmc2V0cygpO1xyXG4gICAgbGV0IGxvdyA9IDAsIGhpZ2ggPSBsaW5lT2Zmc2V0cy5sZW5ndGg7XHJcbiAgICBpZiAoaGlnaCA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gUG9zaXRpb24uY3JlYXRlKDAsIG9mZnNldCk7XHJcbiAgICB9XHJcbiAgICB3aGlsZSAobG93IDwgaGlnaCkge1xyXG4gICAgICBsZXQgbWlkID0gTWF0aC5mbG9vcigobG93ICsgaGlnaCkgLyAyKTtcclxuICAgICAgaWYgKGxpbmVPZmZzZXRzW21pZF0gPiBvZmZzZXQpIHtcclxuICAgICAgICBoaWdoID0gbWlkO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxvdyA9IG1pZCArIDE7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGxldCBsaW5lID0gbG93IC0gMTtcclxuICAgIHJldHVybiBQb3NpdGlvbi5jcmVhdGUobGluZSwgb2Zmc2V0IC0gbGluZU9mZnNldHNbbGluZV0pO1xyXG4gIH1cclxuICBvZmZzZXRBdChwb3NpdGlvbikge1xyXG4gICAgbGV0IGxpbmVPZmZzZXRzID0gdGhpcy5nZXRMaW5lT2Zmc2V0cygpO1xyXG4gICAgaWYgKHBvc2l0aW9uLmxpbmUgPj0gbGluZU9mZnNldHMubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl9jb250ZW50Lmxlbmd0aDtcclxuICAgIH0gZWxzZSBpZiAocG9zaXRpb24ubGluZSA8IDApIHtcclxuICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcbiAgICBsZXQgbGluZU9mZnNldCA9IGxpbmVPZmZzZXRzW3Bvc2l0aW9uLmxpbmVdO1xyXG4gICAgbGV0IG5leHRMaW5lT2Zmc2V0ID0gcG9zaXRpb24ubGluZSArIDEgPCBsaW5lT2Zmc2V0cy5sZW5ndGggPyBsaW5lT2Zmc2V0c1twb3NpdGlvbi5saW5lICsgMV0gOiB0aGlzLl9jb250ZW50Lmxlbmd0aDtcclxuICAgIHJldHVybiBNYXRoLm1heChNYXRoLm1pbihsaW5lT2Zmc2V0ICsgcG9zaXRpb24uY2hhcmFjdGVyLCBuZXh0TGluZU9mZnNldCksIGxpbmVPZmZzZXQpO1xyXG4gIH1cclxuICBnZXQgbGluZUNvdW50KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZ2V0TGluZU9mZnNldHMoKS5sZW5ndGg7XHJcbiAgfVxyXG59O1xyXG52YXIgSXM7XHJcbihmdW5jdGlvbihJczIpIHtcclxuICBjb25zdCB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XHJcbiAgZnVuY3Rpb24gZGVmaW5lZCh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSAhPT0gXCJ1bmRlZmluZWRcIjtcclxuICB9XHJcbiAgSXMyLmRlZmluZWQgPSBkZWZpbmVkO1xyXG4gIGZ1bmN0aW9uIHVuZGVmaW5lZDIodmFsdWUpIHtcclxuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwidW5kZWZpbmVkXCI7XHJcbiAgfVxyXG4gIElzMi51bmRlZmluZWQgPSB1bmRlZmluZWQyO1xyXG4gIGZ1bmN0aW9uIGJvb2xlYW4odmFsdWUpIHtcclxuICAgIHJldHVybiB2YWx1ZSA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gZmFsc2U7XHJcbiAgfVxyXG4gIElzMi5ib29sZWFuID0gYm9vbGVhbjtcclxuICBmdW5jdGlvbiBzdHJpbmcodmFsdWUpIHtcclxuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gXCJbb2JqZWN0IFN0cmluZ11cIjtcclxuICB9XHJcbiAgSXMyLnN0cmluZyA9IHN0cmluZztcclxuICBmdW5jdGlvbiBudW1iZXIodmFsdWUpIHtcclxuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gXCJbb2JqZWN0IE51bWJlcl1cIjtcclxuICB9XHJcbiAgSXMyLm51bWJlciA9IG51bWJlcjtcclxuICBmdW5jdGlvbiBudW1iZXJSYW5nZSh2YWx1ZSwgbWluLCBtYXgpIHtcclxuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gXCJbb2JqZWN0IE51bWJlcl1cIiAmJiBtaW4gPD0gdmFsdWUgJiYgdmFsdWUgPD0gbWF4O1xyXG4gIH1cclxuICBJczIubnVtYmVyUmFuZ2UgPSBudW1iZXJSYW5nZTtcclxuICBmdW5jdGlvbiBpbnRlZ2VyMih2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSBcIltvYmplY3QgTnVtYmVyXVwiICYmIC0yMTQ3NDgzNjQ4IDw9IHZhbHVlICYmIHZhbHVlIDw9IDIxNDc0ODM2NDc7XHJcbiAgfVxyXG4gIElzMi5pbnRlZ2VyID0gaW50ZWdlcjI7XHJcbiAgZnVuY3Rpb24gdWludGVnZXIyKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09IFwiW29iamVjdCBOdW1iZXJdXCIgJiYgMCA8PSB2YWx1ZSAmJiB2YWx1ZSA8PSAyMTQ3NDgzNjQ3O1xyXG4gIH1cclxuICBJczIudWludGVnZXIgPSB1aW50ZWdlcjI7XHJcbiAgZnVuY3Rpb24gZnVuYyh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSBcIltvYmplY3QgRnVuY3Rpb25dXCI7XHJcbiAgfVxyXG4gIElzMi5mdW5jID0gZnVuYztcclxuICBmdW5jdGlvbiBvYmplY3RMaXRlcmFsKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gdmFsdWUgIT09IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiO1xyXG4gIH1cclxuICBJczIub2JqZWN0TGl0ZXJhbCA9IG9iamVjdExpdGVyYWw7XHJcbiAgZnVuY3Rpb24gdHlwZWRBcnJheSh2YWx1ZSwgY2hlY2spIHtcclxuICAgIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5ldmVyeShjaGVjayk7XHJcbiAgfVxyXG4gIElzMi50eXBlZEFycmF5ID0gdHlwZWRBcnJheTtcclxufSkoSXMgfHwgKElzID0ge30pKTtcclxuXHJcbi8vIHNyYy9sYW5ndWFnZS9jb21tb24vbHNwTGFuZ3VhZ2VGZWF0dXJlcy50c1xyXG52YXIgRGlhZ25vc3RpY3NBZGFwdGVyID0gY2xhc3Mge1xyXG4gIGNvbnN0cnVjdG9yKF9sYW5ndWFnZUlkLCBfd29ya2VyLCBjb25maWdDaGFuZ2VFdmVudCkge1xyXG4gICAgdGhpcy5fbGFuZ3VhZ2VJZCA9IF9sYW5ndWFnZUlkO1xyXG4gICAgdGhpcy5fd29ya2VyID0gX3dvcmtlcjtcclxuICAgIHRoaXMuX2Rpc3Bvc2FibGVzID0gW107XHJcbiAgICB0aGlzLl9saXN0ZW5lciA9IC8qIEBfX1BVUkVfXyAqLyBPYmplY3QuY3JlYXRlKG51bGwpO1xyXG4gICAgY29uc3Qgb25Nb2RlbEFkZCA9IChtb2RlbCkgPT4ge1xyXG4gICAgICBsZXQgbW9kZUlkID0gbW9kZWwuZ2V0TGFuZ3VhZ2VJZCgpO1xyXG4gICAgICBpZiAobW9kZUlkICE9PSB0aGlzLl9sYW5ndWFnZUlkKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGxldCBoYW5kbGU7XHJcbiAgICAgIHRoaXMuX2xpc3RlbmVyW21vZGVsLnVyaS50b1N0cmluZygpXSA9IG1vZGVsLm9uRGlkQ2hhbmdlQ29udGVudCgoKSA9PiB7XHJcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChoYW5kbGUpO1xyXG4gICAgICAgIGhhbmRsZSA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHRoaXMuX2RvVmFsaWRhdGUobW9kZWwudXJpLCBtb2RlSWQpLCA1MDApO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5fZG9WYWxpZGF0ZShtb2RlbC51cmksIG1vZGVJZCk7XHJcbiAgICB9O1xyXG4gICAgY29uc3Qgb25Nb2RlbFJlbW92ZWQgPSAobW9kZWwpID0+IHtcclxuICAgICAgbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMuZWRpdG9yLnNldE1vZGVsTWFya2Vycyhtb2RlbCwgdGhpcy5fbGFuZ3VhZ2VJZCwgW10pO1xyXG4gICAgICBsZXQgdXJpU3RyID0gbW9kZWwudXJpLnRvU3RyaW5nKCk7XHJcbiAgICAgIGxldCBsaXN0ZW5lciA9IHRoaXMuX2xpc3RlbmVyW3VyaVN0cl07XHJcbiAgICAgIGlmIChsaXN0ZW5lcikge1xyXG4gICAgICAgIGxpc3RlbmVyLmRpc3Bvc2UoKTtcclxuICAgICAgICBkZWxldGUgdGhpcy5fbGlzdGVuZXJbdXJpU3RyXTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMuX2Rpc3Bvc2FibGVzLnB1c2gobW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMuZWRpdG9yLm9uRGlkQ3JlYXRlTW9kZWwob25Nb2RlbEFkZCkpO1xyXG4gICAgdGhpcy5fZGlzcG9zYWJsZXMucHVzaChtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5lZGl0b3Iub25XaWxsRGlzcG9zZU1vZGVsKG9uTW9kZWxSZW1vdmVkKSk7XHJcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKFxyXG4gICAgICBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5lZGl0b3Iub25EaWRDaGFuZ2VNb2RlbExhbmd1YWdlKChldmVudCkgPT4ge1xyXG4gICAgICAgIG9uTW9kZWxSZW1vdmVkKGV2ZW50Lm1vZGVsKTtcclxuICAgICAgICBvbk1vZGVsQWRkKGV2ZW50Lm1vZGVsKTtcclxuICAgICAgfSlcclxuICAgICk7XHJcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5wdXNoKFxyXG4gICAgICBjb25maWdDaGFuZ2VFdmVudCgoXykgPT4ge1xyXG4gICAgICAgIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmVkaXRvci5nZXRNb2RlbHMoKS5mb3JFYWNoKChtb2RlbCkgPT4ge1xyXG4gICAgICAgICAgaWYgKG1vZGVsLmdldExhbmd1YWdlSWQoKSA9PT0gdGhpcy5fbGFuZ3VhZ2VJZCkge1xyXG4gICAgICAgICAgICBvbk1vZGVsUmVtb3ZlZChtb2RlbCk7XHJcbiAgICAgICAgICAgIG9uTW9kZWxBZGQobW9kZWwpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9KVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2Rpc3Bvc2FibGVzLnB1c2goe1xyXG4gICAgICBkaXNwb3NlOiAoKSA9PiB7XHJcbiAgICAgICAgbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMuZWRpdG9yLmdldE1vZGVscygpLmZvckVhY2gob25Nb2RlbFJlbW92ZWQpO1xyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLl9saXN0ZW5lcikge1xyXG4gICAgICAgICAgdGhpcy5fbGlzdGVuZXJba2V5XS5kaXNwb3NlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmVkaXRvci5nZXRNb2RlbHMoKS5mb3JFYWNoKG9uTW9kZWxBZGQpO1xyXG4gIH1cclxuICBkaXNwb3NlKCkge1xyXG4gICAgdGhpcy5fZGlzcG9zYWJsZXMuZm9yRWFjaCgoZCkgPT4gZCAmJiBkLmRpc3Bvc2UoKSk7XHJcbiAgICB0aGlzLl9kaXNwb3NhYmxlcy5sZW5ndGggPSAwO1xyXG4gIH1cclxuICBfZG9WYWxpZGF0ZShyZXNvdXJjZSwgbGFuZ3VhZ2VJZCkge1xyXG4gICAgdGhpcy5fd29ya2VyKHJlc291cmNlKS50aGVuKCh3b3JrZXIpID0+IHtcclxuICAgICAgcmV0dXJuIHdvcmtlci5kb1ZhbGlkYXRpb24ocmVzb3VyY2UudG9TdHJpbmcoKSk7XHJcbiAgICB9KS50aGVuKChkaWFnbm9zdGljcykgPT4ge1xyXG4gICAgICBjb25zdCBtYXJrZXJzID0gZGlhZ25vc3RpY3MubWFwKChkKSA9PiB0b0RpYWdub3N0aWNzKHJlc291cmNlLCBkKSk7XHJcbiAgICAgIGxldCBtb2RlbCA9IG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmVkaXRvci5nZXRNb2RlbChyZXNvdXJjZSk7XHJcbiAgICAgIGlmIChtb2RlbCAmJiBtb2RlbC5nZXRMYW5ndWFnZUlkKCkgPT09IGxhbmd1YWdlSWQpIHtcclxuICAgICAgICBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5lZGl0b3Iuc2V0TW9kZWxNYXJrZXJzKG1vZGVsLCBsYW5ndWFnZUlkLCBtYXJrZXJzKTtcclxuICAgICAgfVxyXG4gICAgfSkudGhlbih2b2lkIDAsIChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59O1xyXG5mdW5jdGlvbiB0b1NldmVyaXR5KGxzU2V2ZXJpdHkpIHtcclxuICBzd2l0Y2ggKGxzU2V2ZXJpdHkpIHtcclxuICAgIGNhc2UgRGlhZ25vc3RpY1NldmVyaXR5LkVycm9yOlxyXG4gICAgICByZXR1cm4gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMuTWFya2VyU2V2ZXJpdHkuRXJyb3I7XHJcbiAgICBjYXNlIERpYWdub3N0aWNTZXZlcml0eS5XYXJuaW5nOlxyXG4gICAgICByZXR1cm4gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMuTWFya2VyU2V2ZXJpdHkuV2FybmluZztcclxuICAgIGNhc2UgRGlhZ25vc3RpY1NldmVyaXR5LkluZm9ybWF0aW9uOlxyXG4gICAgICByZXR1cm4gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMuTWFya2VyU2V2ZXJpdHkuSW5mbztcclxuICAgIGNhc2UgRGlhZ25vc3RpY1NldmVyaXR5LkhpbnQ6XHJcbiAgICAgIHJldHVybiBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5NYXJrZXJTZXZlcml0eS5IaW50O1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgcmV0dXJuIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLk1hcmtlclNldmVyaXR5LkluZm87XHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIHRvRGlhZ25vc3RpY3MocmVzb3VyY2UsIGRpYWcpIHtcclxuICBsZXQgY29kZSA9IHR5cGVvZiBkaWFnLmNvZGUgPT09IFwibnVtYmVyXCIgPyBTdHJpbmcoZGlhZy5jb2RlKSA6IGRpYWcuY29kZTtcclxuICByZXR1cm4ge1xyXG4gICAgc2V2ZXJpdHk6IHRvU2V2ZXJpdHkoZGlhZy5zZXZlcml0eSksXHJcbiAgICBzdGFydExpbmVOdW1iZXI6IGRpYWcucmFuZ2Uuc3RhcnQubGluZSArIDEsXHJcbiAgICBzdGFydENvbHVtbjogZGlhZy5yYW5nZS5zdGFydC5jaGFyYWN0ZXIgKyAxLFxyXG4gICAgZW5kTGluZU51bWJlcjogZGlhZy5yYW5nZS5lbmQubGluZSArIDEsXHJcbiAgICBlbmRDb2x1bW46IGRpYWcucmFuZ2UuZW5kLmNoYXJhY3RlciArIDEsXHJcbiAgICBtZXNzYWdlOiBkaWFnLm1lc3NhZ2UsXHJcbiAgICBjb2RlLFxyXG4gICAgc291cmNlOiBkaWFnLnNvdXJjZVxyXG4gIH07XHJcbn1cclxudmFyIENvbXBsZXRpb25BZGFwdGVyID0gY2xhc3Mge1xyXG4gIGNvbnN0cnVjdG9yKF93b3JrZXIsIF90cmlnZ2VyQ2hhcmFjdGVycykge1xyXG4gICAgdGhpcy5fd29ya2VyID0gX3dvcmtlcjtcclxuICAgIHRoaXMuX3RyaWdnZXJDaGFyYWN0ZXJzID0gX3RyaWdnZXJDaGFyYWN0ZXJzO1xyXG4gIH1cclxuICBnZXQgdHJpZ2dlckNoYXJhY3RlcnMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fdHJpZ2dlckNoYXJhY3RlcnM7XHJcbiAgfVxyXG4gIHByb3ZpZGVDb21wbGV0aW9uSXRlbXMobW9kZWwsIHBvc2l0aW9uLCBjb250ZXh0LCB0b2tlbikge1xyXG4gICAgY29uc3QgcmVzb3VyY2UgPSBtb2RlbC51cmk7XHJcbiAgICByZXR1cm4gdGhpcy5fd29ya2VyKHJlc291cmNlKS50aGVuKCh3b3JrZXIpID0+IHtcclxuICAgICAgcmV0dXJuIHdvcmtlci5kb0NvbXBsZXRlKHJlc291cmNlLnRvU3RyaW5nKCksIGZyb21Qb3NpdGlvbihwb3NpdGlvbikpO1xyXG4gICAgfSkudGhlbigoaW5mbykgPT4ge1xyXG4gICAgICBpZiAoIWluZm8pIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgY29uc3Qgd29yZEluZm8gPSBtb2RlbC5nZXRXb3JkVW50aWxQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgICAgIGNvbnN0IHdvcmRSYW5nZSA9IG5ldyBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5SYW5nZShcclxuICAgICAgICBwb3NpdGlvbi5saW5lTnVtYmVyLFxyXG4gICAgICAgIHdvcmRJbmZvLnN0YXJ0Q29sdW1uLFxyXG4gICAgICAgIHBvc2l0aW9uLmxpbmVOdW1iZXIsXHJcbiAgICAgICAgd29yZEluZm8uZW5kQ29sdW1uXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IGl0ZW1zID0gaW5mby5pdGVtcy5tYXAoKGVudHJ5KSA9PiB7XHJcbiAgICAgICAgY29uc3QgaXRlbSA9IHtcclxuICAgICAgICAgIGxhYmVsOiBlbnRyeS5sYWJlbCxcclxuICAgICAgICAgIGluc2VydFRleHQ6IGVudHJ5Lmluc2VydFRleHQgfHwgZW50cnkubGFiZWwsXHJcbiAgICAgICAgICBzb3J0VGV4dDogZW50cnkuc29ydFRleHQsXHJcbiAgICAgICAgICBmaWx0ZXJUZXh0OiBlbnRyeS5maWx0ZXJUZXh0LFxyXG4gICAgICAgICAgZG9jdW1lbnRhdGlvbjogZW50cnkuZG9jdW1lbnRhdGlvbixcclxuICAgICAgICAgIGRldGFpbDogZW50cnkuZGV0YWlsLFxyXG4gICAgICAgICAgY29tbWFuZDogdG9Db21tYW5kKGVudHJ5LmNvbW1hbmQpLFxyXG4gICAgICAgICAgcmFuZ2U6IHdvcmRSYW5nZSxcclxuICAgICAgICAgIGtpbmQ6IHRvQ29tcGxldGlvbkl0ZW1LaW5kKGVudHJ5LmtpbmQpXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoZW50cnkudGV4dEVkaXQpIHtcclxuICAgICAgICAgIGlmIChpc0luc2VydFJlcGxhY2VFZGl0KGVudHJ5LnRleHRFZGl0KSkge1xyXG4gICAgICAgICAgICBpdGVtLnJhbmdlID0ge1xyXG4gICAgICAgICAgICAgIGluc2VydDogdG9SYW5nZShlbnRyeS50ZXh0RWRpdC5pbnNlcnQpLFxyXG4gICAgICAgICAgICAgIHJlcGxhY2U6IHRvUmFuZ2UoZW50cnkudGV4dEVkaXQucmVwbGFjZSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGl0ZW0ucmFuZ2UgPSB0b1JhbmdlKGVudHJ5LnRleHRFZGl0LnJhbmdlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGl0ZW0uaW5zZXJ0VGV4dCA9IGVudHJ5LnRleHRFZGl0Lm5ld1RleHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlbnRyeS5hZGRpdGlvbmFsVGV4dEVkaXRzKSB7XHJcbiAgICAgICAgICBpdGVtLmFkZGl0aW9uYWxUZXh0RWRpdHMgPSBlbnRyeS5hZGRpdGlvbmFsVGV4dEVkaXRzLm1hcCh0b1RleHRFZGl0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGVudHJ5Lmluc2VydFRleHRGb3JtYXQgPT09IEluc2VydFRleHRGb3JtYXQuU25pcHBldCkge1xyXG4gICAgICAgICAgaXRlbS5pbnNlcnRUZXh0UnVsZXMgPSBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMuQ29tcGxldGlvbkl0ZW1JbnNlcnRUZXh0UnVsZS5JbnNlcnRBc1NuaXBwZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBpc0luY29tcGxldGU6IGluZm8uaXNJbmNvbXBsZXRlLFxyXG4gICAgICAgIHN1Z2dlc3Rpb25zOiBpdGVtc1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfVxyXG59O1xyXG5mdW5jdGlvbiBmcm9tUG9zaXRpb24ocG9zaXRpb24pIHtcclxuICBpZiAoIXBvc2l0aW9uKSB7XHJcbiAgICByZXR1cm4gdm9pZCAwO1xyXG4gIH1cclxuICByZXR1cm4geyBjaGFyYWN0ZXI6IHBvc2l0aW9uLmNvbHVtbiAtIDEsIGxpbmU6IHBvc2l0aW9uLmxpbmVOdW1iZXIgLSAxIH07XHJcbn1cclxuZnVuY3Rpb24gZnJvbVJhbmdlKHJhbmdlKSB7XHJcbiAgaWYgKCFyYW5nZSkge1xyXG4gICAgcmV0dXJuIHZvaWQgMDtcclxuICB9XHJcbiAgcmV0dXJuIHtcclxuICAgIHN0YXJ0OiB7XHJcbiAgICAgIGxpbmU6IHJhbmdlLnN0YXJ0TGluZU51bWJlciAtIDEsXHJcbiAgICAgIGNoYXJhY3RlcjogcmFuZ2Uuc3RhcnRDb2x1bW4gLSAxXHJcbiAgICB9LFxyXG4gICAgZW5kOiB7IGxpbmU6IHJhbmdlLmVuZExpbmVOdW1iZXIgLSAxLCBjaGFyYWN0ZXI6IHJhbmdlLmVuZENvbHVtbiAtIDEgfVxyXG4gIH07XHJcbn1cclxuZnVuY3Rpb24gdG9SYW5nZShyYW5nZSkge1xyXG4gIGlmICghcmFuZ2UpIHtcclxuICAgIHJldHVybiB2b2lkIDA7XHJcbiAgfVxyXG4gIHJldHVybiBuZXcgbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMuUmFuZ2UoXHJcbiAgICByYW5nZS5zdGFydC5saW5lICsgMSxcclxuICAgIHJhbmdlLnN0YXJ0LmNoYXJhY3RlciArIDEsXHJcbiAgICByYW5nZS5lbmQubGluZSArIDEsXHJcbiAgICByYW5nZS5lbmQuY2hhcmFjdGVyICsgMVxyXG4gICk7XHJcbn1cclxuZnVuY3Rpb24gaXNJbnNlcnRSZXBsYWNlRWRpdChlZGl0KSB7XHJcbiAgcmV0dXJuIHR5cGVvZiBlZGl0Lmluc2VydCAhPT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgZWRpdC5yZXBsYWNlICE9PSBcInVuZGVmaW5lZFwiO1xyXG59XHJcbmZ1bmN0aW9uIHRvQ29tcGxldGlvbkl0ZW1LaW5kKGtpbmQpIHtcclxuICBjb25zdCBtSXRlbUtpbmQgPSBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMuQ29tcGxldGlvbkl0ZW1LaW5kO1xyXG4gIHN3aXRjaCAoa2luZCkge1xyXG4gICAgY2FzZSBDb21wbGV0aW9uSXRlbUtpbmQuVGV4dDpcclxuICAgICAgcmV0dXJuIG1JdGVtS2luZC5UZXh0O1xyXG4gICAgY2FzZSBDb21wbGV0aW9uSXRlbUtpbmQuTWV0aG9kOlxyXG4gICAgICByZXR1cm4gbUl0ZW1LaW5kLk1ldGhvZDtcclxuICAgIGNhc2UgQ29tcGxldGlvbkl0ZW1LaW5kLkZ1bmN0aW9uOlxyXG4gICAgICByZXR1cm4gbUl0ZW1LaW5kLkZ1bmN0aW9uO1xyXG4gICAgY2FzZSBDb21wbGV0aW9uSXRlbUtpbmQuQ29uc3RydWN0b3I6XHJcbiAgICAgIHJldHVybiBtSXRlbUtpbmQuQ29uc3RydWN0b3I7XHJcbiAgICBjYXNlIENvbXBsZXRpb25JdGVtS2luZC5GaWVsZDpcclxuICAgICAgcmV0dXJuIG1JdGVtS2luZC5GaWVsZDtcclxuICAgIGNhc2UgQ29tcGxldGlvbkl0ZW1LaW5kLlZhcmlhYmxlOlxyXG4gICAgICByZXR1cm4gbUl0ZW1LaW5kLlZhcmlhYmxlO1xyXG4gICAgY2FzZSBDb21wbGV0aW9uSXRlbUtpbmQuQ2xhc3M6XHJcbiAgICAgIHJldHVybiBtSXRlbUtpbmQuQ2xhc3M7XHJcbiAgICBjYXNlIENvbXBsZXRpb25JdGVtS2luZC5JbnRlcmZhY2U6XHJcbiAgICAgIHJldHVybiBtSXRlbUtpbmQuSW50ZXJmYWNlO1xyXG4gICAgY2FzZSBDb21wbGV0aW9uSXRlbUtpbmQuTW9kdWxlOlxyXG4gICAgICByZXR1cm4gbUl0ZW1LaW5kLk1vZHVsZTtcclxuICAgIGNhc2UgQ29tcGxldGlvbkl0ZW1LaW5kLlByb3BlcnR5OlxyXG4gICAgICByZXR1cm4gbUl0ZW1LaW5kLlByb3BlcnR5O1xyXG4gICAgY2FzZSBDb21wbGV0aW9uSXRlbUtpbmQuVW5pdDpcclxuICAgICAgcmV0dXJuIG1JdGVtS2luZC5Vbml0O1xyXG4gICAgY2FzZSBDb21wbGV0aW9uSXRlbUtpbmQuVmFsdWU6XHJcbiAgICAgIHJldHVybiBtSXRlbUtpbmQuVmFsdWU7XHJcbiAgICBjYXNlIENvbXBsZXRpb25JdGVtS2luZC5FbnVtOlxyXG4gICAgICByZXR1cm4gbUl0ZW1LaW5kLkVudW07XHJcbiAgICBjYXNlIENvbXBsZXRpb25JdGVtS2luZC5LZXl3b3JkOlxyXG4gICAgICByZXR1cm4gbUl0ZW1LaW5kLktleXdvcmQ7XHJcbiAgICBjYXNlIENvbXBsZXRpb25JdGVtS2luZC5TbmlwcGV0OlxyXG4gICAgICByZXR1cm4gbUl0ZW1LaW5kLlNuaXBwZXQ7XHJcbiAgICBjYXNlIENvbXBsZXRpb25JdGVtS2luZC5Db2xvcjpcclxuICAgICAgcmV0dXJuIG1JdGVtS2luZC5Db2xvcjtcclxuICAgIGNhc2UgQ29tcGxldGlvbkl0ZW1LaW5kLkZpbGU6XHJcbiAgICAgIHJldHVybiBtSXRlbUtpbmQuRmlsZTtcclxuICAgIGNhc2UgQ29tcGxldGlvbkl0ZW1LaW5kLlJlZmVyZW5jZTpcclxuICAgICAgcmV0dXJuIG1JdGVtS2luZC5SZWZlcmVuY2U7XHJcbiAgfVxyXG4gIHJldHVybiBtSXRlbUtpbmQuUHJvcGVydHk7XHJcbn1cclxuZnVuY3Rpb24gdG9UZXh0RWRpdCh0ZXh0RWRpdCkge1xyXG4gIGlmICghdGV4dEVkaXQpIHtcclxuICAgIHJldHVybiB2b2lkIDA7XHJcbiAgfVxyXG4gIHJldHVybiB7XHJcbiAgICByYW5nZTogdG9SYW5nZSh0ZXh0RWRpdC5yYW5nZSksXHJcbiAgICB0ZXh0OiB0ZXh0RWRpdC5uZXdUZXh0XHJcbiAgfTtcclxufVxyXG5mdW5jdGlvbiB0b0NvbW1hbmQoYykge1xyXG4gIHJldHVybiBjICYmIGMuY29tbWFuZCA9PT0gXCJlZGl0b3IuYWN0aW9uLnRyaWdnZXJTdWdnZXN0XCIgPyB7IGlkOiBjLmNvbW1hbmQsIHRpdGxlOiBjLnRpdGxlLCBhcmd1bWVudHM6IGMuYXJndW1lbnRzIH0gOiB2b2lkIDA7XHJcbn1cclxudmFyIEhvdmVyQWRhcHRlciA9IGNsYXNzIHtcclxuICBjb25zdHJ1Y3Rvcihfd29ya2VyKSB7XHJcbiAgICB0aGlzLl93b3JrZXIgPSBfd29ya2VyO1xyXG4gIH1cclxuICBwcm92aWRlSG92ZXIobW9kZWwsIHBvc2l0aW9uLCB0b2tlbikge1xyXG4gICAgbGV0IHJlc291cmNlID0gbW9kZWwudXJpO1xyXG4gICAgcmV0dXJuIHRoaXMuX3dvcmtlcihyZXNvdXJjZSkudGhlbigod29ya2VyKSA9PiB7XHJcbiAgICAgIHJldHVybiB3b3JrZXIuZG9Ib3ZlcihyZXNvdXJjZS50b1N0cmluZygpLCBmcm9tUG9zaXRpb24ocG9zaXRpb24pKTtcclxuICAgIH0pLnRoZW4oKGluZm8pID0+IHtcclxuICAgICAgaWYgKCFpbmZvKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgcmFuZ2U6IHRvUmFuZ2UoaW5mby5yYW5nZSksXHJcbiAgICAgICAgY29udGVudHM6IHRvTWFya2VkU3RyaW5nQXJyYXkoaW5mby5jb250ZW50cylcclxuICAgICAgfTtcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxuZnVuY3Rpb24gaXNNYXJrdXBDb250ZW50KHRoaW5nKSB7XHJcbiAgcmV0dXJuIHRoaW5nICYmIHR5cGVvZiB0aGluZyA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgdGhpbmcua2luZCA9PT0gXCJzdHJpbmdcIjtcclxufVxyXG5mdW5jdGlvbiB0b01hcmtkb3duU3RyaW5nKGVudHJ5KSB7XHJcbiAgaWYgKHR5cGVvZiBlbnRyeSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdmFsdWU6IGVudHJ5XHJcbiAgICB9O1xyXG4gIH1cclxuICBpZiAoaXNNYXJrdXBDb250ZW50KGVudHJ5KSkge1xyXG4gICAgaWYgKGVudHJ5LmtpbmQgPT09IFwicGxhaW50ZXh0XCIpIHtcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB2YWx1ZTogZW50cnkudmFsdWUucmVwbGFjZSgvW1xcXFxgKl97fVtcXF0oKSMrXFwtLiFdL2csIFwiXFxcXCQmXCIpXHJcbiAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB2YWx1ZTogZW50cnkudmFsdWVcclxuICAgIH07XHJcbiAgfVxyXG4gIHJldHVybiB7IHZhbHVlOiBcImBgYFwiICsgZW50cnkubGFuZ3VhZ2UgKyBcIlxcblwiICsgZW50cnkudmFsdWUgKyBcIlxcbmBgYFxcblwiIH07XHJcbn1cclxuZnVuY3Rpb24gdG9NYXJrZWRTdHJpbmdBcnJheShjb250ZW50cykge1xyXG4gIGlmICghY29udGVudHMpIHtcclxuICAgIHJldHVybiB2b2lkIDA7XHJcbiAgfVxyXG4gIGlmIChBcnJheS5pc0FycmF5KGNvbnRlbnRzKSkge1xyXG4gICAgcmV0dXJuIGNvbnRlbnRzLm1hcCh0b01hcmtkb3duU3RyaW5nKTtcclxuICB9XHJcbiAgcmV0dXJuIFt0b01hcmtkb3duU3RyaW5nKGNvbnRlbnRzKV07XHJcbn1cclxudmFyIERvY3VtZW50SGlnaGxpZ2h0QWRhcHRlciA9IGNsYXNzIHtcclxuICBjb25zdHJ1Y3Rvcihfd29ya2VyKSB7XHJcbiAgICB0aGlzLl93b3JrZXIgPSBfd29ya2VyO1xyXG4gIH1cclxuICBwcm92aWRlRG9jdW1lbnRIaWdobGlnaHRzKG1vZGVsLCBwb3NpdGlvbiwgdG9rZW4pIHtcclxuICAgIGNvbnN0IHJlc291cmNlID0gbW9kZWwudXJpO1xyXG4gICAgcmV0dXJuIHRoaXMuX3dvcmtlcihyZXNvdXJjZSkudGhlbigod29ya2VyKSA9PiB3b3JrZXIuZmluZERvY3VtZW50SGlnaGxpZ2h0cyhyZXNvdXJjZS50b1N0cmluZygpLCBmcm9tUG9zaXRpb24ocG9zaXRpb24pKSkudGhlbigoZW50cmllcykgPT4ge1xyXG4gICAgICBpZiAoIWVudHJpZXMpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGVudHJpZXMubWFwKChlbnRyeSkgPT4ge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICByYW5nZTogdG9SYW5nZShlbnRyeS5yYW5nZSksXHJcbiAgICAgICAgICBraW5kOiB0b0RvY3VtZW50SGlnaGxpZ2h0S2luZChlbnRyeS5raW5kKVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59O1xyXG5mdW5jdGlvbiB0b0RvY3VtZW50SGlnaGxpZ2h0S2luZChraW5kKSB7XHJcbiAgc3dpdGNoIChraW5kKSB7XHJcbiAgICBjYXNlIERvY3VtZW50SGlnaGxpZ2h0S2luZC5SZWFkOlxyXG4gICAgICByZXR1cm4gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMubGFuZ3VhZ2VzLkRvY3VtZW50SGlnaGxpZ2h0S2luZC5SZWFkO1xyXG4gICAgY2FzZSBEb2N1bWVudEhpZ2hsaWdodEtpbmQuV3JpdGU6XHJcbiAgICAgIHJldHVybiBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMuRG9jdW1lbnRIaWdobGlnaHRLaW5kLldyaXRlO1xyXG4gICAgY2FzZSBEb2N1bWVudEhpZ2hsaWdodEtpbmQuVGV4dDpcclxuICAgICAgcmV0dXJuIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5Eb2N1bWVudEhpZ2hsaWdodEtpbmQuVGV4dDtcclxuICB9XHJcbiAgcmV0dXJuIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5Eb2N1bWVudEhpZ2hsaWdodEtpbmQuVGV4dDtcclxufVxyXG52YXIgRGVmaW5pdGlvbkFkYXB0ZXIgPSBjbGFzcyB7XHJcbiAgY29uc3RydWN0b3IoX3dvcmtlcikge1xyXG4gICAgdGhpcy5fd29ya2VyID0gX3dvcmtlcjtcclxuICB9XHJcbiAgcHJvdmlkZURlZmluaXRpb24obW9kZWwsIHBvc2l0aW9uLCB0b2tlbikge1xyXG4gICAgY29uc3QgcmVzb3VyY2UgPSBtb2RlbC51cmk7XHJcbiAgICByZXR1cm4gdGhpcy5fd29ya2VyKHJlc291cmNlKS50aGVuKCh3b3JrZXIpID0+IHtcclxuICAgICAgcmV0dXJuIHdvcmtlci5maW5kRGVmaW5pdGlvbihyZXNvdXJjZS50b1N0cmluZygpLCBmcm9tUG9zaXRpb24ocG9zaXRpb24pKTtcclxuICAgIH0pLnRoZW4oKGRlZmluaXRpb24pID0+IHtcclxuICAgICAgaWYgKCFkZWZpbml0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBbdG9Mb2NhdGlvbihkZWZpbml0aW9uKV07XHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcbmZ1bmN0aW9uIHRvTG9jYXRpb24obG9jYXRpb24pIHtcclxuICByZXR1cm4ge1xyXG4gICAgdXJpOiBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5VcmkucGFyc2UobG9jYXRpb24udXJpKSxcclxuICAgIHJhbmdlOiB0b1JhbmdlKGxvY2F0aW9uLnJhbmdlKVxyXG4gIH07XHJcbn1cclxudmFyIFJlZmVyZW5jZUFkYXB0ZXIgPSBjbGFzcyB7XHJcbiAgY29uc3RydWN0b3IoX3dvcmtlcikge1xyXG4gICAgdGhpcy5fd29ya2VyID0gX3dvcmtlcjtcclxuICB9XHJcbiAgcHJvdmlkZVJlZmVyZW5jZXMobW9kZWwsIHBvc2l0aW9uLCBjb250ZXh0LCB0b2tlbikge1xyXG4gICAgY29uc3QgcmVzb3VyY2UgPSBtb2RlbC51cmk7XHJcbiAgICByZXR1cm4gdGhpcy5fd29ya2VyKHJlc291cmNlKS50aGVuKCh3b3JrZXIpID0+IHtcclxuICAgICAgcmV0dXJuIHdvcmtlci5maW5kUmVmZXJlbmNlcyhyZXNvdXJjZS50b1N0cmluZygpLCBmcm9tUG9zaXRpb24ocG9zaXRpb24pKTtcclxuICAgIH0pLnRoZW4oKGVudHJpZXMpID0+IHtcclxuICAgICAgaWYgKCFlbnRyaWVzKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBlbnRyaWVzLm1hcCh0b0xvY2F0aW9uKTtcclxuICAgIH0pO1xyXG4gIH1cclxufTtcclxudmFyIFJlbmFtZUFkYXB0ZXIgPSBjbGFzcyB7XHJcbiAgY29uc3RydWN0b3IoX3dvcmtlcikge1xyXG4gICAgdGhpcy5fd29ya2VyID0gX3dvcmtlcjtcclxuICB9XHJcbiAgcHJvdmlkZVJlbmFtZUVkaXRzKG1vZGVsLCBwb3NpdGlvbiwgbmV3TmFtZSwgdG9rZW4pIHtcclxuICAgIGNvbnN0IHJlc291cmNlID0gbW9kZWwudXJpO1xyXG4gICAgcmV0dXJuIHRoaXMuX3dvcmtlcihyZXNvdXJjZSkudGhlbigod29ya2VyKSA9PiB7XHJcbiAgICAgIHJldHVybiB3b3JrZXIuZG9SZW5hbWUocmVzb3VyY2UudG9TdHJpbmcoKSwgZnJvbVBvc2l0aW9uKHBvc2l0aW9uKSwgbmV3TmFtZSk7XHJcbiAgICB9KS50aGVuKChlZGl0KSA9PiB7XHJcbiAgICAgIHJldHVybiB0b1dvcmtzcGFjZUVkaXQoZWRpdCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcbmZ1bmN0aW9uIHRvV29ya3NwYWNlRWRpdChlZGl0KSB7XHJcbiAgaWYgKCFlZGl0IHx8ICFlZGl0LmNoYW5nZXMpIHtcclxuICAgIHJldHVybiB2b2lkIDA7XHJcbiAgfVxyXG4gIGxldCByZXNvdXJjZUVkaXRzID0gW107XHJcbiAgZm9yIChsZXQgdXJpIGluIGVkaXQuY2hhbmdlcykge1xyXG4gICAgY29uc3QgX3VyaSA9IG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLlVyaS5wYXJzZSh1cmkpO1xyXG4gICAgZm9yIChsZXQgZSBvZiBlZGl0LmNoYW5nZXNbdXJpXSkge1xyXG4gICAgICByZXNvdXJjZUVkaXRzLnB1c2goe1xyXG4gICAgICAgIHJlc291cmNlOiBfdXJpLFxyXG4gICAgICAgIHZlcnNpb25JZDogdm9pZCAwLFxyXG4gICAgICAgIHRleHRFZGl0OiB7XHJcbiAgICAgICAgICByYW5nZTogdG9SYW5nZShlLnJhbmdlKSxcclxuICAgICAgICAgIHRleHQ6IGUubmV3VGV4dFxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIHJldHVybiB7XHJcbiAgICBlZGl0czogcmVzb3VyY2VFZGl0c1xyXG4gIH07XHJcbn1cclxudmFyIERvY3VtZW50U3ltYm9sQWRhcHRlciA9IGNsYXNzIHtcclxuICBjb25zdHJ1Y3Rvcihfd29ya2VyKSB7XHJcbiAgICB0aGlzLl93b3JrZXIgPSBfd29ya2VyO1xyXG4gIH1cclxuICBwcm92aWRlRG9jdW1lbnRTeW1ib2xzKG1vZGVsLCB0b2tlbikge1xyXG4gICAgY29uc3QgcmVzb3VyY2UgPSBtb2RlbC51cmk7XHJcbiAgICByZXR1cm4gdGhpcy5fd29ya2VyKHJlc291cmNlKS50aGVuKCh3b3JrZXIpID0+IHdvcmtlci5maW5kRG9jdW1lbnRTeW1ib2xzKHJlc291cmNlLnRvU3RyaW5nKCkpKS50aGVuKChpdGVtcykgPT4ge1xyXG4gICAgICBpZiAoIWl0ZW1zKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBpdGVtcy5tYXAoKGl0ZW0pID0+IHtcclxuICAgICAgICBpZiAoaXNEb2N1bWVudFN5bWJvbChpdGVtKSkge1xyXG4gICAgICAgICAgcmV0dXJuIHRvRG9jdW1lbnRTeW1ib2woaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICBuYW1lOiBpdGVtLm5hbWUsXHJcbiAgICAgICAgICBkZXRhaWw6IFwiXCIsXHJcbiAgICAgICAgICBjb250YWluZXJOYW1lOiBpdGVtLmNvbnRhaW5lck5hbWUsXHJcbiAgICAgICAgICBraW5kOiB0b1N5bWJvbEtpbmQoaXRlbS5raW5kKSxcclxuICAgICAgICAgIHJhbmdlOiB0b1JhbmdlKGl0ZW0ubG9jYXRpb24ucmFuZ2UpLFxyXG4gICAgICAgICAgc2VsZWN0aW9uUmFuZ2U6IHRvUmFuZ2UoaXRlbS5sb2NhdGlvbi5yYW5nZSksXHJcbiAgICAgICAgICB0YWdzOiBbXVxyXG4gICAgICAgIH07XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59O1xyXG5mdW5jdGlvbiBpc0RvY3VtZW50U3ltYm9sKHN5bWJvbCkge1xyXG4gIHJldHVybiBcImNoaWxkcmVuXCIgaW4gc3ltYm9sO1xyXG59XHJcbmZ1bmN0aW9uIHRvRG9jdW1lbnRTeW1ib2woc3ltYm9sKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIG5hbWU6IHN5bWJvbC5uYW1lLFxyXG4gICAgZGV0YWlsOiBzeW1ib2wuZGV0YWlsID8/IFwiXCIsXHJcbiAgICBraW5kOiB0b1N5bWJvbEtpbmQoc3ltYm9sLmtpbmQpLFxyXG4gICAgcmFuZ2U6IHRvUmFuZ2Uoc3ltYm9sLnJhbmdlKSxcclxuICAgIHNlbGVjdGlvblJhbmdlOiB0b1JhbmdlKHN5bWJvbC5zZWxlY3Rpb25SYW5nZSksXHJcbiAgICB0YWdzOiBzeW1ib2wudGFncyA/PyBbXSxcclxuICAgIGNoaWxkcmVuOiAoc3ltYm9sLmNoaWxkcmVuID8/IFtdKS5tYXAoKGl0ZW0pID0+IHRvRG9jdW1lbnRTeW1ib2woaXRlbSkpXHJcbiAgfTtcclxufVxyXG5mdW5jdGlvbiB0b1N5bWJvbEtpbmQoa2luZCkge1xyXG4gIGxldCBtS2luZCA9IG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5TeW1ib2xLaW5kO1xyXG4gIHN3aXRjaCAoa2luZCkge1xyXG4gICAgY2FzZSBTeW1ib2xLaW5kLkZpbGU6XHJcbiAgICAgIHJldHVybiBtS2luZC5GaWxlO1xyXG4gICAgY2FzZSBTeW1ib2xLaW5kLk1vZHVsZTpcclxuICAgICAgcmV0dXJuIG1LaW5kLk1vZHVsZTtcclxuICAgIGNhc2UgU3ltYm9sS2luZC5OYW1lc3BhY2U6XHJcbiAgICAgIHJldHVybiBtS2luZC5OYW1lc3BhY2U7XHJcbiAgICBjYXNlIFN5bWJvbEtpbmQuUGFja2FnZTpcclxuICAgICAgcmV0dXJuIG1LaW5kLlBhY2thZ2U7XHJcbiAgICBjYXNlIFN5bWJvbEtpbmQuQ2xhc3M6XHJcbiAgICAgIHJldHVybiBtS2luZC5DbGFzcztcclxuICAgIGNhc2UgU3ltYm9sS2luZC5NZXRob2Q6XHJcbiAgICAgIHJldHVybiBtS2luZC5NZXRob2Q7XHJcbiAgICBjYXNlIFN5bWJvbEtpbmQuUHJvcGVydHk6XHJcbiAgICAgIHJldHVybiBtS2luZC5Qcm9wZXJ0eTtcclxuICAgIGNhc2UgU3ltYm9sS2luZC5GaWVsZDpcclxuICAgICAgcmV0dXJuIG1LaW5kLkZpZWxkO1xyXG4gICAgY2FzZSBTeW1ib2xLaW5kLkNvbnN0cnVjdG9yOlxyXG4gICAgICByZXR1cm4gbUtpbmQuQ29uc3RydWN0b3I7XHJcbiAgICBjYXNlIFN5bWJvbEtpbmQuRW51bTpcclxuICAgICAgcmV0dXJuIG1LaW5kLkVudW07XHJcbiAgICBjYXNlIFN5bWJvbEtpbmQuSW50ZXJmYWNlOlxyXG4gICAgICByZXR1cm4gbUtpbmQuSW50ZXJmYWNlO1xyXG4gICAgY2FzZSBTeW1ib2xLaW5kLkZ1bmN0aW9uOlxyXG4gICAgICByZXR1cm4gbUtpbmQuRnVuY3Rpb247XHJcbiAgICBjYXNlIFN5bWJvbEtpbmQuVmFyaWFibGU6XHJcbiAgICAgIHJldHVybiBtS2luZC5WYXJpYWJsZTtcclxuICAgIGNhc2UgU3ltYm9sS2luZC5Db25zdGFudDpcclxuICAgICAgcmV0dXJuIG1LaW5kLkNvbnN0YW50O1xyXG4gICAgY2FzZSBTeW1ib2xLaW5kLlN0cmluZzpcclxuICAgICAgcmV0dXJuIG1LaW5kLlN0cmluZztcclxuICAgIGNhc2UgU3ltYm9sS2luZC5OdW1iZXI6XHJcbiAgICAgIHJldHVybiBtS2luZC5OdW1iZXI7XHJcbiAgICBjYXNlIFN5bWJvbEtpbmQuQm9vbGVhbjpcclxuICAgICAgcmV0dXJuIG1LaW5kLkJvb2xlYW47XHJcbiAgICBjYXNlIFN5bWJvbEtpbmQuQXJyYXk6XHJcbiAgICAgIHJldHVybiBtS2luZC5BcnJheTtcclxuICB9XHJcbiAgcmV0dXJuIG1LaW5kLkZ1bmN0aW9uO1xyXG59XHJcbnZhciBEb2N1bWVudExpbmtBZGFwdGVyID0gY2xhc3Mge1xyXG4gIGNvbnN0cnVjdG9yKF93b3JrZXIpIHtcclxuICAgIHRoaXMuX3dvcmtlciA9IF93b3JrZXI7XHJcbiAgfVxyXG4gIHByb3ZpZGVMaW5rcyhtb2RlbCwgdG9rZW4pIHtcclxuICAgIGNvbnN0IHJlc291cmNlID0gbW9kZWwudXJpO1xyXG4gICAgcmV0dXJuIHRoaXMuX3dvcmtlcihyZXNvdXJjZSkudGhlbigod29ya2VyKSA9PiB3b3JrZXIuZmluZERvY3VtZW50TGlua3MocmVzb3VyY2UudG9TdHJpbmcoKSkpLnRoZW4oKGl0ZW1zKSA9PiB7XHJcbiAgICAgIGlmICghaXRlbXMpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICBsaW5rczogaXRlbXMubWFwKChpdGVtKSA9PiAoe1xyXG4gICAgICAgICAgcmFuZ2U6IHRvUmFuZ2UoaXRlbS5yYW5nZSksXHJcbiAgICAgICAgICB1cmw6IGl0ZW0udGFyZ2V0XHJcbiAgICAgICAgfSkpXHJcbiAgICAgIH07XHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcbnZhciBEb2N1bWVudEZvcm1hdHRpbmdFZGl0UHJvdmlkZXIgPSBjbGFzcyB7XHJcbiAgY29uc3RydWN0b3IoX3dvcmtlcikge1xyXG4gICAgdGhpcy5fd29ya2VyID0gX3dvcmtlcjtcclxuICB9XHJcbiAgcHJvdmlkZURvY3VtZW50Rm9ybWF0dGluZ0VkaXRzKG1vZGVsLCBvcHRpb25zLCB0b2tlbikge1xyXG4gICAgY29uc3QgcmVzb3VyY2UgPSBtb2RlbC51cmk7XHJcbiAgICByZXR1cm4gdGhpcy5fd29ya2VyKHJlc291cmNlKS50aGVuKCh3b3JrZXIpID0+IHtcclxuICAgICAgcmV0dXJuIHdvcmtlci5mb3JtYXQocmVzb3VyY2UudG9TdHJpbmcoKSwgbnVsbCwgZnJvbUZvcm1hdHRpbmdPcHRpb25zKG9wdGlvbnMpKS50aGVuKChlZGl0cykgPT4ge1xyXG4gICAgICAgIGlmICghZWRpdHMgfHwgZWRpdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlZGl0cy5tYXAodG9UZXh0RWRpdCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59O1xyXG52YXIgRG9jdW1lbnRSYW5nZUZvcm1hdHRpbmdFZGl0UHJvdmlkZXIgPSBjbGFzcyB7XHJcbiAgY29uc3RydWN0b3IoX3dvcmtlcikge1xyXG4gICAgdGhpcy5fd29ya2VyID0gX3dvcmtlcjtcclxuICAgIHRoaXMuY2FuRm9ybWF0TXVsdGlwbGVSYW5nZXMgPSBmYWxzZTtcclxuICB9XHJcbiAgcHJvdmlkZURvY3VtZW50UmFuZ2VGb3JtYXR0aW5nRWRpdHMobW9kZWwsIHJhbmdlLCBvcHRpb25zLCB0b2tlbikge1xyXG4gICAgY29uc3QgcmVzb3VyY2UgPSBtb2RlbC51cmk7XHJcbiAgICByZXR1cm4gdGhpcy5fd29ya2VyKHJlc291cmNlKS50aGVuKCh3b3JrZXIpID0+IHtcclxuICAgICAgcmV0dXJuIHdvcmtlci5mb3JtYXQocmVzb3VyY2UudG9TdHJpbmcoKSwgZnJvbVJhbmdlKHJhbmdlKSwgZnJvbUZvcm1hdHRpbmdPcHRpb25zKG9wdGlvbnMpKS50aGVuKChlZGl0cykgPT4ge1xyXG4gICAgICAgIGlmICghZWRpdHMgfHwgZWRpdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlZGl0cy5tYXAodG9UZXh0RWRpdCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59O1xyXG5mdW5jdGlvbiBmcm9tRm9ybWF0dGluZ09wdGlvbnMob3B0aW9ucykge1xyXG4gIHJldHVybiB7XHJcbiAgICB0YWJTaXplOiBvcHRpb25zLnRhYlNpemUsXHJcbiAgICBpbnNlcnRTcGFjZXM6IG9wdGlvbnMuaW5zZXJ0U3BhY2VzXHJcbiAgfTtcclxufVxyXG52YXIgRG9jdW1lbnRDb2xvckFkYXB0ZXIgPSBjbGFzcyB7XHJcbiAgY29uc3RydWN0b3IoX3dvcmtlcikge1xyXG4gICAgdGhpcy5fd29ya2VyID0gX3dvcmtlcjtcclxuICB9XHJcbiAgcHJvdmlkZURvY3VtZW50Q29sb3JzKG1vZGVsLCB0b2tlbikge1xyXG4gICAgY29uc3QgcmVzb3VyY2UgPSBtb2RlbC51cmk7XHJcbiAgICByZXR1cm4gdGhpcy5fd29ya2VyKHJlc291cmNlKS50aGVuKCh3b3JrZXIpID0+IHdvcmtlci5maW5kRG9jdW1lbnRDb2xvcnMocmVzb3VyY2UudG9TdHJpbmcoKSkpLnRoZW4oKGluZm9zKSA9PiB7XHJcbiAgICAgIGlmICghaW5mb3MpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGluZm9zLm1hcCgoaXRlbSkgPT4gKHtcclxuICAgICAgICBjb2xvcjogaXRlbS5jb2xvcixcclxuICAgICAgICByYW5nZTogdG9SYW5nZShpdGVtLnJhbmdlKVxyXG4gICAgICB9KSk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgcHJvdmlkZUNvbG9yUHJlc2VudGF0aW9ucyhtb2RlbCwgaW5mbywgdG9rZW4pIHtcclxuICAgIGNvbnN0IHJlc291cmNlID0gbW9kZWwudXJpO1xyXG4gICAgcmV0dXJuIHRoaXMuX3dvcmtlcihyZXNvdXJjZSkudGhlbihcclxuICAgICAgKHdvcmtlcikgPT4gd29ya2VyLmdldENvbG9yUHJlc2VudGF0aW9ucyhyZXNvdXJjZS50b1N0cmluZygpLCBpbmZvLmNvbG9yLCBmcm9tUmFuZ2UoaW5mby5yYW5nZSkpXHJcbiAgICApLnRoZW4oKHByZXNlbnRhdGlvbnMpID0+IHtcclxuICAgICAgaWYgKCFwcmVzZW50YXRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBwcmVzZW50YXRpb25zLm1hcCgocHJlc2VudGF0aW9uKSA9PiB7XHJcbiAgICAgICAgbGV0IGl0ZW0gPSB7XHJcbiAgICAgICAgICBsYWJlbDogcHJlc2VudGF0aW9uLmxhYmVsXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAocHJlc2VudGF0aW9uLnRleHRFZGl0KSB7XHJcbiAgICAgICAgICBpdGVtLnRleHRFZGl0ID0gdG9UZXh0RWRpdChwcmVzZW50YXRpb24udGV4dEVkaXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocHJlc2VudGF0aW9uLmFkZGl0aW9uYWxUZXh0RWRpdHMpIHtcclxuICAgICAgICAgIGl0ZW0uYWRkaXRpb25hbFRleHRFZGl0cyA9IHByZXNlbnRhdGlvbi5hZGRpdGlvbmFsVGV4dEVkaXRzLm1hcCh0b1RleHRFZGl0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59O1xyXG52YXIgRm9sZGluZ1JhbmdlQWRhcHRlciA9IGNsYXNzIHtcclxuICBjb25zdHJ1Y3Rvcihfd29ya2VyKSB7XHJcbiAgICB0aGlzLl93b3JrZXIgPSBfd29ya2VyO1xyXG4gIH1cclxuICBwcm92aWRlRm9sZGluZ1Jhbmdlcyhtb2RlbCwgY29udGV4dCwgdG9rZW4pIHtcclxuICAgIGNvbnN0IHJlc291cmNlID0gbW9kZWwudXJpO1xyXG4gICAgcmV0dXJuIHRoaXMuX3dvcmtlcihyZXNvdXJjZSkudGhlbigod29ya2VyKSA9PiB3b3JrZXIuZ2V0Rm9sZGluZ1JhbmdlcyhyZXNvdXJjZS50b1N0cmluZygpLCBjb250ZXh0KSkudGhlbigocmFuZ2VzKSA9PiB7XHJcbiAgICAgIGlmICghcmFuZ2VzKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByYW5nZXMubWFwKChyYW5nZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHtcclxuICAgICAgICAgIHN0YXJ0OiByYW5nZS5zdGFydExpbmUgKyAxLFxyXG4gICAgICAgICAgZW5kOiByYW5nZS5lbmRMaW5lICsgMVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKHR5cGVvZiByYW5nZS5raW5kICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICByZXN1bHQua2luZCA9IHRvRm9sZGluZ1JhbmdlS2luZChyYW5nZS5raW5kKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcbmZ1bmN0aW9uIHRvRm9sZGluZ1JhbmdlS2luZChraW5kKSB7XHJcbiAgc3dpdGNoIChraW5kKSB7XHJcbiAgICBjYXNlIEZvbGRpbmdSYW5nZUtpbmQuQ29tbWVudDpcclxuICAgICAgcmV0dXJuIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5Gb2xkaW5nUmFuZ2VLaW5kLkNvbW1lbnQ7XHJcbiAgICBjYXNlIEZvbGRpbmdSYW5nZUtpbmQuSW1wb3J0czpcclxuICAgICAgcmV0dXJuIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5Gb2xkaW5nUmFuZ2VLaW5kLkltcG9ydHM7XHJcbiAgICBjYXNlIEZvbGRpbmdSYW5nZUtpbmQuUmVnaW9uOlxyXG4gICAgICByZXR1cm4gbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMubGFuZ3VhZ2VzLkZvbGRpbmdSYW5nZUtpbmQuUmVnaW9uO1xyXG4gIH1cclxuICByZXR1cm4gdm9pZCAwO1xyXG59XHJcbnZhciBTZWxlY3Rpb25SYW5nZUFkYXB0ZXIgPSBjbGFzcyB7XHJcbiAgY29uc3RydWN0b3IoX3dvcmtlcikge1xyXG4gICAgdGhpcy5fd29ya2VyID0gX3dvcmtlcjtcclxuICB9XHJcbiAgcHJvdmlkZVNlbGVjdGlvblJhbmdlcyhtb2RlbCwgcG9zaXRpb25zLCB0b2tlbikge1xyXG4gICAgY29uc3QgcmVzb3VyY2UgPSBtb2RlbC51cmk7XHJcbiAgICByZXR1cm4gdGhpcy5fd29ya2VyKHJlc291cmNlKS50aGVuKFxyXG4gICAgICAod29ya2VyKSA9PiB3b3JrZXIuZ2V0U2VsZWN0aW9uUmFuZ2VzKFxyXG4gICAgICAgIHJlc291cmNlLnRvU3RyaW5nKCksXHJcbiAgICAgICAgcG9zaXRpb25zLm1hcChmcm9tUG9zaXRpb24pXHJcbiAgICAgIClcclxuICAgICkudGhlbigoc2VsZWN0aW9uUmFuZ2VzKSA9PiB7XHJcbiAgICAgIGlmICghc2VsZWN0aW9uUmFuZ2VzKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBzZWxlY3Rpb25SYW5nZXMubWFwKChzZWxlY3Rpb25SYW5nZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdO1xyXG4gICAgICAgIHdoaWxlIChzZWxlY3Rpb25SYW5nZSkge1xyXG4gICAgICAgICAgcmVzdWx0LnB1c2goeyByYW5nZTogdG9SYW5nZShzZWxlY3Rpb25SYW5nZS5yYW5nZSkgfSk7XHJcbiAgICAgICAgICBzZWxlY3Rpb25SYW5nZSA9IHNlbGVjdGlvblJhbmdlLnBhcmVudDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn07XHJcblxyXG4vLyBzcmMvbGFuZ3VhZ2UvY3NzL2Nzc01vZGUudHNcclxuZnVuY3Rpb24gc2V0dXBNb2RlKGRlZmF1bHRzKSB7XHJcbiAgY29uc3QgZGlzcG9zYWJsZXMgPSBbXTtcclxuICBjb25zdCBwcm92aWRlcnMgPSBbXTtcclxuICBjb25zdCBjbGllbnQgPSBuZXcgV29ya2VyTWFuYWdlcihkZWZhdWx0cyk7XHJcbiAgZGlzcG9zYWJsZXMucHVzaChjbGllbnQpO1xyXG4gIGNvbnN0IHdvcmtlciA9ICguLi51cmlzKSA9PiB7XHJcbiAgICByZXR1cm4gY2xpZW50LmdldExhbmd1YWdlU2VydmljZVdvcmtlciguLi51cmlzKTtcclxuICB9O1xyXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyUHJvdmlkZXJzKCkge1xyXG4gICAgY29uc3QgeyBsYW5ndWFnZUlkLCBtb2RlQ29uZmlndXJhdGlvbiB9ID0gZGVmYXVsdHM7XHJcbiAgICBkaXNwb3NlQWxsKHByb3ZpZGVycyk7XHJcbiAgICBpZiAobW9kZUNvbmZpZ3VyYXRpb24uY29tcGxldGlvbkl0ZW1zKSB7XHJcbiAgICAgIHByb3ZpZGVycy5wdXNoKFxyXG4gICAgICAgIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5yZWdpc3RlckNvbXBsZXRpb25JdGVtUHJvdmlkZXIoXHJcbiAgICAgICAgICBsYW5ndWFnZUlkLFxyXG4gICAgICAgICAgbmV3IENvbXBsZXRpb25BZGFwdGVyKHdvcmtlciwgW1wiL1wiLCBcIi1cIiwgXCI6XCJdKVxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIGlmIChtb2RlQ29uZmlndXJhdGlvbi5ob3ZlcnMpIHtcclxuICAgICAgcHJvdmlkZXJzLnB1c2goXHJcbiAgICAgICAgbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMubGFuZ3VhZ2VzLnJlZ2lzdGVySG92ZXJQcm92aWRlcihsYW5ndWFnZUlkLCBuZXcgSG92ZXJBZGFwdGVyKHdvcmtlcikpXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBpZiAobW9kZUNvbmZpZ3VyYXRpb24uZG9jdW1lbnRIaWdobGlnaHRzKSB7XHJcbiAgICAgIHByb3ZpZGVycy5wdXNoKFxyXG4gICAgICAgIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5yZWdpc3RlckRvY3VtZW50SGlnaGxpZ2h0UHJvdmlkZXIoXHJcbiAgICAgICAgICBsYW5ndWFnZUlkLFxyXG4gICAgICAgICAgbmV3IERvY3VtZW50SGlnaGxpZ2h0QWRhcHRlcih3b3JrZXIpXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgaWYgKG1vZGVDb25maWd1cmF0aW9uLmRlZmluaXRpb25zKSB7XHJcbiAgICAgIHByb3ZpZGVycy5wdXNoKFxyXG4gICAgICAgIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5yZWdpc3RlckRlZmluaXRpb25Qcm92aWRlcihcclxuICAgICAgICAgIGxhbmd1YWdlSWQsXHJcbiAgICAgICAgICBuZXcgRGVmaW5pdGlvbkFkYXB0ZXIod29ya2VyKVxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIGlmIChtb2RlQ29uZmlndXJhdGlvbi5yZWZlcmVuY2VzKSB7XHJcbiAgICAgIHByb3ZpZGVycy5wdXNoKFxyXG4gICAgICAgIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5yZWdpc3RlclJlZmVyZW5jZVByb3ZpZGVyKFxyXG4gICAgICAgICAgbGFuZ3VhZ2VJZCxcclxuICAgICAgICAgIG5ldyBSZWZlcmVuY2VBZGFwdGVyKHdvcmtlcilcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBpZiAobW9kZUNvbmZpZ3VyYXRpb24uZG9jdW1lbnRTeW1ib2xzKSB7XHJcbiAgICAgIHByb3ZpZGVycy5wdXNoKFxyXG4gICAgICAgIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5yZWdpc3RlckRvY3VtZW50U3ltYm9sUHJvdmlkZXIoXHJcbiAgICAgICAgICBsYW5ndWFnZUlkLFxyXG4gICAgICAgICAgbmV3IERvY3VtZW50U3ltYm9sQWRhcHRlcih3b3JrZXIpXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgaWYgKG1vZGVDb25maWd1cmF0aW9uLnJlbmFtZSkge1xyXG4gICAgICBwcm92aWRlcnMucHVzaChcclxuICAgICAgICBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMucmVnaXN0ZXJSZW5hbWVQcm92aWRlcihsYW5ndWFnZUlkLCBuZXcgUmVuYW1lQWRhcHRlcih3b3JrZXIpKVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgaWYgKG1vZGVDb25maWd1cmF0aW9uLmNvbG9ycykge1xyXG4gICAgICBwcm92aWRlcnMucHVzaChcclxuICAgICAgICBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMucmVnaXN0ZXJDb2xvclByb3ZpZGVyKFxyXG4gICAgICAgICAgbGFuZ3VhZ2VJZCxcclxuICAgICAgICAgIG5ldyBEb2N1bWVudENvbG9yQWRhcHRlcih3b3JrZXIpXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgaWYgKG1vZGVDb25maWd1cmF0aW9uLmZvbGRpbmdSYW5nZXMpIHtcclxuICAgICAgcHJvdmlkZXJzLnB1c2goXHJcbiAgICAgICAgbW9uYWNvX2VkaXRvcl9jb3JlX2V4cG9ydHMubGFuZ3VhZ2VzLnJlZ2lzdGVyRm9sZGluZ1JhbmdlUHJvdmlkZXIoXHJcbiAgICAgICAgICBsYW5ndWFnZUlkLFxyXG4gICAgICAgICAgbmV3IEZvbGRpbmdSYW5nZUFkYXB0ZXIod29ya2VyKVxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgIH1cclxuICAgIGlmIChtb2RlQ29uZmlndXJhdGlvbi5kaWFnbm9zdGljcykge1xyXG4gICAgICBwcm92aWRlcnMucHVzaChcclxuICAgICAgICBuZXcgRGlhZ25vc3RpY3NBZGFwdGVyKGxhbmd1YWdlSWQsIHdvcmtlciwgZGVmYXVsdHMub25EaWRDaGFuZ2UpXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBpZiAobW9kZUNvbmZpZ3VyYXRpb24uc2VsZWN0aW9uUmFuZ2VzKSB7XHJcbiAgICAgIHByb3ZpZGVycy5wdXNoKFxyXG4gICAgICAgIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5yZWdpc3RlclNlbGVjdGlvblJhbmdlUHJvdmlkZXIoXHJcbiAgICAgICAgICBsYW5ndWFnZUlkLFxyXG4gICAgICAgICAgbmV3IFNlbGVjdGlvblJhbmdlQWRhcHRlcih3b3JrZXIpXHJcbiAgICAgICAgKVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gICAgaWYgKG1vZGVDb25maWd1cmF0aW9uLmRvY3VtZW50Rm9ybWF0dGluZ0VkaXRzKSB7XHJcbiAgICAgIHByb3ZpZGVycy5wdXNoKFxyXG4gICAgICAgIG1vbmFjb19lZGl0b3JfY29yZV9leHBvcnRzLmxhbmd1YWdlcy5yZWdpc3RlckRvY3VtZW50Rm9ybWF0dGluZ0VkaXRQcm92aWRlcihcclxuICAgICAgICAgIGxhbmd1YWdlSWQsXHJcbiAgICAgICAgICBuZXcgRG9jdW1lbnRGb3JtYXR0aW5nRWRpdFByb3ZpZGVyKHdvcmtlcilcclxuICAgICAgICApXHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgICBpZiAobW9kZUNvbmZpZ3VyYXRpb24uZG9jdW1lbnRSYW5nZUZvcm1hdHRpbmdFZGl0cykge1xyXG4gICAgICBwcm92aWRlcnMucHVzaChcclxuICAgICAgICBtb25hY29fZWRpdG9yX2NvcmVfZXhwb3J0cy5sYW5ndWFnZXMucmVnaXN0ZXJEb2N1bWVudFJhbmdlRm9ybWF0dGluZ0VkaXRQcm92aWRlcihcclxuICAgICAgICAgIGxhbmd1YWdlSWQsXHJcbiAgICAgICAgICBuZXcgRG9jdW1lbnRSYW5nZUZvcm1hdHRpbmdFZGl0UHJvdmlkZXIod29ya2VyKVxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgIH1cclxuICB9XHJcbiAgcmVnaXN0ZXJQcm92aWRlcnMoKTtcclxuICBkaXNwb3NhYmxlcy5wdXNoKGFzRGlzcG9zYWJsZShwcm92aWRlcnMpKTtcclxuICByZXR1cm4gYXNEaXNwb3NhYmxlKGRpc3Bvc2FibGVzKTtcclxufVxyXG5mdW5jdGlvbiBhc0Rpc3Bvc2FibGUoZGlzcG9zYWJsZXMpIHtcclxuICByZXR1cm4geyBkaXNwb3NlOiAoKSA9PiBkaXNwb3NlQWxsKGRpc3Bvc2FibGVzKSB9O1xyXG59XHJcbmZ1bmN0aW9uIGRpc3Bvc2VBbGwoZGlzcG9zYWJsZXMpIHtcclxuICB3aGlsZSAoZGlzcG9zYWJsZXMubGVuZ3RoKSB7XHJcbiAgICBkaXNwb3NhYmxlcy5wb3AoKS5kaXNwb3NlKCk7XHJcbiAgfVxyXG59XHJcbmV4cG9ydCB7XHJcbiAgQ29tcGxldGlvbkFkYXB0ZXIsXHJcbiAgRGVmaW5pdGlvbkFkYXB0ZXIsXHJcbiAgRGlhZ25vc3RpY3NBZGFwdGVyLFxyXG4gIERvY3VtZW50Q29sb3JBZGFwdGVyLFxyXG4gIERvY3VtZW50Rm9ybWF0dGluZ0VkaXRQcm92aWRlcixcclxuICBEb2N1bWVudEhpZ2hsaWdodEFkYXB0ZXIsXHJcbiAgRG9jdW1lbnRMaW5rQWRhcHRlcixcclxuICBEb2N1bWVudFJhbmdlRm9ybWF0dGluZ0VkaXRQcm92aWRlcixcclxuICBEb2N1bWVudFN5bWJvbEFkYXB0ZXIsXHJcbiAgRm9sZGluZ1JhbmdlQWRhcHRlcixcclxuICBIb3ZlckFkYXB0ZXIsXHJcbiAgUmVmZXJlbmNlQWRhcHRlcixcclxuICBSZW5hbWVBZGFwdGVyLFxyXG4gIFNlbGVjdGlvblJhbmdlQWRhcHRlcixcclxuICBXb3JrZXJNYW5hZ2VyLFxyXG4gIGZyb21Qb3NpdGlvbixcclxuICBmcm9tUmFuZ2UsXHJcbiAgc2V0dXBNb2RlLFxyXG4gIHRvUmFuZ2UsXHJcbiAgdG9UZXh0RWRpdFxyXG59O1xyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/monaco-editor/esm/vs/language/css/cssMode.js\n");

/***/ })

}]);